{"version":3,"sources":["@wordpress/components/src/dropdown-menu/index.js"],"names":["classnames","flatMap","isEmpty","isFunction","DOWN","deprecated","menu","Button","ToolbarButton","Dropdown","NavigableMenu","mergeProps","defaultProps","props","mergedProps","className","DropdownMenu","children","controls","icon","label","popoverProps","toggleProps","menuProps","disableOpenOnArrowDown","text","menuLabel","position","noIcons","isToolbarButton","since","alternative","controlSets","Array","isArray","mergedPopoverProps","ButtonComponent","isOpen","onToggle","openOnArrowDown","event","keyCode","preventDefault","stopPropagation","mergedToggleProps","onClick","onKeyDown","showTooltip","mergedMenuProps","controlSet","indexOfSet","map","control","indexOfControl","join","onClose","isActive","role","undefined","isDisabled","title"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { flatMap, isEmpty, isFunction } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { DOWN } from '@wordpress/keycodes';\nimport deprecated from '@wordpress/deprecated';\nimport { menu } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport Button from '../button';\nimport ToolbarButton from '../toolbar-button';\nimport Dropdown from '../dropdown';\nimport { NavigableMenu } from '../navigable-container';\n\nfunction mergeProps( defaultProps = {}, props = {} ) {\n\tconst mergedProps = {\n\t\t...defaultProps,\n\t\t...props,\n\t};\n\n\tif ( props.className && defaultProps.className ) {\n\t\tmergedProps.className = classnames(\n\t\t\tprops.className,\n\t\t\tdefaultProps.className\n\t\t);\n\t}\n\n\treturn mergedProps;\n}\n\nfunction DropdownMenu( {\n\tchildren,\n\tclassName,\n\tcontrols,\n\ticon = menu,\n\tlabel,\n\tpopoverProps,\n\ttoggleProps,\n\tmenuProps,\n\tdisableOpenOnArrowDown = false,\n\ttext,\n\t// The following props exist for backward compatibility.\n\tmenuLabel,\n\tposition,\n\tnoIcons,\n\tisToolbarButton = false,\n} ) {\n\tif ( menuLabel ) {\n\t\tdeprecated( '`menuLabel` prop in `DropdownComponent`', {\n\t\t\tsince: '5.3',\n\t\t\talternative: '`menuProps` object and its `aria-label` property',\n\t\t} );\n\t}\n\n\tif ( position ) {\n\t\tdeprecated( '`position` prop in `DropdownComponent`', {\n\t\t\tsince: '5.3',\n\t\t\talternative: '`popoverProps` object and its `position` property',\n\t\t} );\n\t}\n\n\tif ( isEmpty( controls ) && ! isFunction( children ) ) {\n\t\treturn null;\n\t}\n\n\t// Normalize controls to nested array of objects (sets of controls)\n\tlet controlSets;\n\tif ( ! isEmpty( controls ) ) {\n\t\tcontrolSets = controls;\n\t\tif ( ! Array.isArray( controlSets[ 0 ] ) ) {\n\t\t\tcontrolSets = [ controlSets ];\n\t\t}\n\t}\n\tconst mergedPopoverProps = mergeProps(\n\t\t{\n\t\t\tclassName: 'components-dropdown-menu__popover',\n\t\t\tposition,\n\t\t},\n\t\tpopoverProps\n\t);\n\n\tconst ButtonComponent = isToolbarButton ? ToolbarButton : Button;\n\n\treturn (\n\t\t<Dropdown\n\t\t\tclassName={ classnames( 'components-dropdown-menu', className ) }\n\t\t\tpopoverProps={ mergedPopoverProps }\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => {\n\t\t\t\tconst openOnArrowDown = ( event ) => {\n\t\t\t\t\tif ( disableOpenOnArrowDown ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\tonToggle();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst mergedToggleProps = mergeProps(\n\t\t\t\t\t{\n\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t'components-dropdown-menu__toggle',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-opened': isOpen,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\ttoggleProps\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<ButtonComponent\n\t\t\t\t\t\t{ ...mergedToggleProps }\n\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\tonToggle( event );\n\t\t\t\t\t\t\tif ( mergedToggleProps.onClick ) {\n\t\t\t\t\t\t\t\tmergedToggleProps.onClick( event );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\t\t\topenOnArrowDown( event );\n\t\t\t\t\t\t\tif ( mergedToggleProps.onKeyDown ) {\n\t\t\t\t\t\t\t\tmergedToggleProps.onKeyDown( event );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\ttext={ text }\n\t\t\t\t\t\tshowTooltip={ toggleProps?.showTooltip ?? true }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ mergedToggleProps.children }\n\t\t\t\t\t</ButtonComponent>\n\t\t\t\t);\n\t\t\t} }\n\t\t\trenderContent={ ( props ) => {\n\t\t\t\tconst mergedMenuProps = mergeProps(\n\t\t\t\t\t{\n\t\t\t\t\t\t'aria-label': menuLabel || label,\n\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t'components-dropdown-menu__menu',\n\t\t\t\t\t\t\t{ 'no-icons': noIcons }\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\tmenuProps\n\t\t\t\t);\n\n\t\t\t\treturn (\n\t\t\t\t\t<NavigableMenu { ...mergedMenuProps } role=\"menu\">\n\t\t\t\t\t\t{ isFunction( children ) ? children( props ) : null }\n\t\t\t\t\t\t{ flatMap( controlSets, ( controlSet, indexOfSet ) =>\n\t\t\t\t\t\t\tcontrolSet.map( ( control, indexOfControl ) => (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tkey={ [\n\t\t\t\t\t\t\t\t\t\tindexOfSet,\n\t\t\t\t\t\t\t\t\t\tindexOfControl,\n\t\t\t\t\t\t\t\t\t].join() }\n\t\t\t\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\t\t\t\tprops.onClose();\n\t\t\t\t\t\t\t\t\t\tif ( control.onClick ) {\n\t\t\t\t\t\t\t\t\t\t\tcontrol.onClick();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t\t\t'components-dropdown-menu__menu-item',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'has-separator':\n\t\t\t\t\t\t\t\t\t\t\t\tindexOfSet > 0 &&\n\t\t\t\t\t\t\t\t\t\t\t\tindexOfControl === 0,\n\t\t\t\t\t\t\t\t\t\t\t'is-active': control.isActive,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\ticon={ control.icon }\n\t\t\t\t\t\t\t\t\taria-checked={\n\t\t\t\t\t\t\t\t\t\tcontrol.role === 'menuitemcheckbox' ||\n\t\t\t\t\t\t\t\t\t\tcontrol.role === 'menuitemradio'\n\t\t\t\t\t\t\t\t\t\t\t? control.isActive\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\trole={\n\t\t\t\t\t\t\t\t\t\tcontrol.role === 'menuitemcheckbox' ||\n\t\t\t\t\t\t\t\t\t\tcontrol.role === 'menuitemradio'\n\t\t\t\t\t\t\t\t\t\t\t? control.role\n\t\t\t\t\t\t\t\t\t\t\t: 'menuitem'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdisabled={ control.isDisabled }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ control.title }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t) )\n\t\t\t\t\t\t) }\n\t\t\t\t\t</NavigableMenu>\n\t\t\t\t);\n\t\t\t} }\n\t\t/>\n\t);\n}\n\nexport default DropdownMenu;\n"]}