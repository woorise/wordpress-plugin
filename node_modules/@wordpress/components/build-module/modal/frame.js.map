{"version":3,"sources":["@wordpress/components/src/modal/frame.js"],"names":["classnames","Component","ESCAPE","useFocusReturn","useFocusOnMount","useConstrainedTabbing","useMergeRefs","withFocusOutside","ModalFrameContent","overlayClassName","contentLabel","aria","describedby","labelledby","children","className","role","style","focusOnMount","shouldCloseOnEsc","onRequestClose","handleEscapeKeyDown","event","keyCode","stopPropagation","focusOnMountRef","constrainedTabbingRef","focusReturnRef","ModalFrame","arguments","handleFocusOutside","bind","props","shouldCloseOnClickOutside"],"mappings":";;;;;;;;;;;;AAAA;AACA;AACA;AACA,OAAOA,UAAP,MAAuB,YAAvB;AAEA;AACA;AACA;;AAEA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,SACCC,cADD,EAECC,eAFD,EAGCC,qBAHD,EAICC,YAJD,QAKO,oBALP;AAOA;AACA;AACA;;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;;AAEA,SAASC,iBAAT,OAWI;AAAA,MAVHC,gBAUG,QAVHA,gBAUG;AAAA,MATHC,YASG,QATHA,YASG;AAAA,uBARHC,IAQG;AAAA,MARKC,WAQL,aARKA,WAQL;AAAA,MARkBC,UAQlB,aARkBA,UAQlB;AAAA,MAPHC,QAOG,QAPHA,QAOG;AAAA,MANHC,SAMG,QANHA,SAMG;AAAA,MALHC,IAKG,QALHA,IAKG;AAAA,MAJHC,KAIG,QAJHA,KAIG;AAAA,MAHHC,YAGG,QAHHA,YAGG;AAAA,MAFHC,gBAEG,QAFHA,gBAEG;AAAA,MADHC,cACG,QADHA,cACG;;AACH,WAASC,mBAAT,CAA8BC,KAA9B,EAAsC;AACrC,QAAKH,gBAAgB,IAAIG,KAAK,CAACC,OAAN,KAAkBrB,MAA3C,EAAoD;AACnDoB,MAAAA,KAAK,CAACE,eAAN;;AACA,UAAKJ,cAAL,EAAsB;AACrBA,QAAAA,cAAc,CAAEE,KAAF,CAAd;AACA;AACD;AACD;;AACD,MAAMG,eAAe,GAAGrB,eAAe,CAAEc,YAAF,CAAvC;AACA,MAAMQ,qBAAqB,GAAGrB,qBAAqB,EAAnD;AACA,MAAMsB,cAAc,GAAGxB,cAAc,EAArC;AAEA,SACC;AACA;AACC,MAAA,SAAS,EAAGH,UAAU,CACrB,kCADqB,EAErBS,gBAFqB,CADvB;AAKC,MAAA,SAAS,EAAGY;AALb,OAOC;AACC,MAAA,SAAS,EAAGrB,UAAU,CAAE,yBAAF,EAA6Be,SAA7B,CADvB;AAEC,MAAA,KAAK,EAAGE,KAFT;AAGC,MAAA,GAAG,EAAGX,YAAY,CAAE,CACnBoB,qBADmB,EAEnBC,cAFmB,EAGnBF,eAHmB,CAAF,CAHnB;AAQC,MAAA,IAAI,EAAGT,IARR;AASC,oBAAaN,YATd;AAUC,yBAAkBA,YAAY,GAAG,IAAH,GAAUG,UAVzC;AAWC,0BAAmBD,WAXpB;AAYC,MAAA,QAAQ,EAAC;AAZV,OAcGE,QAdH,CAPD;AAFD;AA2BA;;IAEKc,U;;;;;AACL,wBAAc;AAAA;;AAAA;;AACb,+BAAUC,SAAV;AACA,UAAKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBC,IAAxB,+BAA1B;AAFa;AAGb;AAED;AACD;AACA;AACA;AACA;;;;;WACC,4BAAoBT,KAApB,EAA4B;AAC3B,UACC,KAAKU,KAAL,CAAWC,yBAAX,IACA,KAAKD,KAAL,CAAWZ,cAFZ,EAGE;AACD,aAAKY,KAAL,CAAWZ,cAAX,CAA2BE,KAA3B;AACA;AACD;AAED;AACD;AACA;AACA;AACA;;;;WACC,kBAAS;AACR,aAAO,cAAC,iBAAD,EAAwB,KAAKU,KAA7B,CAAP;AACA;;;;EA3BuB/B,S;;AA8BzB,eAAeM,gBAAgB,CAAEqB,UAAF,CAA/B","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\n\nimport { Component } from '@wordpress/element';\nimport { ESCAPE } from '@wordpress/keycodes';\nimport {\n\tuseFocusReturn,\n\tuseFocusOnMount,\n\tuseConstrainedTabbing,\n\tuseMergeRefs,\n} from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport withFocusOutside from '../higher-order/with-focus-outside';\n\nfunction ModalFrameContent( {\n\toverlayClassName,\n\tcontentLabel,\n\taria: { describedby, labelledby },\n\tchildren,\n\tclassName,\n\trole,\n\tstyle,\n\tfocusOnMount,\n\tshouldCloseOnEsc,\n\tonRequestClose,\n} ) {\n\tfunction handleEscapeKeyDown( event ) {\n\t\tif ( shouldCloseOnEsc && event.keyCode === ESCAPE ) {\n\t\t\tevent.stopPropagation();\n\t\t\tif ( onRequestClose ) {\n\t\t\t\tonRequestClose( event );\n\t\t\t}\n\t\t}\n\t}\n\tconst focusOnMountRef = useFocusOnMount( focusOnMount );\n\tconst constrainedTabbingRef = useConstrainedTabbing();\n\tconst focusReturnRef = useFocusReturn();\n\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/no-static-element-interactions\n\t\t<div\n\t\t\tclassName={ classnames(\n\t\t\t\t'components-modal__screen-overlay',\n\t\t\t\toverlayClassName\n\t\t\t) }\n\t\t\tonKeyDown={ handleEscapeKeyDown }\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName={ classnames( 'components-modal__frame', className ) }\n\t\t\t\tstyle={ style }\n\t\t\t\tref={ useMergeRefs( [\n\t\t\t\t\tconstrainedTabbingRef,\n\t\t\t\t\tfocusReturnRef,\n\t\t\t\t\tfocusOnMountRef,\n\t\t\t\t] ) }\n\t\t\t\trole={ role }\n\t\t\t\taria-label={ contentLabel }\n\t\t\t\taria-labelledby={ contentLabel ? null : labelledby }\n\t\t\t\taria-describedby={ describedby }\n\t\t\t\ttabIndex=\"-1\"\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nclass ModalFrame extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.handleFocusOutside = this.handleFocusOutside.bind( this );\n\t}\n\n\t/**\n\t * Callback function called when clicked outside the modal.\n\t *\n\t * @param {Object} event Mouse click event.\n\t */\n\thandleFocusOutside( event ) {\n\t\tif (\n\t\t\tthis.props.shouldCloseOnClickOutside &&\n\t\t\tthis.props.onRequestClose\n\t\t) {\n\t\t\tthis.props.onRequestClose( event );\n\t\t}\n\t}\n\n\t/**\n\t * Renders the modal frame element.\n\t *\n\t * @return {WPElement} The modal frame element.\n\t */\n\trender() {\n\t\treturn <ModalFrameContent { ...this.props } />;\n\t}\n}\n\nexport default withFocusOutside( ModalFrame );\n"]}