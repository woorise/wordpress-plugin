{"version":3,"sources":["@wordpress/components/src/unit-control/utils.js"],"names":["isEmpty","__","_x","CSS_UNITS","value","label","default","a11yLabel","DEFAULT_UNIT","getParsedValue","unit","units","initialValue","parseUnit","hasUnits","length","String","trim","num","parseFloat","isNaN","unitMatch","match","undefined","toLowerCase","find","item","getValidParsedUnit","next","fallbackValue","fallbackUnit","parsedValue","parsedUnit","baseValue","baseUnit","parseA11yLabelForUnit"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { isEmpty } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x } from '@wordpress/i18n';\n\n/**\n * Units of measurements. `a11yLabel` is used by screenreaders.\n */\nexport const CSS_UNITS = [\n\t{ value: 'px', label: 'px', default: 0, a11yLabel: __( 'pixels' ) },\n\t{ value: '%', label: '%', default: 10, a11yLabel: __( 'percent' ) },\n\t{\n\t\tvalue: 'em',\n\t\tlabel: 'em',\n\t\tdefault: 0,\n\t\ta11yLabel: _x( 'ems', 'Relative to parent font size (em)' ),\n\t},\n\t{\n\t\tvalue: 'rem',\n\t\tlabel: 'rem',\n\t\tdefault: 0,\n\t\ta11yLabel: _x( 'rems', 'Relative to root font size (rem)' ),\n\t},\n\t{\n\t\tvalue: 'vw',\n\t\tlabel: 'vw',\n\t\tdefault: 10,\n\t\ta11yLabel: __( 'viewport widths' ),\n\t},\n\t{\n\t\tvalue: 'vh',\n\t\tlabel: 'vh',\n\t\tdefault: 10,\n\t\ta11yLabel: __( 'viewport heights' ),\n\t},\n];\n\nexport const DEFAULT_UNIT = CSS_UNITS[ 0 ];\n\n/**\n * Handles legacy value + unit handling.\n * This component use to manage both incoming value and units separately.\n *\n * Moving forward, ideally the value should be a string that contains both\n * the value and unit, example: '10px'\n *\n * @param {number|string} value Value\n * @param {string} unit Unit value\n * @param {Array<Object>} units Units to derive from.\n * @return {Array<number, string>} The extracted number and unit.\n */\nexport function getParsedValue( value, unit, units ) {\n\tconst initialValue = unit ? `${ value }${ unit }` : value;\n\n\treturn parseUnit( initialValue, units );\n}\n\n/**\n * Checks if units are defined.\n *\n * @param {any} units Units to check.\n * @return {boolean} Whether units are defined.\n */\nexport function hasUnits( units ) {\n\treturn ! isEmpty( units ) && units.length > 1 && units !== false;\n}\n\n/**\n * Parses a number and unit from a value.\n *\n * @param {string} initialValue Value to parse\n * @param {Array<Object>} units Units to derive from.\n * @return {Array<number, string>} The extracted number and unit.\n */\nexport function parseUnit( initialValue, units = CSS_UNITS ) {\n\tconst value = String( initialValue ).trim();\n\n\tlet num = parseFloat( value, 10 );\n\tnum = isNaN( num ) ? '' : num;\n\n\tconst unitMatch = value.match( /[\\d.\\-\\+]*\\s*(.*)/ )[ 1 ];\n\n\tlet unit = unitMatch !== undefined ? unitMatch : '';\n\tunit = unit.toLowerCase();\n\n\tif ( hasUnits( units ) ) {\n\t\tconst match = units.find( ( item ) => item.value === unit );\n\t\tunit = match?.value;\n\t} else {\n\t\tunit = DEFAULT_UNIT.value;\n\t}\n\n\treturn [ num, unit ];\n}\n\n/**\n * Parses a number and unit from a value. Validates parsed value, using fallback\n * value if invalid.\n *\n * @param {number|string} next The next value.\n * @param {Array<Object>} units Units to derive from.\n * @param {number|string} fallbackValue The fallback value.\n * @param {string} fallbackUnit The fallback value.\n * @return {Array<number, string>} The extracted number and unit.\n */\nexport function getValidParsedUnit( next, units, fallbackValue, fallbackUnit ) {\n\tconst [ parsedValue, parsedUnit ] = parseUnit( next, units );\n\tlet baseValue = parsedValue;\n\tlet baseUnit;\n\n\tif ( isNaN( parsedValue ) || parsedValue === '' ) {\n\t\tbaseValue = fallbackValue;\n\t}\n\n\tbaseUnit = parsedUnit || fallbackUnit;\n\n\t/**\n\t * If no unit is found, attempt to use the first value from the collection\n\t * of units as a default fallback.\n\t */\n\tif ( hasUnits( units ) && ! baseUnit ) {\n\t\tbaseUnit = units[ 0 ]?.value;\n\t}\n\n\treturn [ baseValue, baseUnit ];\n}\n\n/**\n * Takes a unit value and finds the matching accessibility label for the\n * unit abbreviation.\n *\n * @param {string} unit Unit value (example: px)\n * @return {string} a11y label for the unit abbreviation\n */\nexport function parseA11yLabelForUnit( unit ) {\n\tconst match = CSS_UNITS.find( ( item ) => item.value === unit );\n\treturn match?.a11yLabel ? match?.a11yLabel : match?.value;\n}\n"]}