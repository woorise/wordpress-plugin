{"version":3,"sources":["@wordpress/components/src/font-size-picker/index.js"],"names":["isNumber","isString","__","useInstanceId","textColor","useMemo","forwardRef","Button","RangeControl","CustomSelectControl","VisuallyHidden","withNextComponent","DEFAULT_FONT_SIZE","CUSTOM_FONT_SIZE","MAX_FONT_SIZE_DISPLAY","getSelectValueFromFontSize","fontSizes","value","fontSizeValue","find","font","size","slug","getSelectOptions","optionsArray","disableCustomFontSizes","length","name","map","option","key","style","fontSize","FontSizePicker","ref","fallbackFontSize","onChange","withSlider","hasUnits","noUnitsValue","parseInt","isPixelValue","endsWith","instanceId","options","selectedFontSizeSlug","fontSizePickerNumberId","selectedItem","Number","event","target","undefined","newValue"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { isNumber, isString } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useInstanceId } from '@wordpress/compose';\nimport { textColor } from '@wordpress/icons';\nimport { useMemo, forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport Button from '../button';\nimport RangeControl from '../range-control';\nimport CustomSelectControl from '../custom-select-control';\nimport VisuallyHidden from '../visually-hidden';\nimport { withNextComponent } from './next';\n\nconst DEFAULT_FONT_SIZE = 'default';\nconst CUSTOM_FONT_SIZE = 'custom';\nconst MAX_FONT_SIZE_DISPLAY = '25px';\n\nfunction getSelectValueFromFontSize( fontSizes, value ) {\n\tif ( value ) {\n\t\tconst fontSizeValue = fontSizes.find( ( font ) => font.size === value );\n\t\treturn fontSizeValue ? fontSizeValue.slug : CUSTOM_FONT_SIZE;\n\t}\n\treturn DEFAULT_FONT_SIZE;\n}\n\nfunction getSelectOptions( optionsArray, disableCustomFontSizes ) {\n\tif ( disableCustomFontSizes && ! optionsArray.length ) {\n\t\treturn null;\n\t}\n\toptionsArray = [\n\t\t{ slug: DEFAULT_FONT_SIZE, name: __( 'Default' ) },\n\t\t...optionsArray,\n\t\t...( disableCustomFontSizes\n\t\t\t? []\n\t\t\t: [ { slug: CUSTOM_FONT_SIZE, name: __( 'Custom' ) } ] ),\n\t];\n\treturn optionsArray.map( ( option ) => ( {\n\t\tkey: option.slug,\n\t\tname: option.name,\n\t\tsize: option.size,\n\t\tstyle: {\n\t\t\tfontSize: `min( ${ option.size }, ${ MAX_FONT_SIZE_DISPLAY } )`,\n\t\t},\n\t} ) );\n}\n\nfunction FontSizePicker(\n\t{\n\t\tfallbackFontSize,\n\t\tfontSizes = [],\n\t\tdisableCustomFontSizes = false,\n\t\tonChange,\n\t\tvalue,\n\t\twithSlider = false,\n\t},\n\tref\n) {\n\tconst hasUnits =\n\t\tisString( value ) ||\n\t\t( fontSizes[ 0 ] && isString( fontSizes[ 0 ].size ) );\n\n\tlet noUnitsValue;\n\tif ( ! hasUnits ) {\n\t\tnoUnitsValue = value;\n\t} else {\n\t\tnoUnitsValue = parseInt( value );\n\t}\n\n\tconst isPixelValue =\n\t\tisNumber( value ) || ( isString( value ) && value.endsWith( 'px' ) );\n\n\tconst instanceId = useInstanceId( FontSizePicker );\n\n\tconst options = useMemo(\n\t\t() => getSelectOptions( fontSizes, disableCustomFontSizes ),\n\t\t[ fontSizes, disableCustomFontSizes ]\n\t);\n\n\tif ( ! options ) {\n\t\treturn null;\n\t}\n\n\tconst selectedFontSizeSlug = getSelectValueFromFontSize( fontSizes, value );\n\n\tconst fontSizePickerNumberId = `components-font-size-picker__number#${ instanceId }`;\n\n\treturn (\n\t\t<fieldset\n\t\t\tclassName=\"components-font-size-picker\"\n\t\t\t{ ...( ref ? {} : { ref } ) }\n\t\t>\n\t\t\t<VisuallyHidden as=\"legend\">{ __( 'Font size' ) }</VisuallyHidden>\n\t\t\t<div className=\"components-font-size-picker__controls\">\n\t\t\t\t{ fontSizes.length > 0 && (\n\t\t\t\t\t<CustomSelectControl\n\t\t\t\t\t\tclassName={ 'components-font-size-picker__select' }\n\t\t\t\t\t\tlabel={ __( 'Font size' ) }\n\t\t\t\t\t\toptions={ options }\n\t\t\t\t\t\tvalue={ options.find(\n\t\t\t\t\t\t\t( option ) => option.key === selectedFontSizeSlug\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\t\t\tif ( hasUnits ) {\n\t\t\t\t\t\t\t\tonChange( selectedItem.size );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tonChange( Number( selectedItem.size ) );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ! withSlider && ! disableCustomFontSizes && (\n\t\t\t\t\t<div className=\"components-font-size-picker__number-container\">\n\t\t\t\t\t\t<label htmlFor={ fontSizePickerNumberId }>\n\t\t\t\t\t\t\t{ __( 'Custom' ) }\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid={ fontSizePickerNumberId }\n\t\t\t\t\t\t\tclassName=\"components-font-size-picker__number\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\tonChange={ ( event ) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t! event.target.value &&\n\t\t\t\t\t\t\t\t\tevent.target.value !== 0\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tonChange( undefined );\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( hasUnits ) {\n\t\t\t\t\t\t\t\t\tonChange( event.target.value + 'px' );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tonChange( Number( event.target.value ) );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\taria-label={ __( 'Custom' ) }\n\t\t\t\t\t\t\tvalue={ ( isPixelValue && noUnitsValue ) || '' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"components-color-palette__clear\"\n\t\t\t\t\tdisabled={ value === undefined }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tonChange( undefined );\n\t\t\t\t\t} }\n\t\t\t\t\tisSmall\n\t\t\t\t\tisSecondary\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t\t{ withSlider && (\n\t\t\t\t<RangeControl\n\t\t\t\t\tclassName=\"components-font-size-picker__custom-input\"\n\t\t\t\t\tlabel={ __( 'Custom Size' ) }\n\t\t\t\t\tvalue={ ( isPixelValue && noUnitsValue ) || '' }\n\t\t\t\t\tinitialPosition={ fallbackFontSize }\n\t\t\t\t\tonChange={ ( newValue ) => {\n\t\t\t\t\t\tonChange( hasUnits ? newValue + 'px' : newValue );\n\t\t\t\t\t} }\n\t\t\t\t\tmin={ 12 }\n\t\t\t\t\tmax={ 100 }\n\t\t\t\t\tbeforeIcon={ textColor }\n\t\t\t\t\tafterIcon={ textColor }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</fieldset>\n\t);\n}\n\nexport default withNextComponent( forwardRef( FontSizePicker ) );\n"]}