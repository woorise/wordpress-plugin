{"version":3,"sources":["@wordpress/components/src/ui/popover/component.js"],"names":["contextConnect","useContextSystem","noop","useUpdateEffect","PopoverDisclosure","usePopoverState","useCallback","useMemo","cloneElement","Portal","PopoverContext","usePopoverResizeUpdater","PopoverContent","Popover","props","forwardedRef","animated","animationDuration","baseId","children","elevation","id","label","maxWidth","onVisibleChange","placement","state","trigger","visible","otherProps","_popover","undefined","popover","resizeListener","onResize","unstable_update","uniqueId","labelId","contextProps","triggerContent","triggerProps","ref"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { contextConnect, useContextSystem } from '@wp-g2/context';\nimport { noop, useUpdateEffect } from '@wp-g2/utils';\n// eslint-disable-next-line no-restricted-imports\nimport { PopoverDisclosure, usePopoverState } from 'reakit';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback, useMemo, cloneElement } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { Portal } from '../portal';\nimport { PopoverContext } from './context';\nimport { usePopoverResizeUpdater } from './utils';\nimport PopoverContent from './content';\n\n/**\n *\n * @param {import('@wp-g2/create-styles').ViewOwnProps<import('./types').Props, 'div'>} props\n * @param {import('react').Ref<any>} forwardedRef\n */\nfunction Popover( props, forwardedRef ) {\n\tconst {\n\t\tanimated = true,\n\t\tanimationDuration = 160,\n\t\tbaseId,\n\t\tchildren,\n\t\televation = 5,\n\t\tid,\n\t\tlabel,\n\t\tmaxWidth = 360,\n\t\tonVisibleChange = noop,\n\t\tplacement,\n\t\tstate,\n\t\ttrigger,\n\t\tvisible,\n\t\t...otherProps\n\t} = useContextSystem( props, 'Popover' );\n\n\tconst _popover = usePopoverState( {\n\t\tanimated: animated ? animationDuration : undefined,\n\t\tbaseId: baseId || id,\n\t\tplacement,\n\t\tvisible,\n\t\t...otherProps,\n\t} );\n\n\tconst popover = state || _popover;\n\n\tconst resizeListener = usePopoverResizeUpdater( {\n\t\tonResize: popover.unstable_update,\n\t} );\n\n\tconst uniqueId = `popover-${ popover.baseId }`;\n\tconst labelId = label || uniqueId;\n\n\tconst contextProps = useMemo(\n\t\t() => ( {\n\t\t\tlabel: labelId,\n\t\t\tpopover,\n\t\t} ),\n\t\t[ labelId, popover ]\n\t);\n\n\tconst triggerContent = useCallback(\n\t\t( triggerProps ) => {\n\t\t\treturn cloneElement( trigger, triggerProps );\n\t\t},\n\t\t[ trigger ]\n\t);\n\n\tuseUpdateEffect( () => {\n\t\tonVisibleChange( popover.visible );\n\t}, [ popover.visible ] );\n\n\treturn (\n\t\t<PopoverContext.Provider value={ contextProps }>\n\t\t\t{ trigger && (\n\t\t\t\t<PopoverDisclosure\n\t\t\t\t\t{ ...popover }\n\t\t\t\t\tref={ trigger.ref }\n\t\t\t\t\t{ ...trigger.props }\n\t\t\t\t>\n\t\t\t\t\t{ triggerContent }\n\t\t\t\t</PopoverDisclosure>\n\t\t\t) }\n\t\t\t<Portal>\n\t\t\t\t<PopoverContent\n\t\t\t\t\tref={ forwardedRef }\n\t\t\t\t\t{ ...otherProps }\n\t\t\t\t\televation={ elevation }\n\t\t\t\t\tmaxWidth={ maxWidth }\n\t\t\t\t>\n\t\t\t\t\t{ resizeListener }\n\t\t\t\t\t{ children }\n\t\t\t\t</PopoverContent>\n\t\t\t</Portal>\n\t\t</PopoverContext.Provider>\n\t);\n}\n\n/**\n * `Popover` is a component to render a floating content modal.\n * It is similar in purpose to a tooltip, but renders content of any sort,\n * not only simple text.\n *\n * @example\n * ```jsx\n * import { Button, Popover, View, Text } from `@wordpress/components/ui`;\n \n * function Example() {\n * \treturn (\n * \t\t<Popover trigger={ <Button>Popover</Button> }>\n * \t\t\t<View>\n * \t\t\t\t<Text>Code is Poetry</Text>\n * \t\t\t</View>\n * \t\t</Popover>\n * \t);\n * }\n * ```\n */\nexport default contextConnect( Popover, 'Popover' );\n"]}