{"version":3,"sources":["@wordpress/components/src/ui/flex/use-flex.js"],"names":["useContextSystem","css","cx","ui","useResponsiveValue","useMemo","styles","useFlex","props","align","className","direction","directionProp","expanded","gap","justify","wrap","otherProps","directionAsArray","Array","isArray","isColumn","includes","isReverse","classes","sx","Base","createToken","space","undefined","Items","marginTop","marginRight","marginLeft","WrapItems","marginBottom","Flex","ItemsColumn","ItemsRow"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { useContextSystem } from '@wp-g2/context';\nimport { css, cx, ui, useResponsiveValue } from '@wp-g2/styles';\n\n/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport * as styles from './styles';\n\n/**\n * @param {import('@wp-g2/create-styles').ViewOwnProps<import('./types').FlexProps, 'div'>} props\n */\nexport function useFlex( props ) {\n\tconst {\n\t\talign = 'center',\n\t\tclassName,\n\t\tdirection: directionProp = 'row',\n\t\texpanded = true,\n\t\tgap = 2,\n\t\tjustify = 'space-between',\n\t\twrap = false,\n\t\t...otherProps\n\t} = useContextSystem( props, 'Flex' );\n\n\tconst directionAsArray = Array.isArray( directionProp )\n\t\t? directionProp\n\t\t: [ directionProp ];\n\tconst direction = useResponsiveValue( directionAsArray );\n\n\tconst isColumn =\n\t\ttypeof direction === 'string' && !! direction.includes( 'column' );\n\tconst isReverse =\n\t\ttypeof direction === 'string' && direction.includes( 'reverse' );\n\n\tconst classes = useMemo( () => {\n\t\tconst sx = {};\n\n\t\tsx.Base = css( {\n\t\t\t[ ui.createToken( 'flexGap' ) ]: ui.space( gap ),\n\t\t\t[ ui.createToken( 'flexItemDisplay' ) ]: isColumn\n\t\t\t\t? 'block'\n\t\t\t\t: undefined,\n\t\t\talignItems: isColumn ? 'normal' : align,\n\t\t\tflexDirection: direction,\n\t\t\tflexWrap: wrap ? 'wrap' : undefined,\n\t\t\tjustifyContent: justify,\n\t\t\theight: isColumn && expanded ? '100%' : undefined,\n\t\t\twidth: ! isColumn && expanded ? '100%' : undefined,\n\t\t\tmarginBottom: wrap ? `calc(${ ui.space( gap ) } * -1)` : undefined,\n\t\t} );\n\n\t\tsx.Items = css( {\n\t\t\t/**\n\t\t\t * Workaround to optimize DOM rendering.\n\t\t\t * We'll enhance alignment with naive parent flex assumptions.\n\t\t\t *\n\t\t\t * Trade-off:\n\t\t\t * Far less DOM less. However, UI rendering is not as reliable.\n\t\t\t */\n\t\t\t'> * + *:not(marquee)': {\n\t\t\t\tmarginTop: isColumn ? ui.space( gap ) : undefined,\n\t\t\t\tmarginRight:\n\t\t\t\t\t! isColumn && isReverse ? ui.space( gap ) : undefined,\n\t\t\t\tmarginLeft:\n\t\t\t\t\t! isColumn && ! isReverse ? ui.space( gap ) : undefined,\n\t\t\t},\n\t\t} );\n\n\t\tsx.WrapItems = css( {\n\t\t\t'> *:not(marquee)': {\n\t\t\t\tmarginBottom: ui.space( gap ),\n\t\t\t\tmarginLeft:\n\t\t\t\t\t! isColumn && isReverse ? ui.space( gap ) : undefined,\n\t\t\t\tmarginRight:\n\t\t\t\t\t! isColumn && ! isReverse ? ui.space( gap ) : undefined,\n\t\t\t},\n\t\t\t'> *:last-child:not(marquee)': {\n\t\t\t\tmarginLeft: ! isColumn && isReverse ? 0 : undefined,\n\t\t\t\tmarginRight: ! isColumn && ! isReverse ? 0 : undefined,\n\t\t\t},\n\t\t} );\n\n\t\treturn cx(\n\t\t\tstyles.Flex,\n\t\t\tsx.Base,\n\t\t\twrap ? sx.WrapItems : sx.Items,\n\t\t\tisColumn ? styles.ItemsColumn : styles.ItemsRow,\n\t\t\tclassName\n\t\t);\n\t}, [\n\t\talign,\n\t\tclassName,\n\t\tdirection,\n\t\texpanded,\n\t\tgap,\n\t\tisColumn,\n\t\tisReverse,\n\t\tjustify,\n\t\twrap,\n\t] );\n\n\treturn { ...otherProps, className: classes };\n}\n"]}