{"version":3,"sources":["@wordpress/components/src/ui/font-size-control/use-font-size-control.js"],"names":["useContextSystem","cx","createUnitValue","is","noop","useCallback","useMemo","styles","getInputValue","getSelectOptions","getSelectValueFromFontSize","hasUnit","isCustomSelectedItem","isCustomValue","useFontSizeControl","props","disableCustomFontSizes","fontSizes","onChange","value","withSlider","className","otherProps","hasUnits","size","hasCustomValue","options","handleOnReset","undefined","handleOnChange","selectedItem","defined","Number","handleOnInputChange","next","inputValue","selectedFontSizeSlug","currentValue","find","option","key","isDefaultValue","classes","FontSizeControl","withSelect","length","withNumberInput","onInputChange","onReset"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { useContextSystem } from '@wp-g2/context';\nimport { cx } from '@wp-g2/styles';\nimport { createUnitValue, is, noop } from '@wp-g2/utils';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport * as styles from './styles';\nimport {\n\tgetInputValue,\n\tgetSelectOptions,\n\tgetSelectValueFromFontSize,\n\thasUnit,\n\tisCustomSelectedItem,\n\tisCustomValue,\n} from './utils';\n\nexport default function useFontSizeControl( props ) {\n\tconst {\n\t\tdisableCustomFontSizes,\n\t\tfontSizes = [],\n\t\tonChange = noop,\n\t\tvalue,\n\t\twithSlider = false,\n\t\tclassName,\n\t\t...otherProps\n\t} = useContextSystem( props, 'FontSizeControl' );\n\n\tconst hasUnits = hasUnit( value || fontSizes[ 0 ]?.size );\n\n\tconst hasCustomValue = isCustomValue( fontSizes, value );\n\n\tconst options = useMemo(\n\t\t() =>\n\t\t\tgetSelectOptions( {\n\t\t\t\toptions: fontSizes,\n\t\t\t\tdisableCustomFontSizes,\n\t\t\t\thasCustomValue,\n\t\t\t} ),\n\t\t[ fontSizes, disableCustomFontSizes, hasCustomValue ]\n\t);\n\n\tconst handleOnReset = useCallback( () => {\n\t\tonChange( undefined );\n\t}, [ onChange ] );\n\n\tconst handleOnChange = useCallback(\n\t\t( { selectedItem } ) => {\n\t\t\tif ( isCustomSelectedItem( selectedItem ) ) return;\n\n\t\t\tif ( hasUnits ) {\n\t\t\t\tonChange( selectedItem.size );\n\t\t\t} else if ( is.defined( selectedItem.size ) ) {\n\t\t\t\tonChange( Number( selectedItem.size ) );\n\t\t\t} else {\n\t\t\t\thandleOnReset();\n\t\t\t}\n\t\t},\n\t\t[ handleOnReset, hasUnits, onChange ]\n\t);\n\n\tconst handleOnInputChange = useCallback(\n\t\t( next ) => {\n\t\t\tif ( ! next && next !== 0 ) {\n\t\t\t\thandleOnReset();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( hasUnits ) {\n\t\t\t\tonChange( createUnitValue( next, 'px' ) );\n\t\t\t} else {\n\t\t\t\tonChange( Number( next ) );\n\t\t\t}\n\t\t},\n\t\t[ handleOnReset, hasUnits, onChange ]\n\t);\n\n\tconst inputValue = getInputValue( fontSizes, value );\n\n\tconst selectedFontSizeSlug = getSelectValueFromFontSize( fontSizes, value );\n\tconst currentValue = options.find(\n\t\t( option ) => option.key === selectedFontSizeSlug\n\t);\n\n\tconst isDefaultValue = ! is.defined( value, className );\n\n\tconst classes = cx( styles.FontSizeControl );\n\n\tconst withSelect = fontSizes.length > 0;\n\tconst withNumberInput = ! withSlider && ! disableCustomFontSizes;\n\n\treturn {\n\t\t...otherProps,\n\t\tclassName: classes,\n\t\tinputValue,\n\t\tisDefaultValue,\n\t\tonChange: handleOnChange,\n\t\tonInputChange: handleOnInputChange,\n\t\tonReset: handleOnReset,\n\t\toptions,\n\t\tvalue: currentValue,\n\t\twithNumberInput,\n\t\twithSelect,\n\t\twithSlider,\n\t};\n}\n"]}