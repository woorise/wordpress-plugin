{"version":3,"sources":["@wordpress/components/src/drop-zone/index.js"],"names":["classnames","__","useContext","useEffect","useState","useRef","upload","Icon","Context","INITIAL_DROP_ZONE_STATE","useDropZone","element","onFilesDrop","onHTMLDrop","onDrop","isDisabled","withPosition","__unstableIsRelative","isRelative","dropZones","state","setState","dropZone","add","delete","x","y","remainingState","position","DropZoneComponent","className","label","isDraggingOverDocument","isDraggingOverElement","type","children","classes"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useContext, useEffect, useState, useRef } from '@wordpress/element';\nimport { upload, Icon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { Context, INITIAL_DROP_ZONE_STATE } from './provider';\n\nexport function useDropZone( {\n\telement,\n\tonFilesDrop,\n\tonHTMLDrop,\n\tonDrop,\n\tisDisabled,\n\twithPosition,\n\t__unstableIsRelative: isRelative = false,\n} ) {\n\tconst dropZones = useContext( Context );\n\tconst [ state, setState ] = useState( INITIAL_DROP_ZONE_STATE );\n\n\tuseEffect( () => {\n\t\tif ( ! isDisabled ) {\n\t\t\tconst dropZone = {\n\t\t\t\telement,\n\t\t\t\tonDrop,\n\t\t\t\tonFilesDrop,\n\t\t\t\tonHTMLDrop,\n\t\t\t\tsetState,\n\t\t\t\twithPosition,\n\t\t\t\tisRelative,\n\t\t\t};\n\t\t\tdropZones.add( dropZone );\n\t\t\treturn () => {\n\t\t\t\tdropZones.delete( dropZone );\n\t\t\t};\n\t\t}\n\t}, [\n\t\tisDisabled,\n\t\tonDrop,\n\t\tonFilesDrop,\n\t\tonHTMLDrop,\n\t\twithPosition,\n\t\tisRelative,\n\t] );\n\n\tconst { x, y, ...remainingState } = state;\n\tlet position = null;\n\n\tif ( x !== null && y !== null ) {\n\t\tposition = { x, y };\n\t}\n\n\treturn {\n\t\t...remainingState,\n\t\tposition,\n\t};\n}\n\nexport default function DropZoneComponent( {\n\tclassName,\n\tlabel,\n\tonFilesDrop,\n\tonHTMLDrop,\n\tonDrop,\n} ) {\n\tconst element = useRef();\n\tconst { isDraggingOverDocument, isDraggingOverElement, type } = useDropZone(\n\t\t{\n\t\t\telement,\n\t\t\tonFilesDrop,\n\t\t\tonHTMLDrop,\n\t\t\tonDrop,\n\t\t\t__unstableIsRelative: true,\n\t\t}\n\t);\n\n\tlet children;\n\n\tif ( isDraggingOverElement ) {\n\t\tchildren = (\n\t\t\t<div className=\"components-drop-zone__content\">\n\t\t\t\t<Icon\n\t\t\t\t\ticon={ upload }\n\t\t\t\t\tclassName=\"components-drop-zone__content-icon\"\n\t\t\t\t/>\n\t\t\t\t<span className=\"components-drop-zone__content-text\">\n\t\t\t\t\t{ label ? label : __( 'Drop files to upload' ) }\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst classes = classnames( 'components-drop-zone', className, {\n\t\t'is-active':\n\t\t\t( isDraggingOverDocument || isDraggingOverElement ) &&\n\t\t\t( ( type === 'file' && onFilesDrop ) ||\n\t\t\t\t( type === 'html' && onHTMLDrop ) ||\n\t\t\t\t( type === 'default' && onDrop ) ),\n\t\t'is-dragging-over-document': isDraggingOverDocument,\n\t\t'is-dragging-over-element': isDraggingOverElement,\n\t\t[ `is-dragging-${ type }` ]: !! type,\n\t} );\n\n\treturn (\n\t\t<div ref={ element } className={ classes }>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n"]}