{"version":3,"sources":["@wordpress/components/src/navigation/use-create-navigation-tree.js"],"names":["useState","useNavigationTreeNodes","useCreateNavigationTree","items","nodes","getItem","getNode","addItem","addNode","removeItem","removeNode","menus","getMenu","addMenu","removeMenu","childMenu","setChildMenu","getChildMenu","menu","traverseMenu","startMenu","callback","visited","queue","current","length","shift","includes","push","isMenuEmpty","menuToCheck","isEmpty","key","value","state","newState","parentMenu"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useNavigationTreeNodes } from './use-navigation-tree-nodes';\n\nexport const useCreateNavigationTree = () => {\n\tconst {\n\t\tnodes: items,\n\t\tgetNode: getItem,\n\t\taddNode: addItem,\n\t\tremoveNode: removeItem,\n\t} = useNavigationTreeNodes();\n\n\tconst {\n\t\tnodes: menus,\n\t\tgetNode: getMenu,\n\t\taddNode: addMenu,\n\t\tremoveNode: removeMenu,\n\t} = useNavigationTreeNodes();\n\n\t/**\n\t * Stores direct nested menus of menus\n\t * This makes it easy to traverse menu tree\n\t *\n\t * Key is the menu prop of the menu\n\t * Value is an array of menu keys\n\t */\n\tconst [ childMenu, setChildMenu ] = useState( {} );\n\tconst getChildMenu = ( menu ) => childMenu[ menu ] || [];\n\n\tconst traverseMenu = ( startMenu, callback ) => {\n\t\tconst visited = [];\n\t\tlet queue = [ startMenu ];\n\t\tlet current;\n\n\t\twhile ( queue.length > 0 ) {\n\t\t\tcurrent = getMenu( queue.shift() );\n\n\t\t\tif ( ! current || visited.includes( current.menu ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvisited.push( current.menu );\n\t\t\tqueue = [ ...queue, ...getChildMenu( current.menu ) ];\n\n\t\t\tif ( callback( current ) === false ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tconst isMenuEmpty = ( menuToCheck ) => {\n\t\tlet isEmpty = true;\n\n\t\ttraverseMenu( menuToCheck, ( current ) => {\n\t\t\tif ( ! current.isEmpty ) {\n\t\t\t\tisEmpty = false;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\n\t\treturn isEmpty;\n\t};\n\n\treturn {\n\t\titems,\n\t\tgetItem,\n\t\taddItem,\n\t\tremoveItem,\n\n\t\tmenus,\n\t\tgetMenu,\n\t\taddMenu: ( key, value ) => {\n\t\t\tsetChildMenu( ( state ) => {\n\t\t\t\tconst newState = { ...state };\n\n\t\t\t\tif ( ! newState[ value.parentMenu ] ) {\n\t\t\t\t\tnewState[ value.parentMenu ] = [];\n\t\t\t\t}\n\n\t\t\t\tnewState[ value.parentMenu ].push( key );\n\n\t\t\t\treturn newState;\n\t\t\t} );\n\n\t\t\taddMenu( key, value );\n\t\t},\n\t\tremoveMenu,\n\t\tchildMenu,\n\t\ttraverseMenu,\n\t\tisMenuEmpty,\n\t};\n};\n"]}