{"version":3,"sources":["@wordpress/components/src/color-picker/index.native.js"],"names":["ColorPicker","shouldEnableBottomSheetScroll","shouldEnableBottomSheetMaxHeight","isBottomSheetContentScrolling","setColor","activeColor","isGradientColor","onNavigationBack","onHandleClosingBottomSheet","onBottomSheetClosed","onHandleHardwareButtonPress","bottomLabelText","didMount","isIOS","Platform","OS","hitSlop","top","bottom","left","right","toHsv","h","s","v","initH","initS","initV","hue","setHue","sat","setSaturation","val","setValue","savedColor","styles","picker","spacing","paddingLeft","pickerHeight","height","borderRadius","pickerPointerSize","pickerPointer","pickerWidth","BottomSheet","getWidth","applyButtonStyle","applyButton","applyButtonDark","cancelButtonStyle","cancelButton","cancelButtonDark","colorTextStyle","colorText","colorTextDark","selectColorTextStyle","selectColorText","selectColorTextDark","footerStyle","footer","footerDark","currentColor","toHexString","current","onButtonPress","onHuePickerChange","onSatValPickerChange","saturation","value","action","width","close","toUpperCase","check"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Text, TouchableWithoutFeedback, Platform } from 'react-native';\nimport HsvColorPicker from 'react-native-hsv-color-picker';\nimport tinycolor from 'tinycolor2';\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect, useRef } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { BottomSheet } from '@wordpress/components';\nimport { usePreferredColorSchemeStyle } from '@wordpress/compose';\nimport { Icon, check, close } from '@wordpress/icons';\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nfunction ColorPicker( {\n\tshouldEnableBottomSheetScroll,\n\tshouldEnableBottomSheetMaxHeight,\n\tisBottomSheetContentScrolling,\n\tsetColor,\n\tactiveColor,\n\tisGradientColor,\n\tonNavigationBack,\n\tonHandleClosingBottomSheet,\n\tonBottomSheetClosed,\n\tonHandleHardwareButtonPress,\n\tbottomLabelText,\n} ) {\n\tconst didMount = useRef( false );\n\tconst isIOS = Platform.OS === 'ios';\n\tconst hitSlop = { top: 22, bottom: 22, left: 22, right: 22 };\n\tconst { h: initH, s: initS, v: initV } =\n\t\t! isGradientColor && activeColor\n\t\t\t? tinycolor( activeColor ).toHsv()\n\t\t\t: { h: 0, s: 0.5, v: 0.5 };\n\tconst [ hue, setHue ] = useState( initH );\n\tconst [ sat, setSaturation ] = useState( initS );\n\tconst [ val, setValue ] = useState( initV );\n\tconst [ savedColor ] = useState( activeColor );\n\n\tconst {\n\t\tpaddingLeft: spacing,\n\t\theight: pickerHeight,\n\t\tborderRadius,\n\t} = styles.picker;\n\tconst { height: pickerPointerSize } = styles.pickerPointer;\n\tconst pickerWidth = BottomSheet.getWidth() - 2 * spacing;\n\n\tconst applyButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles.applyButton,\n\t\tstyles.applyButtonDark\n\t);\n\tconst cancelButtonStyle = usePreferredColorSchemeStyle(\n\t\tstyles.cancelButton,\n\t\tstyles.cancelButtonDark\n\t);\n\tconst colorTextStyle = usePreferredColorSchemeStyle(\n\t\tstyles.colorText,\n\t\tstyles.colorTextDark\n\t);\n\tconst selectColorTextStyle = usePreferredColorSchemeStyle(\n\t\tstyles.selectColorText,\n\t\tstyles.selectColorTextDark\n\t);\n\tconst footerStyle = usePreferredColorSchemeStyle(\n\t\tstyles.footer,\n\t\tstyles.footerDark\n\t);\n\n\tconst currentColor = tinycolor(\n\t\t`hsv ${ hue } ${ sat } ${ val }`\n\t).toHexString();\n\n\tuseEffect( () => {\n\t\tif ( ! didMount.current ) {\n\t\t\tdidMount.current = true;\n\t\t\treturn;\n\t\t}\n\t\tsetColor( currentColor );\n\t}, [ currentColor ] );\n\n\tuseEffect( () => {\n\t\tshouldEnableBottomSheetMaxHeight( false );\n\t\tonHandleClosingBottomSheet( () => {\n\t\t\tif ( savedColor ) {\n\t\t\t\tsetColor( savedColor );\n\t\t\t}\n\t\t\tif ( onBottomSheetClosed ) {\n\t\t\t\tonBottomSheetClosed();\n\t\t\t}\n\t\t} );\n\t\tif ( onHandleHardwareButtonPress ) {\n\t\t\tonHandleHardwareButtonPress( onButtonPress );\n\t\t}\n\t}, [] );\n\n\tfunction onHuePickerChange( { hue: h } ) {\n\t\tsetHue( h );\n\t}\n\n\tfunction onSatValPickerChange( { saturation: s, value: v } ) {\n\t\tsetSaturation( s );\n\t\tsetValue( v );\n\t}\n\n\tfunction onButtonPress( action ) {\n\t\tonNavigationBack();\n\t\tonHandleClosingBottomSheet( null );\n\t\tshouldEnableBottomSheetMaxHeight( true );\n\t\tsetColor( action === 'apply' ? currentColor : savedColor );\n\t\tif ( onBottomSheetClosed ) {\n\t\t\tonBottomSheetClosed();\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<HsvColorPicker\n\t\t\t\thuePickerHue={ hue }\n\t\t\t\tonHuePickerDragMove={ onHuePickerChange }\n\t\t\t\tonHuePickerPress={\n\t\t\t\t\t! isBottomSheetContentScrolling && onHuePickerChange\n\t\t\t\t}\n\t\t\t\tsatValPickerHue={ hue }\n\t\t\t\tsatValPickerSaturation={ sat }\n\t\t\t\tsatValPickerValue={ val }\n\t\t\t\tonSatValPickerDragMove={ onSatValPickerChange }\n\t\t\t\tonSatValPickerPress={\n\t\t\t\t\t! isBottomSheetContentScrolling && onSatValPickerChange\n\t\t\t\t}\n\t\t\t\tonSatValPickerDragStart={ () => {\n\t\t\t\t\tshouldEnableBottomSheetScroll( false );\n\t\t\t\t} }\n\t\t\t\tonSatValPickerDragEnd={ () =>\n\t\t\t\t\tshouldEnableBottomSheetScroll( true )\n\t\t\t\t}\n\t\t\t\tonHuePickerDragStart={ () =>\n\t\t\t\t\tshouldEnableBottomSheetScroll( false )\n\t\t\t\t}\n\t\t\t\tonHuePickerDragEnd={ () =>\n\t\t\t\t\tshouldEnableBottomSheetScroll( true )\n\t\t\t\t}\n\t\t\t\thuePickerBarWidth={ pickerWidth }\n\t\t\t\thuePickerBarHeight={ pickerPointerSize / 2 }\n\t\t\t\tsatValPickerSize={ {\n\t\t\t\t\twidth: pickerWidth,\n\t\t\t\t\theight: pickerHeight,\n\t\t\t\t} }\n\t\t\t\tsatValPickerSliderSize={ pickerPointerSize * 2 }\n\t\t\t\tsatValPickerBorderRadius={ borderRadius }\n\t\t\t\thuePickerBorderRadius={ borderRadius }\n\t\t\t/>\n\t\t\t<View style={ footerStyle }>\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\tonPress={ () => onButtonPress( 'cancel' ) }\n\t\t\t\t\thitSlop={ hitSlop }\n\t\t\t\t>\n\t\t\t\t\t<View>\n\t\t\t\t\t\t{ isIOS ? (\n\t\t\t\t\t\t\t<Text style={ cancelButtonStyle }>\n\t\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ close }\n\t\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t\t\tstyle={ cancelButtonStyle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t{ bottomLabelText ? (\n\t\t\t\t\t<Text style={ selectColorTextStyle }>\n\t\t\t\t\t\t{ bottomLabelText }\n\t\t\t\t\t</Text>\n\t\t\t\t) : (\n\t\t\t\t\t<Text style={ colorTextStyle } selectable>\n\t\t\t\t\t\t{ currentColor.toUpperCase() }\n\t\t\t\t\t</Text>\n\t\t\t\t) }\n\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\tonPress={ () => onButtonPress( 'apply' ) }\n\t\t\t\t\thitSlop={ hitSlop }\n\t\t\t\t>\n\t\t\t\t\t<View>\n\t\t\t\t\t\t{ isIOS ? (\n\t\t\t\t\t\t\t<Text style={ applyButtonStyle }>\n\t\t\t\t\t\t\t\t{ __( 'Apply' ) }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ check }\n\t\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t\t\tstyle={ applyButtonStyle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</View>\n\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t</View>\n\t\t</>\n\t);\n}\n\nexport default ColorPicker;\n"]}