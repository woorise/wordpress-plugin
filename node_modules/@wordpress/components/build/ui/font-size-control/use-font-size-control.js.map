{"version":3,"sources":["@wordpress/components/src/ui/font-size-control/use-font-size-control.js"],"names":["useFontSizeControl","props","disableCustomFontSizes","fontSizes","onChange","noop","value","withSlider","className","otherProps","hasUnits","size","hasCustomValue","options","handleOnReset","undefined","handleOnChange","selectedItem","is","defined","Number","handleOnInputChange","next","inputValue","selectedFontSizeSlug","currentValue","find","option","key","isDefaultValue","classes","styles","FontSizeControl","withSelect","length","withNumberInput","onInputChange","onReset"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { useContextSystem } from '@wp-g2/context';\nimport { cx } from '@wp-g2/styles';\nimport { createUnitValue, is, noop } from '@wp-g2/utils';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback, useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport * as styles from './styles';\nimport {\n\tgetInputValue,\n\tgetSelectOptions,\n\tgetSelectValueFromFontSize,\n\thasUnit,\n\tisCustomSelectedItem,\n\tisCustomValue,\n} from './utils';\n\nexport default function useFontSizeControl( props ) {\n\tconst {\n\t\tdisableCustomFontSizes,\n\t\tfontSizes = [],\n\t\tonChange = noop,\n\t\tvalue,\n\t\twithSlider = false,\n\t\tclassName,\n\t\t...otherProps\n\t} = useContextSystem( props, 'FontSizeControl' );\n\n\tconst hasUnits = hasUnit( value || fontSizes[ 0 ]?.size );\n\n\tconst hasCustomValue = isCustomValue( fontSizes, value );\n\n\tconst options = useMemo(\n\t\t() =>\n\t\t\tgetSelectOptions( {\n\t\t\t\toptions: fontSizes,\n\t\t\t\tdisableCustomFontSizes,\n\t\t\t\thasCustomValue,\n\t\t\t} ),\n\t\t[ fontSizes, disableCustomFontSizes, hasCustomValue ]\n\t);\n\n\tconst handleOnReset = useCallback( () => {\n\t\tonChange( undefined );\n\t}, [ onChange ] );\n\n\tconst handleOnChange = useCallback(\n\t\t( { selectedItem } ) => {\n\t\t\tif ( isCustomSelectedItem( selectedItem ) ) return;\n\n\t\t\tif ( hasUnits ) {\n\t\t\t\tonChange( selectedItem.size );\n\t\t\t} else if ( is.defined( selectedItem.size ) ) {\n\t\t\t\tonChange( Number( selectedItem.size ) );\n\t\t\t} else {\n\t\t\t\thandleOnReset();\n\t\t\t}\n\t\t},\n\t\t[ handleOnReset, hasUnits, onChange ]\n\t);\n\n\tconst handleOnInputChange = useCallback(\n\t\t( next ) => {\n\t\t\tif ( ! next && next !== 0 ) {\n\t\t\t\thandleOnReset();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( hasUnits ) {\n\t\t\t\tonChange( createUnitValue( next, 'px' ) );\n\t\t\t} else {\n\t\t\t\tonChange( Number( next ) );\n\t\t\t}\n\t\t},\n\t\t[ handleOnReset, hasUnits, onChange ]\n\t);\n\n\tconst inputValue = getInputValue( fontSizes, value );\n\n\tconst selectedFontSizeSlug = getSelectValueFromFontSize( fontSizes, value );\n\tconst currentValue = options.find(\n\t\t( option ) => option.key === selectedFontSizeSlug\n\t);\n\n\tconst isDefaultValue = ! is.defined( value, className );\n\n\tconst classes = cx( styles.FontSizeControl );\n\n\tconst withSelect = fontSizes.length > 0;\n\tconst withNumberInput = ! withSlider && ! disableCustomFontSizes;\n\n\treturn {\n\t\t...otherProps,\n\t\tclassName: classes,\n\t\tinputValue,\n\t\tisDefaultValue,\n\t\tonChange: handleOnChange,\n\t\tonInputChange: handleOnInputChange,\n\t\tonReset: handleOnReset,\n\t\toptions,\n\t\tvalue: currentValue,\n\t\twithNumberInput,\n\t\twithSelect,\n\t\twithSlider,\n\t};\n}\n"]}