{"version":3,"sources":["@wordpress/components/src/scroll-lock/index.js"],"names":["createScrollLockComponent","htmlDocument","className","document","lockCounter","previousScrollTop","setLocked","locked","scrollingElement","body","scrollTop","methodName","classList","documentElement","requestLock","releaseLock","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;AAGA;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,yBAAT,GAGE;AAAA,iFAAL,EAAK;AAAA,MAFRC,YAEQ,QAFRA,YAEQ;AAAA,4BADRC,SACQ;AAAA,MADRA,SACQ,+BADI,YACJ;;AACR,MAAK,CAAED,YAAF,IAAkB,OAAOE,QAAP,KAAoB,WAA3C,EAAyD;AACxDF,IAAAA,YAAY,GAAGE,QAAf;AACA;;AAED,MAAIC,WAAW,GAAG,CAAlB;AAEA;AACD;AACA;AACA;AACA;AACA;AACA;;AACC,MAAIC,iBAAiB,GAAG,CAAxB;AAEA;AACD;AACA;AACA;AACA;;AACC,WAASC,SAAT,CAAoBC,MAApB,EAA6B;AAC5B,QAAMC,gBAAgB,GACrBP,YAAY,CAACO,gBAAb,IAAiCP,YAAY,CAACQ,IAD/C;;AAGA,QAAKF,MAAL,EAAc;AACbF,MAAAA,iBAAiB,GAAGG,gBAAgB,CAACE,SAArC;AACA;;AAED,QAAMC,UAAU,GAAGJ,MAAM,GAAG,KAAH,GAAW,QAApC;AACAC,IAAAA,gBAAgB,CAACI,SAAjB,CAA4BD,UAA5B,EAA0CT,SAA1C,EAT4B,CAW5B;;AACAD,IAAAA,YAAY,CAACY,eAAb,CAA6BD,SAA7B,CAAwCD,UAAxC,EAAsDT,SAAtD;;AAEA,QAAK,CAAEK,MAAP,EAAgB;AACfC,MAAAA,gBAAgB,CAACE,SAAjB,GAA6BL,iBAA7B;AACA;AACD;AAED;AACD;AACA;AACA;AACA;AACA;AACA;;;AACC,WAASS,WAAT,GAAuB;AACtB,QAAKV,WAAW,KAAK,CAArB,EAAyB;AACxBE,MAAAA,SAAS,CAAE,IAAF,CAAT;AACA;;AAED,MAAEF,WAAF;AACA;AAED;AACD;AACA;AACA;AACA;AACA;;;AACC,WAASW,WAAT,GAAuB;AACtB,QAAKX,WAAW,KAAK,CAArB,EAAyB;AACxBE,MAAAA,SAAS,CAAE,KAAF,CAAT;AACA;;AAED,MAAEF,WAAF;AACA;;AAED;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AACC;AACF;AACA;AACE,mCAAoB;AACnBU,QAAAA,WAAW;AACX;AACD;AACF;AACA;;AATC;AAAA;AAAA,aAUC,gCAAuB;AACtBC,QAAAA,WAAW;AACX;AAED;AACF;AACA;AACA;AACA;;AAlBC;AAAA;AAAA,aAmBC,kBAAS;AACR,eAAO,IAAP;AACA;AArBF;AAAA;AAAA,IAAgCC,kBAAhC;AAuBA;;eAEchB,yBAAyB,E","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Creates a ScrollLock component bound to the specified document.\n *\n * This function creates a ScrollLock component for the specified document\n * and is exposed so we can create an isolated component for unit testing.\n *\n * @param {Object} args Keyword args.\n * @param {HTMLDocument} args.htmlDocument The document to lock the scroll for.\n * @param {string} args.className The name of the class used to lock scrolling.\n * @return {WPComponent} The bound ScrollLock component.\n */\nexport function createScrollLockComponent( {\n\thtmlDocument,\n\tclassName = 'lockscroll',\n} = {} ) {\n\tif ( ! htmlDocument && typeof document !== 'undefined' ) {\n\t\thtmlDocument = document;\n\t}\n\n\tlet lockCounter = 0;\n\n\t/*\n\t * Setting `overflow: hidden` on html and body elements resets body scroll in iOS.\n\t * Save scroll top so we can restore it after locking scroll.\n\t *\n\t * NOTE: It would be cleaner and possibly safer to find a localized solution such\n\t * as preventing default on certain touchmove events.\n\t */\n\tlet previousScrollTop = 0;\n\n\t/**\n\t * Locks and unlocks scroll depending on the boolean argument.\n\t *\n\t * @param {boolean} locked Whether or not scroll should be locked.\n\t */\n\tfunction setLocked( locked ) {\n\t\tconst scrollingElement =\n\t\t\thtmlDocument.scrollingElement || htmlDocument.body;\n\n\t\tif ( locked ) {\n\t\t\tpreviousScrollTop = scrollingElement.scrollTop;\n\t\t}\n\n\t\tconst methodName = locked ? 'add' : 'remove';\n\t\tscrollingElement.classList[ methodName ]( className );\n\n\t\t// Adding the class to the document element seems to be necessary in iOS.\n\t\thtmlDocument.documentElement.classList[ methodName ]( className );\n\n\t\tif ( ! locked ) {\n\t\t\tscrollingElement.scrollTop = previousScrollTop;\n\t\t}\n\t}\n\n\t/**\n\t * Requests scroll lock.\n\t *\n\t * This function tracks requests for scroll lock. It locks scroll on the first\n\t * request and counts each request so `releaseLock` can unlock scroll when\n\t * all requests have been released.\n\t */\n\tfunction requestLock() {\n\t\tif ( lockCounter === 0 ) {\n\t\t\tsetLocked( true );\n\t\t}\n\n\t\t++lockCounter;\n\t}\n\n\t/**\n\t * Releases a request for scroll lock.\n\t *\n\t * This function tracks released requests for scroll lock. When all requests\n\t * have been released, it unlocks scroll.\n\t */\n\tfunction releaseLock() {\n\t\tif ( lockCounter === 1 ) {\n\t\t\tsetLocked( false );\n\t\t}\n\n\t\t--lockCounter;\n\t}\n\n\treturn class ScrollLock extends Component {\n\t\t/**\n\t\t * Requests scroll lock on mount.\n\t\t */\n\t\tcomponentDidMount() {\n\t\t\trequestLock();\n\t\t}\n\t\t/**\n\t\t * Releases scroll lock before unmount.\n\t\t */\n\t\tcomponentWillUnmount() {\n\t\t\treleaseLock();\n\t\t}\n\n\t\t/**\n\t\t * Render nothing as this component is merely a way to declare scroll lock.\n\t\t *\n\t\t * @return {null} Render nothing by returning `null`.\n\t\t */\n\t\trender() {\n\t\t\treturn null;\n\t\t}\n\t};\n}\n\nexport default createScrollLockComponent();\n"]}