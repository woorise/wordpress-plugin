{"version":3,"sources":["@wordpress/components/src/mobile/media-edit/index.native.js"],"names":["MEDIA_TYPE_IMAGE","MEDIA_EDITOR","editOption","id","value","label","requiresModal","types","replaceOption","mediaSources","deviceLibrary","MediaEdit","props","onPickerPresent","bind","onPickerSelect","getMediaOptionsItems","getDestructiveButtonIndex","pickerOptions","openReplaceMediaOptions","source","uri","options","destructiveButtonIndex","findIndex","option","destructiveButton","undefined","picker","presentPicker","onSelect","multiple","media","optionSelected","find","onPress","mediaOptions","instance","render","open","Component"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { compact } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Picker } from '@wordpress/components';\nimport {\n\trequestMediaEditor,\n\tmediaSources,\n} from '@wordpress/react-native-bridge';\n\nexport const MEDIA_TYPE_IMAGE = 'image';\n\nexport const MEDIA_EDITOR = 'MEDIA_EDITOR';\n\nconst editOption = {\n\tid: MEDIA_EDITOR,\n\tvalue: MEDIA_EDITOR,\n\tlabel: __( 'Edit' ),\n\trequiresModal: true,\n\ttypes: [ MEDIA_TYPE_IMAGE ],\n};\n\nconst replaceOption = {\n\tid: mediaSources.deviceLibrary,\n\tvalue: mediaSources.deviceLibrary,\n\tlabel: __( 'Replace' ),\n\ttypes: [ MEDIA_TYPE_IMAGE ],\n};\n\nexport class MediaEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.onPickerPresent = this.onPickerPresent.bind( this );\n\t\tthis.onPickerSelect = this.onPickerSelect.bind( this );\n\t\tthis.getMediaOptionsItems = this.getMediaOptionsItems.bind( this );\n\t\tthis.getDestructiveButtonIndex = this.getDestructiveButtonIndex.bind(\n\t\t\tthis\n\t\t);\n\t}\n\n\tgetMediaOptionsItems() {\n\t\tconst { pickerOptions, openReplaceMediaOptions, source } = this.props;\n\n\t\treturn compact( [\n\t\t\tsource?.uri && editOption,\n\t\t\topenReplaceMediaOptions && replaceOption,\n\t\t\t...( pickerOptions ? pickerOptions : [] ),\n\t\t] );\n\t}\n\n\tgetDestructiveButtonIndex() {\n\t\tconst options = this.getMediaOptionsItems();\n\t\tconst destructiveButtonIndex = options.findIndex(\n\t\t\t( option ) => option?.destructiveButton\n\t\t);\n\n\t\treturn destructiveButtonIndex !== -1\n\t\t\t? destructiveButtonIndex + 1\n\t\t\t: undefined;\n\t}\n\n\tonPickerPresent() {\n\t\tif ( this.picker ) {\n\t\t\tthis.picker.presentPicker();\n\t\t}\n\t}\n\n\tonPickerSelect( value ) {\n\t\tconst {\n\t\t\tonSelect,\n\t\t\tpickerOptions,\n\t\t\tmultiple = false,\n\t\t\topenReplaceMediaOptions,\n\t\t} = this.props;\n\n\t\tswitch ( value ) {\n\t\t\tcase MEDIA_EDITOR:\n\t\t\t\trequestMediaEditor( this.props.source.uri, ( media ) => {\n\t\t\t\t\tif ( ( multiple && media ) || ( media && media.id ) ) {\n\t\t\t\t\t\tonSelect( media );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconst optionSelected =\n\t\t\t\t\tpickerOptions &&\n\t\t\t\t\tpickerOptions.find( ( option ) => option.id === value );\n\n\t\t\t\tif ( optionSelected && optionSelected.onPress ) {\n\t\t\t\t\toptionSelected.onPress();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( openReplaceMediaOptions ) {\n\t\t\t\t\topenReplaceMediaOptions();\n\t\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\tconst mediaOptions = () => (\n\t\t\t<Picker\n\t\t\t\thideCancelButton\n\t\t\t\tref={ ( instance ) => ( this.picker = instance ) }\n\t\t\t\toptions={ this.getMediaOptionsItems() }\n\t\t\t\tleftAlign={ true }\n\t\t\t\tonChange={ this.onPickerSelect }\n\t\t\t\t// translators: %s: block title e.g: \"Paragraph\".\n\t\t\t\ttitle={ __( 'Media options' ) }\n\t\t\t\tdestructiveButtonIndex={ this.getDestructiveButtonIndex() }\n\t\t\t/>\n\t\t);\n\n\t\treturn this.props.render( {\n\t\t\topen: this.onPickerPresent,\n\t\t\tmediaOptions,\n\t\t} );\n\t}\n}\n\nexport default MediaEdit;\n"]}