{"version":3,"sources":["@wordpress/components/src/higher-order/with-notices/index.js"],"names":["OriginalComponent","Component","props","ref","noticeList","setNoticeList","noticeOperations","createNotice","notice","noticeToAdd","id","current","createErrorNotice","msg","status","content","removeNotice","filter","removeAllNotices","propsOut","noticeUI","length","isForwardRef","render"],"mappings":";;;;;;;;;AAQA;;;;;;;;;;AALA;;AAMA;;AAKA;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;eACe,yCAA4B,UAAEA,iBAAF,EAAyB;AACnE,WAASC,SAAT,CAAoBC,KAApB,EAA2BC,GAA3B,EAAiC;AAAA,oBACM,uBAAU,EAAV,CADN;AAAA;AAAA,QACxBC,UADwB;AAAA,QACZC,aADY;;AAGhC,QAAMC,gBAAgB,GAAG,sBAAS,YAAM;AACvC;AACH;AACA;AACA;AACA;AACG,UAAMC,YAAY,GAAG,SAAfA,YAAe,CAAEC,MAAF,EAAc;AAClC,YAAMC,WAAW,GAAGD,MAAM,CAACE,EAAP,GACjBF,MADiB,mCAEZA,MAFY;AAEJE,UAAAA,EAAE,EAAE;AAFA,UAApB;AAGAL,QAAAA,aAAa,CAAE,UAAEM,OAAF;AAAA,4DAAoBA,OAApB,IAA6BF,WAA7B;AAAA,SAAF,CAAb;AACA,OALD;;AAOA,aAAO;AACNF,QAAAA,YAAY,EAAZA,YADM;;AAGN;AACJ;AACA;AACA;AACA;AACIK,QAAAA,iBAAiB,EAAE,2BAAEC,GAAF,EAAW;AAC7BN,UAAAA,YAAY,CAAE;AACbO,YAAAA,MAAM,EAAE,OADK;AAEbC,YAAAA,OAAO,EAAEF;AAFI,WAAF,CAAZ;AAIA,SAbK;;AAeN;AACJ;AACA;AACA;AACA;AACIG,QAAAA,YAAY,EAAE,sBAAEN,EAAF,EAAU;AACvBL,UAAAA,aAAa,CAAE,UAAEM,OAAF;AAAA,mBACdA,OAAO,CAACM,MAAR,CAAgB,UAAET,MAAF;AAAA,qBAAcA,MAAM,CAACE,EAAP,KAAcA,EAA5B;AAAA,aAAhB,CADc;AAAA,WAAF,CAAb;AAGA,SAxBK;;AA0BN;AACJ;AACA;AACIQ,QAAAA,gBAAgB,EAAE,4BAAM;AACvBb,UAAAA,aAAa,CAAE,EAAF,CAAb;AACA;AA/BK,OAAP;AAiCA,KA9CwB,EA8CtB,EA9CsB,CAAzB;;AAgDA,QAAMc,QAAQ,mCACVjB,KADU;AAEbE,MAAAA,UAAU,EAAVA,UAFa;AAGbE,MAAAA,gBAAgB,EAAhBA,gBAHa;AAIbc,MAAAA,QAAQ,EAAEhB,UAAU,CAACiB,MAAX,GAAoB,CAApB,IACT,4BAAC,aAAD;AACC,QAAA,SAAS,EAAC,4BADX;AAEC,QAAA,OAAO,EAAGjB,UAFX;AAGC,QAAA,QAAQ,EAAGE,gBAAgB,CAACU;AAH7B;AALY,MAAd;;AAaA,WAAOM,YAAY,GAClB,4BAAC,iBAAD,6BAAwBH,QAAxB;AAAmC,MAAA,GAAG,EAAGhB;AAAzC,OADkB,GAGlB,4BAAC,iBAAD,EAAwBgB,QAAxB,CAHD;AAKA;;AAED,MAAIG,YAAJ;AAxEmE,MAyE3DC,MAzE2D,GAyEhDvB,iBAzEgD,CAyE3DuB,MAzE2D,EA0EnE;;AACA,MAAK,OAAOA,MAAP,KAAkB,UAAvB,EAAoC;AACnCD,IAAAA,YAAY,GAAG,IAAf;AACA,WAAO,yBAAYrB,SAAZ,CAAP;AACA;;AACD,SAAOA,SAAP;AACA,CAhFc,C","sourcesContent":["/**\n * External dependencies\n */\nimport { v4 as uuid } from 'uuid';\n\n/**\n * WordPress dependencies\n */\nimport { forwardRef, useState, useMemo } from '@wordpress/element';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport NoticeList from '../../notice/list';\n\n/**\n * Override the default edit UI to include notices if supported.\n *\n * @param  {WPComponent} OriginalComponent Original component.\n *\n * @return {WPComponent} Wrapped component.\n */\nexport default createHigherOrderComponent( ( OriginalComponent ) => {\n\tfunction Component( props, ref ) {\n\t\tconst [ noticeList, setNoticeList ] = useState( [] );\n\n\t\tconst noticeOperations = useMemo( () => {\n\t\t\t/**\n\t\t\t * Function passed down as a prop that adds a new notice.\n\t\t\t *\n\t\t\t * @param {Object} notice  Notice to add.\n\t\t\t */\n\t\t\tconst createNotice = ( notice ) => {\n\t\t\t\tconst noticeToAdd = notice.id\n\t\t\t\t\t? notice\n\t\t\t\t\t: { ...notice, id: uuid() };\n\t\t\t\tsetNoticeList( ( current ) => [ ...current, noticeToAdd ] );\n\t\t\t};\n\n\t\t\treturn {\n\t\t\t\tcreateNotice,\n\n\t\t\t\t/**\n\t\t\t\t * Function passed as a prop that adds a new error notice.\n\t\t\t\t *\n\t\t\t\t * @param {string} msg  Error message of the notice.\n\t\t\t\t */\n\t\t\t\tcreateErrorNotice: ( msg ) => {\n\t\t\t\t\tcreateNotice( {\n\t\t\t\t\t\tstatus: 'error',\n\t\t\t\t\t\tcontent: msg,\n\t\t\t\t\t} );\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t * Removes a notice by id.\n\t\t\t\t *\n\t\t\t\t * @param {string} id  Id of the notice to remove.\n\t\t\t\t */\n\t\t\t\tremoveNotice: ( id ) => {\n\t\t\t\t\tsetNoticeList( ( current ) =>\n\t\t\t\t\t\tcurrent.filter( ( notice ) => notice.id !== id )\n\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\t/**\n\t\t\t\t * Removes all notices\n\t\t\t\t */\n\t\t\t\tremoveAllNotices: () => {\n\t\t\t\t\tsetNoticeList( [] );\n\t\t\t\t},\n\t\t\t};\n\t\t}, [] );\n\n\t\tconst propsOut = {\n\t\t\t...props,\n\t\t\tnoticeList,\n\t\t\tnoticeOperations,\n\t\t\tnoticeUI: noticeList.length > 0 && (\n\t\t\t\t<NoticeList\n\t\t\t\t\tclassName=\"components-with-notices-ui\"\n\t\t\t\t\tnotices={ noticeList }\n\t\t\t\t\tonRemove={ noticeOperations.removeNotice }\n\t\t\t\t/>\n\t\t\t),\n\t\t};\n\n\t\treturn isForwardRef ? (\n\t\t\t<OriginalComponent { ...propsOut } ref={ ref } />\n\t\t) : (\n\t\t\t<OriginalComponent { ...propsOut } />\n\t\t);\n\t}\n\n\tlet isForwardRef;\n\tconst { render } = OriginalComponent;\n\t// Returns a forwardRef if OriginalComponent appears to be a forwardRef\n\tif ( typeof render === 'function' ) {\n\t\tisForwardRef = true;\n\t\treturn forwardRef( Component );\n\t}\n\treturn Component;\n} );\n"]}