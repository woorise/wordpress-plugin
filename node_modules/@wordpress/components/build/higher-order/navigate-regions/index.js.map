{"version":3,"sources":["@wordpress/components/src/higher-order/navigate-regions/index.js"],"names":["defaultShortcuts","previous","rawShortcut","access","next","useNavigateRegions","ref","shortcuts","isFocusingRegions","setIsFocusingRegions","focusRegion","offset","regions","Array","from","current","querySelectorAll","length","nextRegion","selectedIndex","indexOf","ownerDocument","activeElement","nextIndex","focus","focusPrevious","focusNext","bindGlobal","onClick","addEventListener","removeEventListener","Component","props","className"],"mappings":";;;;;;;;;;AAGA;;;;;;AACA;;AAIA;;AARA;AACA;AACA;AAQA,IAAMA,gBAAgB,GAAG;AACxBC,EAAAA,QAAQ,EAAE,CAAE,cAAF,EAAkBC,sBAAYC,MAAZ,CAAoB,GAApB,CAAlB,CADc;AAExBC,EAAAA,IAAI,EAAE,CAAE,QAAF,EAAYF,sBAAYC,MAAZ,CAAoB,GAApB,CAAZ;AAFkB,CAAzB;;AAKO,SAASE,kBAAT,CAA6BC,GAA7B,EAAiE;AAAA,MAA/BC,SAA+B,uEAAnBP,gBAAmB;;AAAA,kBACnB,uBAAU,KAAV,CADmB;AAAA;AAAA,MAC/DQ,iBAD+D;AAAA,MAC5CC,oBAD4C;;AAGvE,WAASC,WAAT,CAAsBC,MAAtB,EAA+B;AAC9B,QAAMC,OAAO,GAAGC,KAAK,CAACC,IAAN,CACfR,GAAG,CAACS,OAAJ,CAAYC,gBAAZ,CAA8B,iBAA9B,CADe,CAAhB;;AAGA,QAAK,CAAEJ,OAAO,CAACK,MAAf,EAAwB;AACvB;AACA;;AACD,QAAIC,UAAU,GAAGN,OAAO,CAAE,CAAF,CAAxB;AACA,QAAMO,aAAa,GAAGP,OAAO,CAACQ,OAAR,CACrBd,GAAG,CAACS,OAAJ,CAAYM,aAAZ,CAA0BC,aADL,CAAtB;;AAGA,QAAKH,aAAa,KAAK,CAAC,CAAxB,EAA4B;AAC3B,UAAII,SAAS,GAAGJ,aAAa,GAAGR,MAAhC;AACAY,MAAAA,SAAS,GAAGA,SAAS,KAAK,CAAC,CAAf,GAAmBX,OAAO,CAACK,MAAR,GAAiB,CAApC,GAAwCM,SAApD;AACAA,MAAAA,SAAS,GAAGA,SAAS,KAAKX,OAAO,CAACK,MAAtB,GAA+B,CAA/B,GAAmCM,SAA/C;AACAL,MAAAA,UAAU,GAAGN,OAAO,CAAEW,SAAF,CAApB;AACA;;AAEDL,IAAAA,UAAU,CAACM,KAAX;AACAf,IAAAA,oBAAoB,CAAE,IAAF,CAApB;AACA;;AACD,MAAMgB,aAAa,GAAG,0BAAa;AAAA,WAAMf,WAAW,CAAE,CAAC,CAAH,CAAjB;AAAA,GAAb,EAAsC,EAAtC,CAAtB;AACA,MAAMgB,SAAS,GAAG,0BAAa;AAAA,WAAMhB,WAAW,CAAE,CAAF,CAAjB;AAAA,GAAb,EAAqC,EAArC,CAAlB;AAEA,oCAAqBH,SAAS,CAACN,QAA/B,EAAyCwB,aAAzC,EAAwD;AACvDE,IAAAA,UAAU,EAAE;AAD2C,GAAxD;AAGA,oCAAqBpB,SAAS,CAACH,IAA/B,EAAqCsB,SAArC,EAAgD;AAAEC,IAAAA,UAAU,EAAE;AAAd,GAAhD;AAEA,0BAAW,YAAM;AAChB,aAASC,OAAT,GAAmB;AAClBnB,MAAAA,oBAAoB,CAAE,KAAF,CAApB;AACA;;AAEDH,IAAAA,GAAG,CAACS,OAAJ,CAAYc,gBAAZ,CAA8B,OAA9B,EAAuCD,OAAvC;AAEA,WAAO,YAAM;AACZtB,MAAAA,GAAG,CAACS,OAAJ,CAAYe,mBAAZ,CAAiC,OAAjC,EAA0CF,OAA1C;AACA,KAFD;AAGA,GAVD,EAUG,CAAEnB,oBAAF,CAVH;;AAYA,MAAK,CAAED,iBAAP,EAA2B;AAC1B;AACA;;AAED,SAAO,qBAAP;AACA;;eAEc,yCACd,UAAEuB,SAAF;AAAA,SAAiB,gBAA+B;AAAA,QAA3BxB,SAA2B,QAA3BA,SAA2B;AAAA,QAAbyB,KAAa;AAC/C,QAAM1B,GAAG,GAAG,sBAAZ;AACA,QAAM2B,SAAS,GAAG5B,kBAAkB,CAAEC,GAAF,EAAOC,SAAP,CAApC;AACA,WACC;AAAK,MAAA,GAAG,EAAGD,GAAX;AAAiB,MAAA,SAAS,EAAG2B;AAA7B,OACC,4BAAC,SAAD,EAAgBD,KAAhB,CADD,CADD;AAKA,GARD;AAAA,CADc,EAUd,iBAVc,C","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useCallback, useState, useRef, useEffect } from '@wordpress/element';\nimport {\n\tcreateHigherOrderComponent,\n\tuseKeyboardShortcut,\n} from '@wordpress/compose';\nimport { rawShortcut } from '@wordpress/keycodes';\n\nconst defaultShortcuts = {\n\tprevious: [ 'ctrl+shift+`', rawShortcut.access( 'p' ) ],\n\tnext: [ 'ctrl+`', rawShortcut.access( 'n' ) ],\n};\n\nexport function useNavigateRegions( ref, shortcuts = defaultShortcuts ) {\n\tconst [ isFocusingRegions, setIsFocusingRegions ] = useState( false );\n\n\tfunction focusRegion( offset ) {\n\t\tconst regions = Array.from(\n\t\t\tref.current.querySelectorAll( '[role=\"region\"]' )\n\t\t);\n\t\tif ( ! regions.length ) {\n\t\t\treturn;\n\t\t}\n\t\tlet nextRegion = regions[ 0 ];\n\t\tconst selectedIndex = regions.indexOf(\n\t\t\tref.current.ownerDocument.activeElement\n\t\t);\n\t\tif ( selectedIndex !== -1 ) {\n\t\t\tlet nextIndex = selectedIndex + offset;\n\t\t\tnextIndex = nextIndex === -1 ? regions.length - 1 : nextIndex;\n\t\t\tnextIndex = nextIndex === regions.length ? 0 : nextIndex;\n\t\t\tnextRegion = regions[ nextIndex ];\n\t\t}\n\n\t\tnextRegion.focus();\n\t\tsetIsFocusingRegions( true );\n\t}\n\tconst focusPrevious = useCallback( () => focusRegion( -1 ), [] );\n\tconst focusNext = useCallback( () => focusRegion( 1 ), [] );\n\n\tuseKeyboardShortcut( shortcuts.previous, focusPrevious, {\n\t\tbindGlobal: true,\n\t} );\n\tuseKeyboardShortcut( shortcuts.next, focusNext, { bindGlobal: true } );\n\n\tuseEffect( () => {\n\t\tfunction onClick() {\n\t\t\tsetIsFocusingRegions( false );\n\t\t}\n\n\t\tref.current.addEventListener( 'click', onClick );\n\n\t\treturn () => {\n\t\t\tref.current.removeEventListener( 'click', onClick );\n\t\t};\n\t}, [ setIsFocusingRegions ] );\n\n\tif ( ! isFocusingRegions ) {\n\t\treturn;\n\t}\n\n\treturn 'is-focusing-regions';\n}\n\nexport default createHigherOrderComponent(\n\t( Component ) => ( { shortcuts, ...props } ) => {\n\t\tconst ref = useRef();\n\t\tconst className = useNavigateRegions( ref, shortcuts );\n\t\treturn (\n\t\t\t<div ref={ ref } className={ className }>\n\t\t\t\t<Component { ...props } />\n\t\t\t</div>\n\t\t);\n\t},\n\t'navigateRegions'\n);\n"]}