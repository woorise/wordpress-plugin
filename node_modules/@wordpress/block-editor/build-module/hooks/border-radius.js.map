{"version":3,"sources":["@wordpress/block-editor/src/hooks/border-radius.js"],"names":["getBlockSupport","RangeControl","__","useEditorFeature","BORDER_SUPPORT_KEY","cleanEmptyObject","MIN_BORDER_RADIUS_VALUE","MAX_BORDER_RADIUS_VALUE","BorderRadiusEdit","props","style","attributes","setAttributes","useIsBorderRadiusDisabled","onChange","newRadius","newStyle","border","radius","undefined","hasBorderRadiusSupport","blockType","support","blockName","name","isDisabled"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA,SAASA,eAAT,QAAgC,mBAAhC;AACA,SAASC,YAAT,QAA6B,uBAA7B;AACA,SAASC,EAAT,QAAmB,iBAAnB;AAEA;AACA;AACA;;AACA,OAAOC,gBAAP,MAA6B,kCAA7B;AACA,SAASC,kBAAT,QAAmC,UAAnC;AACA,SAASC,gBAAT,QAAiC,SAAjC;AAEA,IAAMC,uBAAuB,GAAG,CAAhC;AACA,IAAMC,uBAAuB,GAAG,EAAhC;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,gBAAT,CAA2BC,KAA3B,EAAmC;AAAA;;AAAA,MAE1BC,KAF0B,GAIrCD,KAJqC,CAExCE,UAFwC,CAE1BD,KAF0B;AAAA,MAGxCE,aAHwC,GAIrCH,KAJqC,CAGxCG,aAHwC;;AAMzC,MAAKC,yBAAyB,CAAEJ,KAAF,CAA9B,EAA0C;AACzC,WAAO,IAAP;AACA;;AAED,MAAMK,QAAQ,GAAG,SAAXA,QAAW,CAAEC,SAAF,EAAiB;AACjC,QAAIC,QAAQ,mCACRN,KADQ;AAEXO,MAAAA,MAAM,kCACFP,KADE,aACFA,KADE,uBACFA,KAAK,CAAEO,MADL;AAELC,QAAAA,MAAM,EAAEH;AAFH;AAFK,MAAZ;;AAQA,QAAKA,SAAS,KAAKI,SAAnB,EAA+B;AAC9BH,MAAAA,QAAQ,GAAGX,gBAAgB,CAAEW,QAAF,CAA3B;AACA;;AAEDJ,IAAAA,aAAa,CAAE;AAAEF,MAAAA,KAAK,EAAEM;AAAT,KAAF,CAAb;AACA,GAdD;;AAgBA,SACC,cAAC,YAAD;AACC,IAAA,KAAK,EAAGN,KAAH,aAAGA,KAAH,wCAAGA,KAAK,CAAEO,MAAV,kDAAG,cAAeC,MADxB;AAEC,IAAA,KAAK,EAAGhB,EAAE,CAAE,eAAF,CAFX;AAGC,IAAA,GAAG,EAAGI,uBAHP;AAIC,IAAA,GAAG,EAAGC,uBAJP;AAKC,IAAA,eAAe,EAAG,CALnB;AAMC,IAAA,UAAU,MANX;AAOC,IAAA,QAAQ,EAAGO;AAPZ,IADD;AAWA;AAED;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASM,sBAAT,CAAiCC,SAAjC,EAA6C;AACnD,MAAMC,OAAO,GAAGtB,eAAe,CAAEqB,SAAF,EAAajB,kBAAb,CAA/B;AACA,SAAO,CAAC,EAAI,SAASkB,OAAT,IAAoBA,OAApB,aAAoBA,OAApB,eAAoBA,OAAO,CAAEJ,MAAjC,CAAR;AACA;AAED;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASL,yBAAT,GAA+D;AAAA,iFAAL,EAAK;AAAA,MAAnBU,SAAmB,QAAzBC,IAAyB;;AACrE,MAAMC,UAAU,GAAG,CAAEtB,gBAAgB,CAAE,qBAAF,CAArC;AACA,SAAO,CAAEiB,sBAAsB,CAAEG,SAAF,CAAxB,IAAyCE,UAAhD;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { getBlockSupport } from '@wordpress/blocks';\nimport { RangeControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useEditorFeature from '../components/use-editor-feature';\nimport { BORDER_SUPPORT_KEY } from './border';\nimport { cleanEmptyObject } from './utils';\n\nconst MIN_BORDER_RADIUS_VALUE = 0;\nconst MAX_BORDER_RADIUS_VALUE = 50;\n\n/**\n * Inspector control panel containing the border radius related configuration.\n *\n * @param  {Object} props Block properties.\n * @return {WPElement}    Border radius edit element.\n */\nexport function BorderRadiusEdit( props ) {\n\tconst {\n\t\tattributes: { style },\n\t\tsetAttributes,\n\t} = props;\n\n\tif ( useIsBorderRadiusDisabled( props ) ) {\n\t\treturn null;\n\t}\n\n\tconst onChange = ( newRadius ) => {\n\t\tlet newStyle = {\n\t\t\t...style,\n\t\t\tborder: {\n\t\t\t\t...style?.border,\n\t\t\t\tradius: newRadius,\n\t\t\t},\n\t\t};\n\n\t\tif ( newRadius === undefined ) {\n\t\t\tnewStyle = cleanEmptyObject( newStyle );\n\t\t}\n\n\t\tsetAttributes( { style: newStyle } );\n\t};\n\n\treturn (\n\t\t<RangeControl\n\t\t\tvalue={ style?.border?.radius }\n\t\t\tlabel={ __( 'Border radius' ) }\n\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\n\t\t\tmax={ MAX_BORDER_RADIUS_VALUE }\n\t\t\tinitialPosition={ 0 }\n\t\t\tallowReset\n\t\t\tonChange={ onChange }\n\t\t/>\n\t);\n}\n\n/**\n * Determines if there is border radius support.\n *\n * @param  {string|Object} blockType Block name or Block Type object.\n * @return {boolean}                 Whether there is support.\n */\nexport function hasBorderRadiusSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, BORDER_SUPPORT_KEY );\n\treturn !! ( true === support || support?.radius );\n}\n\n/**\n * Custom hook that checks if border radius settings have been disabled.\n *\n * @param  {string} name The name of the block.\n * @return {boolean}                 Whether border radius setting is disabled.\n */\nexport function useIsBorderRadiusDisabled( { name: blockName } = {} ) {\n\tconst isDisabled = ! useEditorFeature( 'border.customRadius' );\n\treturn ! hasBorderRadiusSupport( blockName ) || isDisabled;\n}\n"]}