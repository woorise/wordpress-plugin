/**
 * External dependencies
 */
import { overEvery, findLast } from 'lodash';
/**
 * WordPress dependencies
 */

import { useRefEffect } from '@wordpress/compose';
import { focus, isTextField, placeCaretAtHorizontalEdge } from '@wordpress/dom';
/**
 * Given an element, returns true if the element is a tabbable text field, or
 * false otherwise.
 *
 * @param {Element} element Element to test.
 *
 * @return {boolean} Whether element is a tabbable text field.
 */

var isTabbableTextField = overEvery([isTextField, focus.tabbable.isTabbableIndex]);
export function useCanvasClickRedirect() {
  return useRefEffect(function (node) {
    function onMouseDown(event) {
      // Only handle clicks on the canvas, not the content.
      if (event.target !== node) {
        return;
      }

      var focusableNodes = focus.focusable.find(node);
      var target = findLast(focusableNodes, isTabbableTextField);

      if (!target) {
        return;
      }

      placeCaretAtHorizontalEdge(target, true);
      event.preventDefault();
    }

    node.addEventListener('mousedown', onMouseDown);
    return function () {
      node.addEventListener('mousedown', onMouseDown);
    };
  }, []);
}
//# sourceMappingURL=index.js.map