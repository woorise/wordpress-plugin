{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/search-results.native.js"],"names":["FlatList","View","TouchableHighlight","TouchableWithoutFeedback","Dimensions","useState","useEffect","BottomSheet","InserterButton","styles","MIN_COL_NUM","InserterSearchResults","items","onSelect","listProps","safeAreaBottomInset","searchFormHeight","numberOfColumns","setNumberOfColumns","itemWidth","setItemWidth","maxWidth","setMaxWidth","addEventListener","onLayout","removeEventListener","calculateItemWidth","Styles","modalItem","itemPaddingLeft","paddingLeft","itemPaddingRight","paddingRight","width","modalIconWrapper","sumLeftRightPadding","columnPadding","bottomSheetWidth","getWidth","containerTotalWidth","itemTotalWidth","columnsFitToWidth","Math","floor","numColumns","max","updatedItemWidth","rowSeparator","item","name","contentContainerStyle","paddingBottom","list"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tFlatList,\n\tView,\n\tTouchableHighlight,\n\tTouchableWithoutFeedback,\n\tDimensions,\n} from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport { BottomSheet, InserterButton } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nconst MIN_COL_NUM = 3;\n\nfunction InserterSearchResults( {\n\titems,\n\tonSelect,\n\tlistProps,\n\tsafeAreaBottomInset,\n\tsearchFormHeight = 0,\n} ) {\n\tconst [ numberOfColumns, setNumberOfColumns ] = useState( MIN_COL_NUM );\n\tconst [ itemWidth, setItemWidth ] = useState();\n\tconst [ maxWidth, setMaxWidth ] = useState();\n\n\tuseEffect( () => {\n\t\tDimensions.addEventListener( 'change', onLayout );\n\t\treturn () => {\n\t\t\tDimensions.removeEventListener( 'change', onLayout );\n\t\t};\n\t}, [] );\n\n\tfunction calculateItemWidth() {\n\t\tconst {\n\t\t\tpaddingLeft: itemPaddingLeft,\n\t\t\tpaddingRight: itemPaddingRight,\n\t\t} = InserterButton.Styles.modalItem;\n\t\tconst { width } = InserterButton.Styles.modalIconWrapper;\n\t\treturn width + itemPaddingLeft + itemPaddingRight;\n\t}\n\n\tfunction onLayout() {\n\t\tconst sumLeftRightPadding =\n\t\t\tstyles.columnPadding.paddingLeft +\n\t\t\tstyles.columnPadding.paddingRight;\n\n\t\tconst bottomSheetWidth = BottomSheet.getWidth();\n\t\tconst containerTotalWidth = bottomSheetWidth - sumLeftRightPadding;\n\t\tconst itemTotalWidth = calculateItemWidth();\n\n\t\tconst columnsFitToWidth = Math.floor(\n\t\t\tcontainerTotalWidth / itemTotalWidth\n\t\t);\n\n\t\tconst numColumns = Math.max( MIN_COL_NUM, columnsFitToWidth );\n\n\t\tsetNumberOfColumns( numColumns );\n\t\tsetMaxWidth( containerTotalWidth / numColumns );\n\n\t\tif ( columnsFitToWidth < MIN_COL_NUM ) {\n\t\t\tconst updatedItemWidth =\n\t\t\t\t( bottomSheetWidth - 2 * sumLeftRightPadding ) / MIN_COL_NUM;\n\t\t\tsetItemWidth( updatedItemWidth );\n\t\t}\n\t}\n\n\treturn (\n\t\t<TouchableHighlight accessible={ false }>\n\t\t\t<FlatList\n\t\t\t\tonLayout={ onLayout }\n\t\t\t\tkey={ `InserterUI-${ numberOfColumns }` } //re-render when numberOfColumns changes\n\t\t\t\tkeyboardShouldPersistTaps=\"always\"\n\t\t\t\tnumColumns={ numberOfColumns }\n\t\t\t\tdata={ items }\n\t\t\t\tinitialNumToRender={ 3 }\n\t\t\t\tItemSeparatorComponent={ () => (\n\t\t\t\t\t<TouchableWithoutFeedback accessible={ false }>\n\t\t\t\t\t\t<View style={ styles.rowSeparator } />\n\t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t) }\n\t\t\t\tkeyExtractor={ ( item ) => item.name }\n\t\t\t\trenderItem={ ( { item } ) => (\n\t\t\t\t\t<InserterButton\n\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\titemWidth,\n\t\t\t\t\t\t\tmaxWidth,\n\t\t\t\t\t\t\tonSelect,\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ...listProps }\n\t\t\t\tcontentContainerStyle={ [\n\t\t\t\t\t...listProps.contentContainerStyle,\n\t\t\t\t\t{\n\t\t\t\t\t\tpaddingBottom:\n\t\t\t\t\t\t\t( safeAreaBottomInset ||\n\t\t\t\t\t\t\t\tstyles.list.paddingBottom ) + searchFormHeight,\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t</TouchableHighlight>\n\t);\n}\n\nexport default InserterSearchResults;\n"]}