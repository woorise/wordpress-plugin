{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/menu.js"],"names":["useState","useCallback","useMemo","VisuallyHidden","__","useSelect","Tips","InserterSearchForm","InserterPreviewPanel","BlockTypesTab","BlockPatternsTabs","ReusableBlocksTab","InserterSearchResults","useInsertionPoint","InserterTabs","store","blockEditorStore","InserterMenu","rootClientId","clientId","isAppender","__experimentalInsertionIndex","onSelect","showInserterHelpPanel","showMostUsedBlocks","shouldFocusBlock","filterValue","setFilterValue","hoveredItem","setHoveredItem","selectedPatternCategory","setSelectedPatternCategory","insertionIndex","destinationRootClientId","onInsertBlocks","onToggleInsertionPoint","select","__experimentalGetAllowedPatterns","getSettings","showPatterns","length","hasReusableBlocks","__experimentalReusableBlocks","onInsert","blocks","meta","shouldForceFocusBlock","onInsertPattern","patternName","onHover","item","onClickPatternCategory","patternCategory","blocksTab","patternsTab","reusableBlocksTab","getCurrentTab","tab","name","value"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useCallback, useMemo } from '@wordpress/element';\nimport { VisuallyHidden } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport Tips from './tips';\nimport InserterSearchForm from './search-form';\nimport InserterPreviewPanel from './preview-panel';\nimport BlockTypesTab from './block-types-tab';\nimport BlockPatternsTabs from './block-patterns-tab';\nimport ReusableBlocksTab from './reusable-blocks-tab';\nimport InserterSearchResults from './search-results';\nimport useInsertionPoint from './hooks/use-insertion-point';\nimport InserterTabs from './tabs';\nimport { store as blockEditorStore } from '../../store';\n\nfunction InserterMenu( {\n\trootClientId,\n\tclientId,\n\tisAppender,\n\t__experimentalInsertionIndex,\n\tonSelect,\n\tshowInserterHelpPanel,\n\tshowMostUsedBlocks,\n\tshouldFocusBlock = true,\n} ) {\n\tconst [ filterValue, setFilterValue ] = useState( '' );\n\tconst [ hoveredItem, setHoveredItem ] = useState( null );\n\tconst [ selectedPatternCategory, setSelectedPatternCategory ] = useState(\n\t\tnull\n\t);\n\n\tconst [\n\t\tdestinationRootClientId,\n\t\tonInsertBlocks,\n\t\tonToggleInsertionPoint,\n\t] = useInsertionPoint( {\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\tinsertionIndex: __experimentalInsertionIndex,\n\t\tshouldFocusBlock,\n\t} );\n\tconst { showPatterns, hasReusableBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { __experimentalGetAllowedPatterns, getSettings } = select(\n\t\t\t\tblockEditorStore\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tshowPatterns:\n\t\t\t\t\t! destinationRootClientId ||\n\t\t\t\t\t!! __experimentalGetAllowedPatterns(\n\t\t\t\t\t\tdestinationRootClientId\n\t\t\t\t\t).length,\n\t\t\t\thasReusableBlocks: !! getSettings().__experimentalReusableBlocks\n\t\t\t\t\t?.length,\n\t\t\t};\n\t\t},\n\t\t[ destinationRootClientId ]\n\t);\n\n\tconst onInsert = useCallback(\n\t\t( blocks, meta, shouldForceFocusBlock ) => {\n\t\t\tonInsertBlocks( blocks, meta, shouldForceFocusBlock );\n\t\t\tonSelect();\n\t\t},\n\t\t[ onInsertBlocks, onSelect ]\n\t);\n\n\tconst onInsertPattern = useCallback(\n\t\t( blocks, patternName ) => {\n\t\t\tonInsertBlocks( blocks, { patternName } );\n\t\t\tonSelect();\n\t\t},\n\t\t[ onInsertBlocks, onSelect ]\n\t);\n\n\tconst onHover = useCallback(\n\t\t( item ) => {\n\t\t\tonToggleInsertionPoint( !! item );\n\t\t\tsetHoveredItem( item );\n\t\t},\n\t\t[ onToggleInsertionPoint, setHoveredItem ]\n\t);\n\n\tconst onClickPatternCategory = useCallback(\n\t\t( patternCategory ) => {\n\t\t\tsetSelectedPatternCategory( patternCategory );\n\t\t},\n\t\t[ setSelectedPatternCategory ]\n\t);\n\n\tconst blocksTab = useMemo(\n\t\t() => (\n\t\t\t<>\n\t\t\t\t<div className=\"block-editor-inserter__block-list\">\n\t\t\t\t\t<BlockTypesTab\n\t\t\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{ showInserterHelpPanel && (\n\t\t\t\t\t<div className=\"block-editor-inserter__tips\">\n\t\t\t\t\t\t<VisuallyHidden as=\"h2\">\n\t\t\t\t\t\t\t{ __( 'A tip for using the block editor' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t<Tips />\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</>\n\t\t),\n\t\t[\n\t\t\tdestinationRootClientId,\n\t\t\tonInsert,\n\t\t\tonHover,\n\t\t\tfilterValue,\n\t\t\tshowMostUsedBlocks,\n\t\t\tshowInserterHelpPanel,\n\t\t]\n\t);\n\n\tconst patternsTab = useMemo(\n\t\t() => (\n\t\t\t<BlockPatternsTabs\n\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\tonInsert={ onInsertPattern }\n\t\t\t\tonClickCategory={ onClickPatternCategory }\n\t\t\t\tselectedCategory={ selectedPatternCategory }\n\t\t\t/>\n\t\t),\n\t\t[\n\t\t\tdestinationRootClientId,\n\t\t\tonInsertPattern,\n\t\t\tonClickPatternCategory,\n\t\t\tselectedPatternCategory,\n\t\t]\n\t);\n\n\tconst reusableBlocksTab = useMemo(\n\t\t() => (\n\t\t\t<ReusableBlocksTab\n\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t\tonHover={ onHover }\n\t\t\t/>\n\t\t),\n\t\t[ destinationRootClientId, onInsert, onHover ]\n\t);\n\n\tconst getCurrentTab = useCallback(\n\t\t( tab ) => {\n\t\t\tif ( tab.name === 'blocks' ) {\n\t\t\t\treturn blocksTab;\n\t\t\t} else if ( tab.name === 'patterns' ) {\n\t\t\t\treturn patternsTab;\n\t\t\t}\n\t\t\treturn reusableBlocksTab;\n\t\t},\n\t\t[ blocksTab, patternsTab, reusableBlocksTab ]\n\t);\n\n\treturn (\n\t\t<div className=\"block-editor-inserter__menu\">\n\t\t\t<div className=\"block-editor-inserter__main-area\">\n\t\t\t\t{ /* the following div is necessary to fix the sticky position of the search form */ }\n\t\t\t\t<div className=\"block-editor-inserter__content\">\n\t\t\t\t\t<InserterSearchForm\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\tif ( hoveredItem ) setHoveredItem( null );\n\t\t\t\t\t\t\tsetFilterValue( value );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ filterValue }\n\t\t\t\t\t\tlabel={ __( 'Search for blocks and patterns' ) }\n\t\t\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t{ !! filterValue && (\n\t\t\t\t\t\t<InserterSearchResults\n\t\t\t\t\t\t\tfilterValue={ filterValue }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\tisAppender={ isAppender }\n\t\t\t\t\t\t\tshowBlockDirectory\n\t\t\t\t\t\t\tshouldFocusBlock={ shouldFocusBlock }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ ! filterValue && ( showPatterns || hasReusableBlocks ) && (\n\t\t\t\t\t\t<InserterTabs\n\t\t\t\t\t\t\tshowPatterns={ showPatterns }\n\t\t\t\t\t\t\tshowReusableBlocks={ hasReusableBlocks }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ getCurrentTab }\n\t\t\t\t\t\t</InserterTabs>\n\t\t\t\t\t) }\n\t\t\t\t\t{ ! filterValue &&\n\t\t\t\t\t\t! showPatterns &&\n\t\t\t\t\t\t! hasReusableBlocks &&\n\t\t\t\t\t\tblocksTab }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ showInserterHelpPanel && hoveredItem && (\n\t\t\t\t<InserterPreviewPanel item={ hoveredItem } />\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default InserterMenu;\n"]}