{"version":3,"sources":["@wordpress/block-editor/src/components/rich-text/index.js"],"names":["classnames","omit","RawHTML","Platform","useRef","useCallback","forwardRef","useDispatch","useSelect","pasteHandler","children","childrenSource","getBlockTransforms","findTransform","isUnmodifiedDefaultBlock","useInstanceId","useMergeRefs","__experimentalRichText","RichText","__unstableCreateElement","isEmpty","__unstableIsEmptyLine","isEmptyLine","insert","__unstableInsertLineSeparator","insertLineSeparator","create","replace","split","__UNSTABLE_LINE_SEPARATOR","LINE_SEPARATOR","toHTMLString","slice","deprecated","isURL","regexp","Autocomplete","useBlockEditContext","RemoveBrowserShortcuts","filePasteHandler","FormatToolbarContainer","useNativeProps","store","blockEditorStore","wrapperClasses","classes","addActiveFormats","value","activeFormats","length","index","formats","getMultilineTag","multiline","getAllowedFormats","allowedFormats","formattingControls","disableFormats","EMPTY_ARRAY","since","alternative","map","name","isShortcode","text","test","RichTextWrapper","forwardedRef","tagName","originalValue","originalOnChange","onChange","originalIsSelected","isSelected","inlineToolbar","wrapperClassName","autocompleters","onReplace","placeholder","keepPlaceholderOnFocus","withoutInteractiveFormatting","onRemove","onMerge","onSplit","onSplitAtEnd","__unstableOnSplitAtEnd","onSplitMiddle","__unstableOnSplitMiddle","identifier","preserveWhiteSpace","pastePlainText","__unstablePastePlainText","__unstableEmbedURLOnPaste","__unstableDisableFormats","disableLineBreaks","unstableOnFocus","__unstableAllowPrefixTransformations","__unstableMultilineRootTag","__unstableMobileNoFocusOnMount","deleteEnter","placeholderTextColor","textAlign","selectionColor","tagsToEliminate","rootTagsToEliminate","disableEditingMenu","fontSize","fontFamily","fontWeight","fontStyle","minWidth","maxWidth","onBlur","setRef","props","instanceId","fallbackRef","clientId","blockIsSelected","nativeProps","selector","select","isCaretWithinFormattedText","getSelectionStart","getSelectionEnd","getSettings","didAutomaticChange","__unstableGetBlockWithoutInnerBlocks","isMultiSelecting","hasMultiSelection","selectionStart","selectionEnd","undo","__experimentalUndo","undefined","attributeKey","extraProps","OS","block","shouldBlurOnUnmount","offset","disabled","__unstableMarkLastChangeAsPersistent","enterFormattedText","exitFormattedText","selectionChange","__unstableMarkAutomaticChange","multilineTag","adjustedAllowedFormats","hasFormats","adjustedValue","adjustedOnChange","Array","isArray","toHTML","newValue","fromDOM","document","childNodes","onSelectionChange","start","end","onDelete","isReverse","splitValue","record","pastedBlocks","blocks","before","after","hasPastedBlocks","lastPastedBlockIndex","isAfterOriginal","push","indexToSelect","initialPosition","onEnter","shiftKey","canSplit","transforms","filter","type","transformation","item","regExp","transform","content","canSplitAtEnd","onPaste","html","plainText","isInternal","files","pastedValue","multilineWrapperTags","HTML","mode","window","console","log","trim","valueToInsert","inputRule","valueToFormat","characterBefore","trimmedTextBefore","prefixTransforms","prefix","mergedRef","id","style","nestedIsSelected","onFocus","editableProps","TagName","editableTagName","current","listBoxId","activeId","onKeyDown","className","event","ForwardedRichTextContainer","Content","Tag","MultilineTag","defaultProps","format","RichTextShortcut","RichTextToolbarButton","__unstableRichTextInputEvent"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA,OAAOA,UAAP,MAAuB,YAAvB;AACA,SAASC,IAAT,QAAqB,QAArB;AAEA;AACA;AACA;;AACA,SACCC,OADD,EAECC,QAFD,EAGCC,MAHD,EAICC,WAJD,EAKCC,UALD,QAMO,oBANP;AAOA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,iBAAvC;AACA,SACCC,YADD,EAECC,QAAQ,IAAIC,cAFb,EAGCC,kBAHD,EAICC,aAJD,EAKCC,wBALD,QAMO,mBANP;AAOA,SAASC,aAAT,EAAwBC,YAAxB,QAA4C,oBAA5C;AACA,SACCC,sBAAsB,IAAIC,QAD3B,EAECC,uBAFD,EAGCC,OAHD,EAICC,qBAAqB,IAAIC,WAJ1B,EAKCC,MALD,EAMCC,6BAA6B,IAAIC,mBANlC,EAOCC,MAPD,EAQCC,OARD,EASCC,KATD,EAUCC,yBAAyB,IAAIC,cAV9B,EAWCC,YAXD,EAYCC,KAZD,QAaO,sBAbP;AAcA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,MAAT,QAAuB,sBAAvB;AAEA;AACA;AACA;;AACA,OAAOC,YAAP,MAAyB,iBAAzB;AACA,SAASC,mBAAT,QAAoC,eAApC;AACA,SAASC,sBAAT,QAAuC,4BAAvC;AACA,SAASC,gBAAT,QAAiC,sBAAjC;AACA,OAAOC,sBAAP,MAAmC,4BAAnC;AACA,SAASC,cAAT,QAA+B,oBAA/B;AACA,SAASC,KAAK,IAAIC,gBAAlB,QAA0C,aAA1C;AAEA,IAAMC,cAAc,GAAG,wBAAvB;AACA,IAAMC,OAAO,GAAG,kCAAhB;;AAEA,SAASC,gBAAT,CAA2BC,KAA3B,EAAkCC,aAAlC,EAAkD;AACjD,MAAKA,aAAa,CAACC,MAAnB,EAA4B;AAC3B,QAAIC,KAAK,GAAGH,KAAK,CAACI,OAAN,CAAcF,MAA1B;;AAEA,WAAQC,KAAK,EAAb,EAAkB;AACjBH,MAAAA,KAAK,CAACI,OAAN,CAAeD,KAAf,iCACIF,aADJ,sBAEMD,KAAK,CAACI,OAAN,CAAeD,KAAf,KAA0B,EAFhC;AAIA;AACD;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASE,eAAT,CAA0BC,SAA1B,EAAsC;AACrC,MAAKA,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,GAApC,IAA2CA,SAAS,KAAK,IAA9D,EAAqE;AACpE;AACA;;AAED,SAAOA,SAAS,KAAK,IAAd,GAAqB,GAArB,GAA2BA,SAAlC;AACA;;AAED,SAASC,iBAAT,OAII;AAAA,MAHHC,cAGG,QAHHA,cAGG;AAAA,MAFHC,kBAEG,QAFHA,kBAEG;AAAA,MADHC,cACG,QADHA,cACG;;AACH,MAAKA,cAAL,EAAsB;AACrB,WAAOH,iBAAiB,CAACI,WAAzB;AACA;;AAED,MAAK,CAAEH,cAAF,IAAoB,CAAEC,kBAA3B,EAAgD;AAC/C;AACA;;AAED,MAAKD,cAAL,EAAsB;AACrB,WAAOA,cAAP;AACA;;AAEDtB,EAAAA,UAAU,CAAE,iDAAF,EAAqD;AAC9D0B,IAAAA,KAAK,EAAE,KADuD;AAE9DC,IAAAA,WAAW,EAAE;AAFiD,GAArD,CAAV;AAKA,SAAOJ,kBAAkB,CAACK,GAAnB,CAAwB,UAAEC,IAAF;AAAA,0BAAqBA,IAArB;AAAA,GAAxB,CAAP;AACA;;AAEDR,iBAAiB,CAACI,WAAlB,GAAgC,EAAhC;;AAEA,IAAMK,WAAW,GAAG,SAAdA,WAAc,CAAEC,IAAF;AAAA,SAAY7B,MAAM,CAAE,IAAF,CAAN,CAAe8B,IAAf,CAAqBD,IAArB,CAAZ;AAAA,CAApB;;AAEA,SAASE,eAAT,QAkDCC,YAlDD,EAmDE;AAAA,MAjDAzD,QAiDA,SAjDAA,QAiDA;AAAA,MAhDA0D,OAgDA,SAhDAA,OAgDA;AAAA,MA/COC,aA+CP,SA/CAtB,KA+CA;AAAA,MA9CUuB,gBA8CV,SA9CAC,QA8CA;AAAA,MA7CYC,kBA6CZ,SA7CAC,UA6CA;AAAA,MA5CApB,SA4CA,SA5CAA,SA4CA;AAAA,MA3CAqB,aA2CA,SA3CAA,aA2CA;AAAA,MA1CAC,gBA0CA,SA1CAA,gBA0CA;AAAA,MAzCAC,cAyCA,SAzCAA,cAyCA;AAAA,MAxCAC,SAwCA,SAxCAA,SAwCA;AAAA,MAvCAC,WAuCA,SAvCAA,WAuCA;AAAA,MAtCAC,sBAsCA,SAtCAA,sBAsCA;AAAA,MArCAxB,cAqCA,SArCAA,cAqCA;AAAA,MApCAC,kBAoCA,SApCAA,kBAoCA;AAAA,MAnCAwB,4BAmCA,SAnCAA,4BAmCA;AAAA,MAlCAC,QAkCA,SAlCAA,QAkCA;AAAA,MAjCAC,OAiCA,SAjCAA,OAiCA;AAAA,MAhCAC,OAgCA,SAhCAA,OAgCA;AAAA,MA/BwBC,YA+BxB,SA/BAC,sBA+BA;AAAA,MA9ByBC,aA8BzB,SA9BAC,uBA8BA;AAAA,MA7BAC,UA6BA,SA7BAA,UA6BA;AAAA,MA5BAC,kBA4BA,SA5BAA,kBA4BA;AAAA,MA3B0BC,cA2B1B,SA3BAC,wBA2BA;AAAA,MA1BAC,yBA0BA,SA1BAA,yBA0BA;AAAA,MAzB0BnC,cAyB1B,SAzBAoC,wBAyBA;AAAA,MAxBAC,iBAwBA,SAxBAA,iBAwBA;AAAA,MAvBAC,eAuBA,SAvBAA,eAuBA;AAAA,MAtBAC,oCAsBA,SAtBAA,oCAsBA;AAAA,MArBAC,0BAqBA,SArBAA,0BAqBA;AAAA,MAnBAC,8BAmBA,SAnBAA,8BAmBA;AAAA,MAlBAC,WAkBA,SAlBAA,WAkBA;AAAA,MAjBAC,oBAiBA,SAjBAA,oBAiBA;AAAA,MAhBAC,SAgBA,SAhBAA,SAgBA;AAAA,MAfAC,cAeA,SAfAA,cAeA;AAAA,MAdAC,eAcA,SAdAA,eAcA;AAAA,MAbAC,mBAaA,SAbAA,mBAaA;AAAA,MAZAC,kBAYA,SAZAA,kBAYA;AAAA,MAXAC,QAWA,SAXAA,QAWA;AAAA,MAVAC,UAUA,SAVAA,UAUA;AAAA,MATAC,UASA,SATAA,UASA;AAAA,MARAC,SAQA,SARAA,SAQA;AAAA,MAPAC,QAOA,SAPAA,QAOA;AAAA,MANAC,QAMA,SANAA,QAMA;AAAA,MALAC,MAKA,SALAA,MAKA;AAAA,MAJAC,MAIA,SAJAA,MAIA;AAAA,MAHGC,KAGH;;AACD,MAAMC,UAAU,GAAGpG,aAAa,CAAEmD,eAAF,CAAhC;AAEAsB,EAAAA,UAAU,GAAGA,UAAU,IAAI2B,UAA3B;AAEA,MAAMC,WAAW,GAAGhH,MAAM,EAA1B;;AALC,6BAMiDiC,mBAAmB,EANpE;AAAA,MAMOgF,QANP,wBAMOA,QANP;AAAA,MAM6BC,eAN7B,wBAMiB7C,UANjB;;AAOD,MAAM8C,WAAW,GAAG9E,cAAc,EAAlC;;AACA,MAAM+E,QAAQ,GAAG,SAAXA,QAAW,CAAEC,MAAF,EAAc;AAAA,kBAU1BA,MAAM,CAAE9E,gBAAF,CAVoB;AAAA,QAE7B+E,0BAF6B,WAE7BA,0BAF6B;AAAA,QAG7BC,iBAH6B,WAG7BA,iBAH6B;AAAA,QAI7BC,eAJ6B,WAI7BA,eAJ6B;AAAA,QAK7BC,WAL6B,WAK7BA,WAL6B;AAAA,QAM7BC,kBAN6B,WAM7BA,kBAN6B;AAAA,QAO7BC,oCAP6B,WAO7BA,oCAP6B;AAAA,QAQ7BC,gBAR6B,WAQ7BA,gBAR6B;AAAA,QAS7BC,iBAT6B,WAS7BA,iBAT6B;;AAY9B,QAAMC,cAAc,GAAGP,iBAAiB,EAAxC;AACA,QAAMQ,YAAY,GAAGP,eAAe,EAApC;;AAb8B,uBAcOC,WAAW,EAdlB;AAAA,QAcFO,IAdE,gBActBC,kBAdsB;;AAgB9B,QAAI5D,UAAJ;;AAEA,QAAKD,kBAAkB,KAAK8D,SAA5B,EAAwC;AACvC7D,MAAAA,UAAU,GACTyD,cAAc,CAACb,QAAf,KAA4BA,QAA5B,IACAa,cAAc,CAACK,YAAf,KAAgC/C,UAFjC;AAGA,KAJD,MAIO,IAAKhB,kBAAL,EAA0B;AAChCC,MAAAA,UAAU,GAAGyD,cAAc,CAACb,QAAf,KAA4BA,QAAzC;AACA;;AAED,QAAImB,UAAU,GAAG,EAAjB;;AACA,QAAKrI,QAAQ,CAACsI,EAAT,KAAgB,QAArB,EAAgC;AAC/B;AACA;AACA;AACA,UAAMC,KAAK,GACVrB,QAAQ,IAAIU,oCAAoC,CAAEV,QAAF,CADjD;;AAEA,UAAMsB,oBAAmB,GACxBD,KAAK,IAAIjE,UAAT,IAAuB3D,wBAAwB,CAAE4H,KAAF,CADhD;;AAEAF,MAAAA,UAAU,GAAG;AACZG,QAAAA,mBAAmB,EAAnBA;AADY,OAAb;AAGA;;AAED;AACCjB,MAAAA,0BAA0B,EAAEA,0BAA0B,EADvD;AAECQ,MAAAA,cAAc,EAAEzD,UAAU,GAAGyD,cAAc,CAACU,MAAlB,GAA2BN,SAFtD;AAGCH,MAAAA,YAAY,EAAE1D,UAAU,GAAG0D,YAAY,CAACS,MAAhB,GAAyBN,SAHlD;AAIC7D,MAAAA,UAAU,EAAVA,UAJD;AAKCqD,MAAAA,kBAAkB,EAAEA,kBAAkB,EALvC;AAMCe,MAAAA,QAAQ,EAAEb,gBAAgB,MAAMC,iBAAiB,EANlD;AAOCG,MAAAA,IAAI,EAAJA;AAPD,OAQII,UARJ;AAUA,GAlDD,CARC,CA2DD;AACA;AACA;;;AA7DC,mBAuEGhI,SAAS,CAAEgH,QAAF,CAvEZ;AAAA,MA+DAE,0BA/DA,cA+DAA,0BA/DA;AAAA,MAgEAQ,cAhEA,cAgEAA,cAhEA;AAAA,MAiEAC,YAjEA,cAiEAA,YAjEA;AAAA,MAkEA1D,UAlEA,cAkEAA,UAlEA;AAAA,MAmEAqD,kBAnEA,cAmEAA,kBAnEA;AAAA,MAoEAe,QApEA,cAoEAA,QApEA;AAAA,MAqEAT,IArEA,cAqEAA,IArEA;AAAA,MAsEAO,mBAtEA,cAsEAA,mBAtEA;;AAAA,qBA8EGpI,WAAW,CAAEoC,gBAAF,CA9Ed;AAAA,MAyEAmG,oCAzEA,gBAyEAA,oCAzEA;AAAA,MA0EAC,kBA1EA,gBA0EAA,kBA1EA;AAAA,MA2EAC,iBA3EA,gBA2EAA,iBA3EA;AAAA,MA4EAC,eA5EA,gBA4EAA,eA5EA;AAAA,MA6EAC,6BA7EA,gBA6EAA,6BA7EA;;AA+ED,MAAMC,YAAY,GAAG/F,eAAe,CAAEC,SAAF,CAApC;AACA,MAAM+F,sBAAsB,GAAG9F,iBAAiB,CAAE;AACjDC,IAAAA,cAAc,EAAdA,cADiD;AAEjDC,IAAAA,kBAAkB,EAAlBA,kBAFiD;AAGjDC,IAAAA,cAAc,EAAdA;AAHiD,GAAF,CAAhD;AAKA,MAAM4F,UAAU,GACf,CAAED,sBAAF,IAA4BA,sBAAsB,CAACnG,MAAvB,GAAgC,CAD7D;AAEA,MAAIqG,aAAa,GAAGjF,aAApB;AACA,MAAIkF,gBAAgB,GAAGjF,gBAAvB,CAxFC,CA0FD;;AACA,MAAKkF,KAAK,CAACC,OAAN,CAAepF,aAAf,CAAL,EAAsC;AACrCiF,IAAAA,aAAa,GAAG3I,cAAc,CAAC+I,MAAf,CAAuBrF,aAAvB,CAAhB;;AACAkF,IAAAA,gBAAgB,GAAG,0BAAEI,QAAF;AAAA,aAClBrF,gBAAgB,CACf3D,cAAc,CAACiJ,OAAf,CACCzI,uBAAuB,CAAE0I,QAAF,EAAYF,QAAZ,CAAvB,CAA8CG,UAD/C,CADe,CADE;AAAA,KAAnB;AAMA;;AAED,MAAMC,iBAAiB,GAAG1J,WAAW,CACpC,UAAE2J,KAAF,EAASC,GAAT,EAAkB;AACjBhB,IAAAA,eAAe,CAAE5B,QAAF,EAAY7B,UAAZ,EAAwBwE,KAAxB,EAA+BC,GAA/B,CAAf;AACA,GAHmC,EAIpC,CAAE5C,QAAF,EAAY7B,UAAZ,CAJoC,CAArC;AAOA,MAAM0E,QAAQ,GAAG7J,WAAW,CAC3B,iBAA4B;AAAA,QAAxB0C,KAAwB,SAAxBA,KAAwB;AAAA,QAAjBoH,SAAiB,SAAjBA,SAAiB;;AAC3B,QAAKjF,OAAL,EAAe;AACdA,MAAAA,OAAO,CAAE,CAAEiF,SAAJ,CAAP;AACA,KAH0B,CAK3B;AACA;AACA;AACA;;;AACA,QAAKlF,QAAQ,IAAI7D,OAAO,CAAE2B,KAAF,CAAnB,IAAgCoH,SAArC,EAAiD;AAChDlF,MAAAA,QAAQ,CAAE,CAAEkF,SAAJ,CAAR;AACA;AACD,GAb0B,EAc3B,CAAEjF,OAAF,EAAWD,QAAX,CAd2B,CAA5B;AAiBA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACC,MAAMmF,UAAU,GAAG/J,WAAW,CAC7B,UAAEgK,MAAF,EAAiC;AAAA,QAAvBC,YAAuB,uEAAR,EAAQ;;AAChC,QAAK,CAAEzF,SAAF,IAAe,CAAEM,OAAtB,EAAgC;AAC/B;AACA;;AAED,QAAMoF,MAAM,GAAG,EAAf;;AALgC,iBAMN3I,KAAK,CAAEyI,MAAF,CANC;AAAA;AAAA,QAMxBG,MANwB;AAAA,QAMhBC,KANgB;;AAOhC,QAAMC,eAAe,GAAGJ,YAAY,CAACrH,MAAb,GAAsB,CAA9C;AACA,QAAI0H,oBAAoB,GAAG,CAAC,CAA5B,CARgC,CAUhC;AACA;;AACA,QAAMC,eAAe,GAAGxJ,OAAO,CAAEoJ,MAAF,CAAP,IAAqB,CAAEpJ,OAAO,CAAEqJ,KAAF,CAAtD,CAZgC,CAchC;AACA;AACA;AACA;;AACA,QAAK,CAAEC,eAAF,IAAqB,CAAEtJ,OAAO,CAAEoJ,MAAF,CAAnC,EAAgD;AAC/CD,MAAAA,MAAM,CAACM,IAAP,CACC1F,OAAO,CACNpD,YAAY,CAAE;AACbgB,QAAAA,KAAK,EAAEyH,MADM;AAEbrB,QAAAA,YAAY,EAAZA;AAFa,OAAF,CADN,EAKN,CAAEyB,eALI,CADR;AASAD,MAAAA,oBAAoB,IAAI,CAAxB;AACA;;AAED,QAAKD,eAAL,EAAuB;AACtBH,MAAAA,MAAM,CAACM,IAAP,OAAAN,MAAM,qBAAUD,YAAV,EAAN;AACAK,MAAAA,oBAAoB,IAAIL,YAAY,CAACrH,MAArC;AACA,KAHD,MAGO,IAAKqC,aAAL,EAAqB;AAC3BiF,MAAAA,MAAM,CAACM,IAAP,CAAavF,aAAa,EAA1B;AACA,KApC+B,CAsChC;AACA;AACA;AACA;;;AACA,QACCoF,eAAe,GACZ,CAAEtJ,OAAO,CAAEqJ,KAAF,CADG,GAEZ,CAAEnF,aAAF,IAAmB,CAAElE,OAAO,CAAEqJ,KAAF,CAHhC,EAIE;AACDF,MAAAA,MAAM,CAACM,IAAP,CACC1F,OAAO,CACNpD,YAAY,CAAE;AACbgB,QAAAA,KAAK,EAAE0H,KADM;AAEbtB,QAAAA,YAAY,EAAZA;AAFa,OAAF,CADN,EAKNyB,eALM,CADR;AASA,KAxD+B,CA0DhC;AACA;;;AACA,QAAME,aAAa,GAAGJ,eAAe,GAAGC,oBAAH,GAA0B,CAA/D,CA5DgC,CA8DhC;AACA;;AACA,QAAMI,eAAe,GAAGL,eAAe,GAAG,CAAC,CAAJ,GAAQ,CAA/C;AAEA7F,IAAAA,SAAS,CAAE0F,MAAF,EAAUO,aAAV,EAAyBC,eAAzB,CAAT;AACA,GApE4B,EAqE7B,CAAElG,SAAF,EAAaM,OAAb,EAAsBgE,YAAtB,EAAoC7D,aAApC,CArE6B,CAA9B;AAwEA,MAAM0F,OAAO,GAAG3K,WAAW,CAC1B,iBAAqC;AAAA,QAAjC0C,KAAiC,SAAjCA,KAAiC;AAAA,QAA1BwB,QAA0B,SAA1BA,QAA0B;AAAA,QAAhB0G,QAAgB,SAAhBA,QAAgB;AACpC,QAAMC,QAAQ,GAAGrG,SAAS,IAAIM,OAA9B;;AAEA,QAAKN,SAAL,EAAiB;AAChB,UAAMsG,UAAU,GAAGvK,kBAAkB,CAAE,MAAF,CAAlB,CAA6BwK,MAA7B,CAClB;AAAA,YAAIC,IAAJ,SAAIA,IAAJ;AAAA,eAAgBA,IAAI,KAAK,OAAzB;AAAA,OADkB,CAAnB;AAGA,UAAMC,cAAc,GAAGzK,aAAa,CAAEsK,UAAF,EAAc,UAAEI,IAAF,EAAY;AAC7D,eAAOA,IAAI,CAACC,MAAL,CAAYvH,IAAZ,CAAkBlB,KAAK,CAACiB,IAAxB,CAAP;AACA,OAFmC,CAApC;;AAIA,UAAKsH,cAAL,EAAsB;AACrBzG,QAAAA,SAAS,CAAE,CACVyG,cAAc,CAACG,SAAf,CAA0B;AAAEC,UAAAA,OAAO,EAAE3I,KAAK,CAACiB;AAAjB,SAA1B,CADU,CAAF,CAAT;;AAGAkF,QAAAA,6BAA6B;AAC7B;AACD;;AAED,QAAK7F,SAAL,EAAiB;AAChB,UAAK4H,QAAL,EAAgB;AACf,YAAK,CAAEnF,iBAAP,EAA2B;AAC1BvB,UAAAA,QAAQ,CAAEhD,MAAM,CAAEwB,KAAF,EAAS,IAAT,CAAR,CAAR;AACA;AACD,OAJD,MAIO,IAAKmI,QAAQ,IAAI5J,WAAW,CAAEyB,KAAF,CAA5B,EAAwC;AAC9CqH,QAAAA,UAAU,CAAErH,KAAF,CAAV;AACA,OAFM,MAEA;AACNwB,QAAAA,QAAQ,CAAE9C,mBAAmB,CAAEsB,KAAF,CAArB,CAAR;AACA;AACD,KAVD,MAUO;AAAA,UACEiB,IADF,GACuBjB,KADvB,CACEiB,IADF;AAAA,UACQgG,KADR,GACuBjH,KADvB,CACQiH,KADR;AAAA,UACeC,GADf,GACuBlH,KADvB,CACekH,GADf;AAEN,UAAM0B,aAAa,GAClBvG,YAAY,IAAI4E,KAAK,KAAKC,GAA1B,IAAiCA,GAAG,KAAKjG,IAAI,CAACf,MAD/C;;AAGA,UAAKgI,QAAQ,IAAM,CAAEC,QAAF,IAAc,CAAES,aAAnC,EAAqD;AACpD,YAAK,CAAE7F,iBAAP,EAA2B;AAC1BvB,UAAAA,QAAQ,CAAEhD,MAAM,CAAEwB,KAAF,EAAS,IAAT,CAAR,CAAR;AACA;AACD,OAJD,MAIO,IAAK,CAAEmI,QAAF,IAAcS,aAAnB,EAAmC;AACzCvG,QAAAA,YAAY;AACZ,OAFM,MAEA,IAAK8F,QAAL,EAAgB;AACtBd,QAAAA,UAAU,CAAErH,KAAF,CAAV;AACA;AACD;AACD,GA7CyB,EA8C1B,CACC8B,SADD,EAECM,OAFD,EAGC+D,6BAHD,EAIC7F,SAJD,EAKC+G,UALD,EAMChF,YAND,CA9C0B,CAA3B;AAwDA,MAAMwG,OAAO,GAAGvL,WAAW,CAC1B,iBAQO;AAAA,QAPN0C,KAOM,SAPNA,KAOM;AAAA,QANNwB,QAMM,SANNA,QAMM;AAAA,QALNsH,IAKM,SALNA,IAKM;AAAA,QAJNC,SAIM,SAJNA,SAIM;AAAA,QAHNC,UAGM,SAHNA,UAGM;AAAA,QAFNC,KAEM,SAFNA,KAEM;AAAA,QADNhJ,aACM,SADNA,aACM;;AACN;AACA;AACA;AACA,QAAK+I,UAAL,EAAkB;AACjB,UAAME,WAAW,GAAGvK,MAAM,CAAE;AAC3BmK,QAAAA,IAAI,EAAJA,IAD2B;AAE3B1C,QAAAA,YAAY,EAAZA,YAF2B;AAG3B+C,QAAAA,oBAAoB,EACnB/C,YAAY,KAAK,IAAjB,GAAwB,CAAE,IAAF,EAAQ,IAAR,CAAxB,GAAyCb,SAJf;AAK3B7C,QAAAA,kBAAkB,EAAlBA;AAL2B,OAAF,CAA1B;AAOA3C,MAAAA,gBAAgB,CAAEmJ,WAAF,EAAejJ,aAAf,CAAhB;AACAuB,MAAAA,QAAQ,CAAEhD,MAAM,CAAEwB,KAAF,EAASkJ,WAAT,CAAR,CAAR;AACA;AACA;;AAED,QAAKvG,cAAL,EAAsB;AACrBnB,MAAAA,QAAQ,CAAEhD,MAAM,CAAEwB,KAAF,EAASrB,MAAM,CAAE;AAAEsC,QAAAA,IAAI,EAAE8H;AAAR,OAAF,CAAf,CAAR,CAAR;AACA;AACA,KApBK,CAsBN;AACA;;;AACA,QAAKE,KAAK,IAAIA,KAAK,CAAC/I,MAAf,IAAyB,CAAE4I,IAAhC,EAAuC;AACtC,UAAMH,QAAO,GAAGjL,YAAY,CAAE;AAC7B0L,QAAAA,IAAI,EAAE5J,gBAAgB,CAAEyJ,KAAF,CADO;AAE7BI,QAAAA,IAAI,EAAE,QAFuB;AAG7BhI,QAAAA,OAAO,EAAPA,OAH6B;AAI7BqB,QAAAA,kBAAkB,EAAlBA;AAJ6B,OAAF,CAA5B,CADsC,CAQtC;AACA;;;AACA4G,MAAAA,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAoB,qBAApB,EAA2CP,KAA3C;;AAEA,UAAKnH,SAAS,IAAIzD,OAAO,CAAE2B,KAAF,CAAzB,EAAqC;AACpC8B,QAAAA,SAAS,CAAE6G,QAAF,CAAT;AACA,OAFD,MAEO;AACNtB,QAAAA,UAAU,CAAErH,KAAF,EAAS2I,QAAT,CAAV;AACA;;AAED;AACA;;AAED,QAAIU,IAAI,GAAGvH,SAAS,IAAIM,OAAb,GAAuB,MAAvB,GAAgC,QAA3C,CA7CM,CA+CN;AACA;AACA;AACA;;AACA,QACCiH,IAAI,KAAK,MAAT,IACAhL,OAAO,CAAE2B,KAAF,CADP,IAEAgB,WAAW,CAAE+H,SAAF,CAHZ,EAIE;AACDM,MAAAA,IAAI,GAAG,QAAP;AACA;;AAED,QACCxG,yBAAyB,IACzBxE,OAAO,CAAE2B,KAAF,CADP,IAEAb,KAAK,CAAE4J,SAAS,CAACU,IAAV,EAAF,CAHN,EAIE;AACDJ,MAAAA,IAAI,GAAG,QAAP;AACA;;AAED,QAAMV,OAAO,GAAGjL,YAAY,CAAE;AAC7B0L,MAAAA,IAAI,EAAEN,IADuB;AAE7BC,MAAAA,SAAS,EAATA,SAF6B;AAG7BM,MAAAA,IAAI,EAAJA,IAH6B;AAI7BhI,MAAAA,OAAO,EAAPA,OAJ6B;AAK7BqB,MAAAA,kBAAkB,EAAlBA;AAL6B,KAAF,CAA5B;;AAQA,QAAK,OAAOiG,OAAP,KAAmB,QAAxB,EAAmC;AAClC,UAAIe,aAAa,GAAG/K,MAAM,CAAE;AAAEmK,QAAAA,IAAI,EAAEH;AAAR,OAAF,CAA1B;AAEA5I,MAAAA,gBAAgB,CAAE2J,aAAF,EAAiBzJ,aAAjB,CAAhB,CAHkC,CAKlC;AACA;;AACA,UAAKmG,YAAL,EAAoB;AACnBsD,QAAAA,aAAa,GAAG9K,OAAO,CACtB8K,aADsB,EAEtB,MAFsB,EAGtB3K,cAHsB,CAAvB;AAKA;;AAEDyC,MAAAA,QAAQ,CAAEhD,MAAM,CAAEwB,KAAF,EAAS0J,aAAT,CAAR,CAAR;AACA,KAhBD,MAgBO,IAAKf,OAAO,CAACzI,MAAR,GAAiB,CAAtB,EAA0B;AAChC,UAAK4B,SAAS,IAAIzD,OAAO,CAAE2B,KAAF,CAAzB,EAAqC;AACpC8B,QAAAA,SAAS,CAAE6G,OAAF,EAAWA,OAAO,CAACzI,MAAR,GAAiB,CAA5B,EAA+B,CAAC,CAAhC,CAAT;AACA,OAFD,MAEO;AACNmH,QAAAA,UAAU,CAAErH,KAAF,EAAS2I,OAAT,CAAV;AACA;AACD;AACD,GA3GyB,EA4G1B,CACCtH,OADD,EAECS,SAFD,EAGCM,OAHD,EAICiF,UAJD,EAKCxE,yBALD,EAMCuD,YAND,EAOC1D,kBAPD,EAQCC,cARD,CA5G0B,CAA3B;AAwHA,MAAMgH,SAAS,GAAGrM,WAAW,CAC5B,UAAE0C,KAAF,EAAS4J,aAAT,EAA4B;AAC3B,QAAK,CAAE9H,SAAP,EAAmB;AAClB;AACA;;AAH0B,QAKnBmF,KALmB,GAKHjH,KALG,CAKnBiH,KALmB;AAAA,QAKZhG,IALY,GAKHjB,KALG,CAKZiB,IALY;AAM3B,QAAM4I,eAAe,GAAG5I,IAAI,CAAChC,KAAL,CAAYgI,KAAK,GAAG,CAApB,EAAuBA,KAAvB,CAAxB,CAN2B,CAQ3B;;AACA,QAAK4C,eAAe,KAAK,GAAzB,EAA+B;AAC9B;AACA;;AAED,QAAMC,iBAAiB,GAAG7I,IAAI,CAAChC,KAAL,CAAY,CAAZ,EAAegI,KAAf,EAAuBwC,IAAvB,EAA1B;AACA,QAAMM,gBAAgB,GAAGlM,kBAAkB,CAAE,MAAF,CAAlB,CAA6BwK,MAA7B,CACxB;AAAA,UAAIC,IAAJ,SAAIA,IAAJ;AAAA,aAAgBA,IAAI,KAAK,QAAzB;AAAA,KADwB,CAAzB;AAGA,QAAMC,cAAc,GAAGzK,aAAa,CACnCiM,gBADmC,EAEnC,iBAAkB;AAAA,UAAdC,MAAc,SAAdA,MAAc;AACjB,aAAOF,iBAAiB,KAAKE,MAA7B;AACA,KAJkC,CAApC;;AAOA,QAAK,CAAEzB,cAAP,EAAwB;AACvB;AACA;;AAED,QAAMI,OAAO,GAAGiB,aAAa,CAAE3K,KAAK,CAAEe,KAAF,EAASiH,KAAT,EAAgBhG,IAAI,CAACf,MAArB,CAAP,CAA7B;AACA,QAAMyF,KAAK,GAAG4C,cAAc,CAACG,SAAf,CAA0BC,OAA1B,CAAd;AAEA7G,IAAAA,SAAS,CAAE,CAAE6D,KAAF,CAAF,CAAT;;AACAQ,IAAAA,6BAA6B;AAC7B,GAlC2B,EAmC5B,CAAErE,SAAF,EAAaqE,6BAAb,CAnC4B,CAA7B;AAsCA,MAAM8D,SAAS,GAAGhM,YAAY,CAAE,CAAEmD,YAAF,EAAgBiD,WAAhB,CAAF,CAA9B;AAEA,MAAMsE,OAAO,GACZ,cAAC,QAAD;AACC,IAAA,QAAQ,EAAGrE,QADZ;AAEC,IAAA,UAAU,EAAG7B,UAFd;AAGC,IAAA,GAAG,EAAGwH,SAHP;AAIC,IAAA,KAAK,EAAG1D,aAJT;AAKC,IAAA,QAAQ,EAAGC,gBALZ;AAMC,IAAA,cAAc,EAAGrB,cANlB;AAOC,IAAA,YAAY,EAAGC,YAPhB;AAQC,IAAA,iBAAiB,EAAG4B,iBARrB;AASC,IAAA,OAAO,EAAG3F,OATX;AAUC,IAAA,WAAW,EAAGU,WAVf;AAWC,IAAA,cAAc,EAAGsE,sBAXlB;AAYC,IAAA,4BAA4B,EAAGpE,4BAZhC;AAaC,IAAA,OAAO,EAAGgG,OAbX;AAcC,IAAA,QAAQ,EAAGd,QAdZ;AAeC,IAAA,OAAO,EAAG0B,OAfX;AAgBC,IAAA,oBAAoB,EAAGnH,UAhBxB;AAiBC,IAAA,mBAAmB,EAAGiI,SAjBvB;AAkBC,IAAA,sBAAsB,EAAGvD,YAlB1B;AAmBC,IAAA,oCAAoC,EAAGzB,0BAnBxC;AAoBC,IAAA,8BAA8B,EAAGqB,kBApBlC;AAqBC,IAAA,6BAA6B,EAAGC,iBArBjC;AAsBC,IAAA,2BAA2B,EAAGF,oCAtB/B;AAuBC,IAAA,6BAA6B,EAAGI,6BAvBjC;AAwBC,IAAA,4BAA4B,EAAGpB,kBAxBhC;AAyBC,IAAA,cAAc,EAAGM,IAzBlB;AA0BC,IAAA,wBAAwB,EAAG3E,cA1B5B;AA2BC,IAAA,kBAAkB,EAAGgC,kBA3BtB;AA4BC,IAAA,QAAQ,EAAGoD,QA5BZ;AA6BC,IAAA,eAAe,EAAG9C,eA7BnB;AA8BC,IAAA,oCAAoC,EACnCC,oCA/BF;AAiCC,IAAA,0BAA0B,EAAGC,0BAjC9B,CAkCC;;AAlCD,KAmCMsB,WAnCN;AAoCC,IAAA,eAAe,EACd/C,kBAAkB,KAAK8D,SAAvB,GACG9D,kBADH,GAEG8C,eAvCL;AAyCC,IAAA,mBAAmB,EAAGqB,mBAzCvB;AA0CC,IAAA,8BAA8B,EAAGzC,8BA1ClC;AA2CC,IAAA,WAAW,EAAGC,WA3Cf;AA4CC,IAAA,oBAAoB,EAAGC,oBA5CxB;AA6CC,IAAA,SAAS,EAAGC,SA7Cb;AA8CC,IAAA,cAAc,EAAGC,cA9ClB;AA+CC,IAAA,eAAe,EAAGC,eA/CnB;AAgDC,IAAA,mBAAmB,EAAGC,mBAhDvB;AAiDC,IAAA,kBAAkB,EAAGC,kBAjDtB;AAkDC,IAAA,QAAQ,EAAGC,QAlDZ;AAmDC,IAAA,UAAU,EAAGC,UAnDd;AAoDC,IAAA,UAAU,EAAGC,UApDd;AAqDC,IAAA,SAAS,EAAGC,SArDb;AAsDC,IAAA,QAAQ,EAAGC,QAtDZ;AAuDC,IAAA,QAAQ,EAAGC,QAvDZ;AAwDC,IAAA,MAAM,EAAGC,MAxDV;AAyDC,IAAA,MAAM,EAAGC,MAzDV,CA0DC;AACA;AACA;AA5DD;AA6DC,IAAA,EAAE,EAAGC,KAAK,CAAC+F,EA7DZ;AA8DC,IAAA,KAAK,EAAG/F,KAAK,CAACgG;AA9Df,MAgEG;AAAA,QACWC,gBADX,SACD1I,UADC;AAAA,QAED1B,KAFC,SAEDA,KAFC;AAAA,QAGDwB,QAHC,SAGDA,QAHC;AAAA,QAID6I,OAJC,SAIDA,OAJC;AAAA,QAKDC,aALC,SAKDA,aALC;AAAA,QAMgBC,OANhB,SAMDC,eANC;AAAA,WAQD,8BACG7M,QAAQ,IAAIA,QAAQ,CAAE;AAAEqC,MAAAA,KAAK,EAALA,KAAF;AAASwB,MAAAA,QAAQ,EAARA,QAAT;AAAmB6I,MAAAA,OAAO,EAAPA;AAAnB,KAAF,CADvB,EAEGD,gBAAgB,IAAI9D,UAApB,IACD,cAAC,sBAAD;AACC,MAAA,MAAM,EAAG3E,aADV;AAEC,MAAA,SAAS,EAAG0C,WAAW,CAACoG;AAFzB,MAHF,EAQGL,gBAAgB,IAAI,cAAC,sBAAD,OARvB,EASC,cAAC,YAAD;AACC,MAAA,SAAS,EAAGtI,SADb;AAEC,MAAA,UAAU,EAAGD,cAFd;AAGC,MAAA,MAAM,EAAG7B,KAHV;AAIC,MAAA,QAAQ,EAAGwB,QAJZ;AAKC,MAAA,UAAU,EAAG4I,gBALd;AAMC,MAAA,UAAU,EAAG/F;AANd,OAQG;AAAA,UAAIqG,SAAJ,UAAIA,SAAJ;AAAA,UAAeC,QAAf,UAAeA,QAAf;AAAA,UAAyBC,UAAzB,UAAyBA,SAAzB;AAAA,aACD,cAAC,OAAD,eACMN,aADN,EAEMnG,KAFN;AAGC,QAAA,KAAK,EACJA,KAAK,CAACgG,KAAN,mCAEMhG,KAAK,CAACgG,KAFZ,GAGMG,aAAa,CAACH,KAHpB,IAKGG,aAAa,CAACH,KATnB;AAWC,QAAA,SAAS,EAAGlN,UAAU,CACrB6C,OADqB,EAErBqE,KAAK,CAAC0G,SAFe,EAGrBP,aAAa,CAACO,SAHO,EAIrB;AACC,uCAA6B7I;AAD9B,SAJqB,CAXvB;AAmBC,6BACC0I,SAAS,GAAG,MAAH,GAAYnF,SApBvB;AAsBC,qBAAYmF,SAtBb;AAuBC,iCAAwBC,QAvBzB;AAwBC,QAAA,SAAS,EAAG,mBAAEG,KAAF,EAAa;AACxBF,UAAAA,UAAS,CAAEE,KAAF,CAAT;;AACAR,UAAAA,aAAa,CAACM,SAAd,CAAyBE,KAAzB;AACA;AA3BF,SADC;AAAA,KARH,CATD,CARC;AAAA,GAhEH,CADD;;AA+HA,MAAK,CAAElJ,gBAAP,EAA0B;AACzB,WAAO+G,OAAP;AACA;;AAEDzJ,EAAAA,UAAU,CAAE,+CAAF,EAAmD;AAC5D0B,IAAAA,KAAK,EAAE,KADqD;AAE5DC,IAAAA,WAAW,EAAE;AAF+C,GAAnD,CAAV;AAKA,SACC;AAAK,IAAA,SAAS,EAAG5D,UAAU,CAAE4C,cAAF,EAAkB+B,gBAAlB;AAA3B,KACG+G,OADH,CADD;AAKA;;AAED,IAAMoC,0BAA0B,GAAGxN,UAAU,CAAE4D,eAAF,CAA7C;;AAEA4J,0BAA0B,CAACC,OAA3B,GAAqC,kBAK9B;AAAA,MAJNhL,KAIM,UAJNA,KAIM;AAAA,MAHGiL,GAGH,UAHN5J,OAGM;AAAA,MAFNf,SAEM,UAFNA,SAEM;AAAA,MADH6D,KACG;;AACN;AACA,MAAKsC,KAAK,CAACC,OAAN,CAAe1G,KAAf,CAAL,EAA8B;AAC7BA,IAAAA,KAAK,GAAGpC,cAAc,CAAC+I,MAAf,CAAuB3G,KAAvB,CAAR;AACA;;AAED,MAAMkL,YAAY,GAAG7K,eAAe,CAAEC,SAAF,CAApC;;AAEA,MAAK,CAAEN,KAAF,IAAWkL,YAAhB,EAA+B;AAC9BlL,IAAAA,KAAK,cAAQkL,YAAR,gBAA4BA,YAA5B,MAAL;AACA;;AAED,MAAMvC,OAAO,GAAG,cAAC,OAAD,QAAW3I,KAAX,CAAhB;;AAEA,MAAKiL,GAAL,EAAW;AACV,WAAO,cAAC,GAAD,EAAU/N,IAAI,CAAEiH,KAAF,EAAS,CAAE,QAAF,CAAT,CAAd,EAA0CwE,OAA1C,CAAP;AACA;;AAED,SAAOA,OAAP;AACA,CAxBD;;AA0BAoC,0BAA0B,CAAC1M,OAA3B,GAAqC,UAAE2B,KAAF,EAAa;AACjD,SAAO,CAAEA,KAAF,IAAWA,KAAK,CAACE,MAAN,KAAiB,CAAnC;AACA,CAFD;;AAIA6K,0BAA0B,CAACC,OAA3B,CAAmCG,YAAnC,GAAkD;AACjDC,EAAAA,MAAM,EAAE,QADyC;AAEjDpL,EAAAA,KAAK,EAAE;AAF0C,CAAlD;AAKA;AACA;AACA;;AACA,eAAe+K,0BAAf;AACA,SAASM,gBAAT,QAAiC,YAAjC;AACA,SAASC,qBAAT,QAAsC,kBAAtC;AACA,SAASC,4BAAT,QAA6C,eAA7C","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { omit } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tRawHTML,\n\tPlatform,\n\tuseRef,\n\tuseCallback,\n\tforwardRef,\n} from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\tpasteHandler,\n\tchildren as childrenSource,\n\tgetBlockTransforms,\n\tfindTransform,\n\tisUnmodifiedDefaultBlock,\n} from '@wordpress/blocks';\nimport { useInstanceId, useMergeRefs } from '@wordpress/compose';\nimport {\n\t__experimentalRichText as RichText,\n\t__unstableCreateElement,\n\tisEmpty,\n\t__unstableIsEmptyLine as isEmptyLine,\n\tinsert,\n\t__unstableInsertLineSeparator as insertLineSeparator,\n\tcreate,\n\treplace,\n\tsplit,\n\t__UNSTABLE_LINE_SEPARATOR as LINE_SEPARATOR,\n\ttoHTMLString,\n\tslice,\n} from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\nimport { isURL } from '@wordpress/url';\nimport { regexp } from '@wordpress/shortcode';\n\n/**\n * Internal dependencies\n */\nimport Autocomplete from '../autocomplete';\nimport { useBlockEditContext } from '../block-edit';\nimport { RemoveBrowserShortcuts } from './remove-browser-shortcuts';\nimport { filePasteHandler } from './file-paste-handler';\nimport FormatToolbarContainer from './format-toolbar-container';\nimport { useNativeProps } from './use-native-props';\nimport { store as blockEditorStore } from '../../store';\n\nconst wrapperClasses = 'block-editor-rich-text';\nconst classes = 'block-editor-rich-text__editable';\n\nfunction addActiveFormats( value, activeFormats ) {\n\tif ( activeFormats.length ) {\n\t\tlet index = value.formats.length;\n\n\t\twhile ( index-- ) {\n\t\t\tvalue.formats[ index ] = [\n\t\t\t\t...activeFormats,\n\t\t\t\t...( value.formats[ index ] || [] ),\n\t\t\t];\n\t\t}\n\t}\n}\n\n/**\n * Get the multiline tag based on the multiline prop.\n *\n * @param {?(string|boolean)} multiline The multiline prop.\n *\n * @return {?string} The multiline tag.\n */\nfunction getMultilineTag( multiline ) {\n\tif ( multiline !== true && multiline !== 'p' && multiline !== 'li' ) {\n\t\treturn;\n\t}\n\n\treturn multiline === true ? 'p' : multiline;\n}\n\nfunction getAllowedFormats( {\n\tallowedFormats,\n\tformattingControls,\n\tdisableFormats,\n} ) {\n\tif ( disableFormats ) {\n\t\treturn getAllowedFormats.EMPTY_ARRAY;\n\t}\n\n\tif ( ! allowedFormats && ! formattingControls ) {\n\t\treturn;\n\t}\n\n\tif ( allowedFormats ) {\n\t\treturn allowedFormats;\n\t}\n\n\tdeprecated( 'wp.blockEditor.RichText formattingControls prop', {\n\t\tsince: '5.4',\n\t\talternative: 'allowedFormats',\n\t} );\n\n\treturn formattingControls.map( ( name ) => `core/${ name }` );\n}\n\ngetAllowedFormats.EMPTY_ARRAY = [];\n\nconst isShortcode = ( text ) => regexp( '.*' ).test( text );\n\nfunction RichTextWrapper(\n\t{\n\t\tchildren,\n\t\ttagName,\n\t\tvalue: originalValue,\n\t\tonChange: originalOnChange,\n\t\tisSelected: originalIsSelected,\n\t\tmultiline,\n\t\tinlineToolbar,\n\t\twrapperClassName,\n\t\tautocompleters,\n\t\tonReplace,\n\t\tplaceholder,\n\t\tkeepPlaceholderOnFocus,\n\t\tallowedFormats,\n\t\tformattingControls,\n\t\twithoutInteractiveFormatting,\n\t\tonRemove,\n\t\tonMerge,\n\t\tonSplit,\n\t\t__unstableOnSplitAtEnd: onSplitAtEnd,\n\t\t__unstableOnSplitMiddle: onSplitMiddle,\n\t\tidentifier,\n\t\tpreserveWhiteSpace,\n\t\t__unstablePastePlainText: pastePlainText,\n\t\t__unstableEmbedURLOnPaste,\n\t\t__unstableDisableFormats: disableFormats,\n\t\tdisableLineBreaks,\n\t\tunstableOnFocus,\n\t\t__unstableAllowPrefixTransformations,\n\t\t__unstableMultilineRootTag,\n\t\t// Native props.\n\t\t__unstableMobileNoFocusOnMount,\n\t\tdeleteEnter,\n\t\tplaceholderTextColor,\n\t\ttextAlign,\n\t\tselectionColor,\n\t\ttagsToEliminate,\n\t\trootTagsToEliminate,\n\t\tdisableEditingMenu,\n\t\tfontSize,\n\t\tfontFamily,\n\t\tfontWeight,\n\t\tfontStyle,\n\t\tminWidth,\n\t\tmaxWidth,\n\t\tonBlur,\n\t\tsetRef,\n\t\t...props\n\t},\n\tforwardedRef\n) {\n\tconst instanceId = useInstanceId( RichTextWrapper );\n\n\tidentifier = identifier || instanceId;\n\n\tconst fallbackRef = useRef();\n\tconst { clientId, isSelected: blockIsSelected } = useBlockEditContext();\n\tconst nativeProps = useNativeProps();\n\tconst selector = ( select ) => {\n\t\tconst {\n\t\t\tisCaretWithinFormattedText,\n\t\t\tgetSelectionStart,\n\t\t\tgetSelectionEnd,\n\t\t\tgetSettings,\n\t\t\tdidAutomaticChange,\n\t\t\t__unstableGetBlockWithoutInnerBlocks,\n\t\t\tisMultiSelecting,\n\t\t\thasMultiSelection,\n\t\t} = select( blockEditorStore );\n\n\t\tconst selectionStart = getSelectionStart();\n\t\tconst selectionEnd = getSelectionEnd();\n\t\tconst { __experimentalUndo: undo } = getSettings();\n\n\t\tlet isSelected;\n\n\t\tif ( originalIsSelected === undefined ) {\n\t\t\tisSelected =\n\t\t\t\tselectionStart.clientId === clientId &&\n\t\t\t\tselectionStart.attributeKey === identifier;\n\t\t} else if ( originalIsSelected ) {\n\t\t\tisSelected = selectionStart.clientId === clientId;\n\t\t}\n\n\t\tlet extraProps = {};\n\t\tif ( Platform.OS === 'native' ) {\n\t\t\t// If the block of this RichText is unmodified then it's a candidate for replacing when adding a new block.\n\t\t\t// In order to fix https://github.com/wordpress-mobile/gutenberg-mobile/issues/1126, let's blur on unmount in that case.\n\t\t\t// This apparently assumes functionality the BlockHlder actually\n\t\t\tconst block =\n\t\t\t\tclientId && __unstableGetBlockWithoutInnerBlocks( clientId );\n\t\t\tconst shouldBlurOnUnmount =\n\t\t\t\tblock && isSelected && isUnmodifiedDefaultBlock( block );\n\t\t\textraProps = {\n\t\t\t\tshouldBlurOnUnmount,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tisCaretWithinFormattedText: isCaretWithinFormattedText(),\n\t\t\tselectionStart: isSelected ? selectionStart.offset : undefined,\n\t\t\tselectionEnd: isSelected ? selectionEnd.offset : undefined,\n\t\t\tisSelected,\n\t\t\tdidAutomaticChange: didAutomaticChange(),\n\t\t\tdisabled: isMultiSelecting() || hasMultiSelection(),\n\t\t\tundo,\n\t\t\t...extraProps,\n\t\t};\n\t};\n\t// This selector must run on every render so the right selection state is\n\t// retreived from the store on merge.\n\t// To do: fix this somehow.\n\tconst {\n\t\tisCaretWithinFormattedText,\n\t\tselectionStart,\n\t\tselectionEnd,\n\t\tisSelected,\n\t\tdidAutomaticChange,\n\t\tdisabled,\n\t\tundo,\n\t\tshouldBlurOnUnmount,\n\t} = useSelect( selector );\n\tconst {\n\t\t__unstableMarkLastChangeAsPersistent,\n\t\tenterFormattedText,\n\t\texitFormattedText,\n\t\tselectionChange,\n\t\t__unstableMarkAutomaticChange,\n\t} = useDispatch( blockEditorStore );\n\tconst multilineTag = getMultilineTag( multiline );\n\tconst adjustedAllowedFormats = getAllowedFormats( {\n\t\tallowedFormats,\n\t\tformattingControls,\n\t\tdisableFormats,\n\t} );\n\tconst hasFormats =\n\t\t! adjustedAllowedFormats || adjustedAllowedFormats.length > 0;\n\tlet adjustedValue = originalValue;\n\tlet adjustedOnChange = originalOnChange;\n\n\t// Handle deprecated format.\n\tif ( Array.isArray( originalValue ) ) {\n\t\tadjustedValue = childrenSource.toHTML( originalValue );\n\t\tadjustedOnChange = ( newValue ) =>\n\t\t\toriginalOnChange(\n\t\t\t\tchildrenSource.fromDOM(\n\t\t\t\t\t__unstableCreateElement( document, newValue ).childNodes\n\t\t\t\t)\n\t\t\t);\n\t}\n\n\tconst onSelectionChange = useCallback(\n\t\t( start, end ) => {\n\t\t\tselectionChange( clientId, identifier, start, end );\n\t\t},\n\t\t[ clientId, identifier ]\n\t);\n\n\tconst onDelete = useCallback(\n\t\t( { value, isReverse } ) => {\n\t\t\tif ( onMerge ) {\n\t\t\t\tonMerge( ! isReverse );\n\t\t\t}\n\n\t\t\t// Only handle remove on Backspace. This serves dual-purpose of being\n\t\t\t// an intentional user interaction distinguishing between Backspace and\n\t\t\t// Delete to remove the empty field, but also to avoid merge & remove\n\t\t\t// causing destruction of two fields (merge, then removed merged).\n\t\t\tif ( onRemove && isEmpty( value ) && isReverse ) {\n\t\t\t\tonRemove( ! isReverse );\n\t\t\t}\n\t\t},\n\t\t[ onMerge, onRemove ]\n\t);\n\n\t/**\n\t * Signals to the RichText owner that the block can be replaced with two\n\t * blocks as a result of splitting the block by pressing enter, or with\n\t * blocks as a result of splitting the block by pasting block content in the\n\t * instance.\n\t *\n\t * @param  {Object} record       The rich text value to split.\n\t * @param  {Array}  pastedBlocks The pasted blocks to insert, if any.\n\t */\n\tconst splitValue = useCallback(\n\t\t( record, pastedBlocks = [] ) => {\n\t\t\tif ( ! onReplace || ! onSplit ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst blocks = [];\n\t\t\tconst [ before, after ] = split( record );\n\t\t\tconst hasPastedBlocks = pastedBlocks.length > 0;\n\t\t\tlet lastPastedBlockIndex = -1;\n\n\t\t\t// Consider the after value to be the original it is not empty and\n\t\t\t// the before value *is* empty.\n\t\t\tconst isAfterOriginal = isEmpty( before ) && ! isEmpty( after );\n\n\t\t\t// Create a block with the content before the caret if there's no pasted\n\t\t\t// blocks, or if there are pasted blocks and the value is not empty.\n\t\t\t// We do not want a leading empty block on paste, but we do if split\n\t\t\t// with e.g. the enter key.\n\t\t\tif ( ! hasPastedBlocks || ! isEmpty( before ) ) {\n\t\t\t\tblocks.push(\n\t\t\t\t\tonSplit(\n\t\t\t\t\t\ttoHTMLString( {\n\t\t\t\t\t\t\tvalue: before,\n\t\t\t\t\t\t\tmultilineTag,\n\t\t\t\t\t\t} ),\n\t\t\t\t\t\t! isAfterOriginal\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tlastPastedBlockIndex += 1;\n\t\t\t}\n\n\t\t\tif ( hasPastedBlocks ) {\n\t\t\t\tblocks.push( ...pastedBlocks );\n\t\t\t\tlastPastedBlockIndex += pastedBlocks.length;\n\t\t\t} else if ( onSplitMiddle ) {\n\t\t\t\tblocks.push( onSplitMiddle() );\n\t\t\t}\n\n\t\t\t// If there's pasted blocks, append a block with non empty content\n\t\t\t/// after the caret. Otherwise, do append an empty block if there\n\t\t\t// is no `onSplitMiddle` prop, but if there is and the content is\n\t\t\t// empty, the middle block is enough to set focus in.\n\t\t\tif (\n\t\t\t\thasPastedBlocks\n\t\t\t\t\t? ! isEmpty( after )\n\t\t\t\t\t: ! onSplitMiddle || ! isEmpty( after )\n\t\t\t) {\n\t\t\t\tblocks.push(\n\t\t\t\t\tonSplit(\n\t\t\t\t\t\ttoHTMLString( {\n\t\t\t\t\t\t\tvalue: after,\n\t\t\t\t\t\t\tmultilineTag,\n\t\t\t\t\t\t} ),\n\t\t\t\t\t\tisAfterOriginal\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// If there are pasted blocks, set the selection to the last one.\n\t\t\t// Otherwise, set the selection to the second block.\n\t\t\tconst indexToSelect = hasPastedBlocks ? lastPastedBlockIndex : 1;\n\n\t\t\t// If there are pasted blocks, move the caret to the end of the selected block\n\t\t\t// Otherwise, retain the default value.\n\t\t\tconst initialPosition = hasPastedBlocks ? -1 : 0;\n\n\t\t\tonReplace( blocks, indexToSelect, initialPosition );\n\t\t},\n\t\t[ onReplace, onSplit, multilineTag, onSplitMiddle ]\n\t);\n\n\tconst onEnter = useCallback(\n\t\t( { value, onChange, shiftKey } ) => {\n\t\t\tconst canSplit = onReplace && onSplit;\n\n\t\t\tif ( onReplace ) {\n\t\t\t\tconst transforms = getBlockTransforms( 'from' ).filter(\n\t\t\t\t\t( { type } ) => type === 'enter'\n\t\t\t\t);\n\t\t\t\tconst transformation = findTransform( transforms, ( item ) => {\n\t\t\t\t\treturn item.regExp.test( value.text );\n\t\t\t\t} );\n\n\t\t\t\tif ( transformation ) {\n\t\t\t\t\tonReplace( [\n\t\t\t\t\t\ttransformation.transform( { content: value.text } ),\n\t\t\t\t\t] );\n\t\t\t\t\t__unstableMarkAutomaticChange();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( multiline ) {\n\t\t\t\tif ( shiftKey ) {\n\t\t\t\t\tif ( ! disableLineBreaks ) {\n\t\t\t\t\t\tonChange( insert( value, '\\n' ) );\n\t\t\t\t\t}\n\t\t\t\t} else if ( canSplit && isEmptyLine( value ) ) {\n\t\t\t\t\tsplitValue( value );\n\t\t\t\t} else {\n\t\t\t\t\tonChange( insertLineSeparator( value ) );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst { text, start, end } = value;\n\t\t\t\tconst canSplitAtEnd =\n\t\t\t\t\tonSplitAtEnd && start === end && end === text.length;\n\n\t\t\t\tif ( shiftKey || ( ! canSplit && ! canSplitAtEnd ) ) {\n\t\t\t\t\tif ( ! disableLineBreaks ) {\n\t\t\t\t\t\tonChange( insert( value, '\\n' ) );\n\t\t\t\t\t}\n\t\t\t\t} else if ( ! canSplit && canSplitAtEnd ) {\n\t\t\t\t\tonSplitAtEnd();\n\t\t\t\t} else if ( canSplit ) {\n\t\t\t\t\tsplitValue( value );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tonReplace,\n\t\t\tonSplit,\n\t\t\t__unstableMarkAutomaticChange,\n\t\t\tmultiline,\n\t\t\tsplitValue,\n\t\t\tonSplitAtEnd,\n\t\t]\n\t);\n\n\tconst onPaste = useCallback(\n\t\t( {\n\t\t\tvalue,\n\t\t\tonChange,\n\t\t\thtml,\n\t\t\tplainText,\n\t\t\tisInternal,\n\t\t\tfiles,\n\t\t\tactiveFormats,\n\t\t} ) => {\n\t\t\t// If the data comes from a rich text instance, we can directly use it\n\t\t\t// without filtering the data. The filters are only meant for externally\n\t\t\t// pasted content and remove inline styles.\n\t\t\tif ( isInternal ) {\n\t\t\t\tconst pastedValue = create( {\n\t\t\t\t\thtml,\n\t\t\t\t\tmultilineTag,\n\t\t\t\t\tmultilineWrapperTags:\n\t\t\t\t\t\tmultilineTag === 'li' ? [ 'ul', 'ol' ] : undefined,\n\t\t\t\t\tpreserveWhiteSpace,\n\t\t\t\t} );\n\t\t\t\taddActiveFormats( pastedValue, activeFormats );\n\t\t\t\tonChange( insert( value, pastedValue ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( pastePlainText ) {\n\t\t\t\tonChange( insert( value, create( { text: plainText } ) ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Only process file if no HTML is present.\n\t\t\t// Note: a pasted file may have the URL as plain text.\n\t\t\tif ( files && files.length && ! html ) {\n\t\t\t\tconst content = pasteHandler( {\n\t\t\t\t\tHTML: filePasteHandler( files ),\n\t\t\t\t\tmode: 'BLOCKS',\n\t\t\t\t\ttagName,\n\t\t\t\t\tpreserveWhiteSpace,\n\t\t\t\t} );\n\n\t\t\t\t// Allows us to ask for this information when we get a report.\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\twindow.console.log( 'Received items:\\n\\n', files );\n\n\t\t\t\tif ( onReplace && isEmpty( value ) ) {\n\t\t\t\t\tonReplace( content );\n\t\t\t\t} else {\n\t\t\t\t\tsplitValue( value, content );\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet mode = onReplace && onSplit ? 'AUTO' : 'INLINE';\n\n\t\t\t// Force the blocks mode when the user is pasting\n\t\t\t// on a new line & the content resembles a shortcode.\n\t\t\t// Otherwise it's going to be detected as inline\n\t\t\t// and the shortcode won't be replaced.\n\t\t\tif (\n\t\t\t\tmode === 'AUTO' &&\n\t\t\t\tisEmpty( value ) &&\n\t\t\t\tisShortcode( plainText )\n\t\t\t) {\n\t\t\t\tmode = 'BLOCKS';\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t__unstableEmbedURLOnPaste &&\n\t\t\t\tisEmpty( value ) &&\n\t\t\t\tisURL( plainText.trim() )\n\t\t\t) {\n\t\t\t\tmode = 'BLOCKS';\n\t\t\t}\n\n\t\t\tconst content = pasteHandler( {\n\t\t\t\tHTML: html,\n\t\t\t\tplainText,\n\t\t\t\tmode,\n\t\t\t\ttagName,\n\t\t\t\tpreserveWhiteSpace,\n\t\t\t} );\n\n\t\t\tif ( typeof content === 'string' ) {\n\t\t\t\tlet valueToInsert = create( { html: content } );\n\n\t\t\t\taddActiveFormats( valueToInsert, activeFormats );\n\n\t\t\t\t// If the content should be multiline, we should process text\n\t\t\t\t// separated by a line break as separate lines.\n\t\t\t\tif ( multilineTag ) {\n\t\t\t\t\tvalueToInsert = replace(\n\t\t\t\t\t\tvalueToInsert,\n\t\t\t\t\t\t/\\n+/g,\n\t\t\t\t\t\tLINE_SEPARATOR\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tonChange( insert( value, valueToInsert ) );\n\t\t\t} else if ( content.length > 0 ) {\n\t\t\t\tif ( onReplace && isEmpty( value ) ) {\n\t\t\t\t\tonReplace( content, content.length - 1, -1 );\n\t\t\t\t} else {\n\t\t\t\t\tsplitValue( value, content );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\ttagName,\n\t\t\tonReplace,\n\t\t\tonSplit,\n\t\t\tsplitValue,\n\t\t\t__unstableEmbedURLOnPaste,\n\t\t\tmultilineTag,\n\t\t\tpreserveWhiteSpace,\n\t\t\tpastePlainText,\n\t\t]\n\t);\n\n\tconst inputRule = useCallback(\n\t\t( value, valueToFormat ) => {\n\t\t\tif ( ! onReplace ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { start, text } = value;\n\t\t\tconst characterBefore = text.slice( start - 1, start );\n\n\t\t\t// The character right before the caret must be a plain space.\n\t\t\tif ( characterBefore !== ' ' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst trimmedTextBefore = text.slice( 0, start ).trim();\n\t\t\tconst prefixTransforms = getBlockTransforms( 'from' ).filter(\n\t\t\t\t( { type } ) => type === 'prefix'\n\t\t\t);\n\t\t\tconst transformation = findTransform(\n\t\t\t\tprefixTransforms,\n\t\t\t\t( { prefix } ) => {\n\t\t\t\t\treturn trimmedTextBefore === prefix;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif ( ! transformation ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst content = valueToFormat( slice( value, start, text.length ) );\n\t\t\tconst block = transformation.transform( content );\n\n\t\t\tonReplace( [ block ] );\n\t\t\t__unstableMarkAutomaticChange();\n\t\t},\n\t\t[ onReplace, __unstableMarkAutomaticChange ]\n\t);\n\n\tconst mergedRef = useMergeRefs( [ forwardedRef, fallbackRef ] );\n\n\tconst content = (\n\t\t<RichText\n\t\t\tclientId={ clientId }\n\t\t\tidentifier={ identifier }\n\t\t\tref={ mergedRef }\n\t\t\tvalue={ adjustedValue }\n\t\t\tonChange={ adjustedOnChange }\n\t\t\tselectionStart={ selectionStart }\n\t\t\tselectionEnd={ selectionEnd }\n\t\t\tonSelectionChange={ onSelectionChange }\n\t\t\ttagName={ tagName }\n\t\t\tplaceholder={ placeholder }\n\t\t\tallowedFormats={ adjustedAllowedFormats }\n\t\t\twithoutInteractiveFormatting={ withoutInteractiveFormatting }\n\t\t\tonEnter={ onEnter }\n\t\t\tonDelete={ onDelete }\n\t\t\tonPaste={ onPaste }\n\t\t\t__unstableIsSelected={ isSelected }\n\t\t\t__unstableInputRule={ inputRule }\n\t\t\t__unstableMultilineTag={ multilineTag }\n\t\t\t__unstableIsCaretWithinFormattedText={ isCaretWithinFormattedText }\n\t\t\t__unstableOnEnterFormattedText={ enterFormattedText }\n\t\t\t__unstableOnExitFormattedText={ exitFormattedText }\n\t\t\t__unstableOnCreateUndoLevel={ __unstableMarkLastChangeAsPersistent }\n\t\t\t__unstableMarkAutomaticChange={ __unstableMarkAutomaticChange }\n\t\t\t__unstableDidAutomaticChange={ didAutomaticChange }\n\t\t\t__unstableUndo={ undo }\n\t\t\t__unstableDisableFormats={ disableFormats }\n\t\t\tpreserveWhiteSpace={ preserveWhiteSpace }\n\t\t\tdisabled={ disabled }\n\t\t\tunstableOnFocus={ unstableOnFocus }\n\t\t\t__unstableAllowPrefixTransformations={\n\t\t\t\t__unstableAllowPrefixTransformations\n\t\t\t}\n\t\t\t__unstableMultilineRootTag={ __unstableMultilineRootTag }\n\t\t\t// Native props.\n\t\t\t{ ...nativeProps }\n\t\t\tblockIsSelected={\n\t\t\t\toriginalIsSelected !== undefined\n\t\t\t\t\t? originalIsSelected\n\t\t\t\t\t: blockIsSelected\n\t\t\t}\n\t\t\tshouldBlurOnUnmount={ shouldBlurOnUnmount }\n\t\t\t__unstableMobileNoFocusOnMount={ __unstableMobileNoFocusOnMount }\n\t\t\tdeleteEnter={ deleteEnter }\n\t\t\tplaceholderTextColor={ placeholderTextColor }\n\t\t\ttextAlign={ textAlign }\n\t\t\tselectionColor={ selectionColor }\n\t\t\ttagsToEliminate={ tagsToEliminate }\n\t\t\trootTagsToEliminate={ rootTagsToEliminate }\n\t\t\tdisableEditingMenu={ disableEditingMenu }\n\t\t\tfontSize={ fontSize }\n\t\t\tfontFamily={ fontFamily }\n\t\t\tfontWeight={ fontWeight }\n\t\t\tfontStyle={ fontStyle }\n\t\t\tminWidth={ minWidth }\n\t\t\tmaxWidth={ maxWidth }\n\t\t\tonBlur={ onBlur }\n\t\t\tsetRef={ setRef }\n\t\t\t// Props to be set on the editable container are destructured on the\n\t\t\t// element itself for web (see below), but passed through rich text\n\t\t\t// for native.\n\t\t\tid={ props.id }\n\t\t\tstyle={ props.style }\n\t\t>\n\t\t\t{ ( {\n\t\t\t\tisSelected: nestedIsSelected,\n\t\t\t\tvalue,\n\t\t\t\tonChange,\n\t\t\t\tonFocus,\n\t\t\t\teditableProps,\n\t\t\t\teditableTagName: TagName,\n\t\t\t} ) => (\n\t\t\t\t<>\n\t\t\t\t\t{ children && children( { value, onChange, onFocus } ) }\n\t\t\t\t\t{ nestedIsSelected && hasFormats && (\n\t\t\t\t\t\t<FormatToolbarContainer\n\t\t\t\t\t\t\tinline={ inlineToolbar }\n\t\t\t\t\t\t\tanchorRef={ fallbackRef.current }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ nestedIsSelected && <RemoveBrowserShortcuts /> }\n\t\t\t\t\t<Autocomplete\n\t\t\t\t\t\tonReplace={ onReplace }\n\t\t\t\t\t\tcompleters={ autocompleters }\n\t\t\t\t\t\trecord={ value }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\tisSelected={ nestedIsSelected }\n\t\t\t\t\t\tcontentRef={ fallbackRef }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ( { listBoxId, activeId, onKeyDown } ) => (\n\t\t\t\t\t\t\t<TagName\n\t\t\t\t\t\t\t\t{ ...editableProps }\n\t\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t\tprops.style\n\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\t...props.style,\n\t\t\t\t\t\t\t\t\t\t\t\t...editableProps.style,\n\t\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t\t: editableProps.style\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t\tclasses,\n\t\t\t\t\t\t\t\t\tprops.className,\n\t\t\t\t\t\t\t\t\teditableProps.className,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'keep-placeholder-on-focus': keepPlaceholderOnFocus,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\taria-autocomplete={\n\t\t\t\t\t\t\t\t\tlistBoxId ? 'list' : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\taria-owns={ listBoxId }\n\t\t\t\t\t\t\t\taria-activedescendant={ activeId }\n\t\t\t\t\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\t\t\t\t\tonKeyDown( event );\n\t\t\t\t\t\t\t\t\teditableProps.onKeyDown( event );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Autocomplete>\n\t\t\t\t</>\n\t\t\t) }\n\t\t</RichText>\n\t);\n\n\tif ( ! wrapperClassName ) {\n\t\treturn content;\n\t}\n\n\tdeprecated( 'wp.blockEditor.RichText wrapperClassName prop', {\n\t\tsince: '5.4',\n\t\talternative: 'className prop or create your own wrapper div',\n\t} );\n\n\treturn (\n\t\t<div className={ classnames( wrapperClasses, wrapperClassName ) }>\n\t\t\t{ content }\n\t\t</div>\n\t);\n}\n\nconst ForwardedRichTextContainer = forwardRef( RichTextWrapper );\n\nForwardedRichTextContainer.Content = ( {\n\tvalue,\n\ttagName: Tag,\n\tmultiline,\n\t...props\n} ) => {\n\t// Handle deprecated `children` and `node` sources.\n\tif ( Array.isArray( value ) ) {\n\t\tvalue = childrenSource.toHTML( value );\n\t}\n\n\tconst MultilineTag = getMultilineTag( multiline );\n\n\tif ( ! value && MultilineTag ) {\n\t\tvalue = `<${ MultilineTag }></${ MultilineTag }>`;\n\t}\n\n\tconst content = <RawHTML>{ value }</RawHTML>;\n\n\tif ( Tag ) {\n\t\treturn <Tag { ...omit( props, [ 'format' ] ) }>{ content }</Tag>;\n\t}\n\n\treturn content;\n};\n\nForwardedRichTextContainer.isEmpty = ( value ) => {\n\treturn ! value || value.length === 0;\n};\n\nForwardedRichTextContainer.Content.defaultProps = {\n\tformat: 'string',\n\tvalue: '',\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/rich-text/README.md\n */\nexport default ForwardedRichTextContainer;\nexport { RichTextShortcut } from './shortcut';\nexport { RichTextToolbarButton } from './toolbar-button';\nexport { __unstableRichTextInputEvent } from './input-event';\n"]}