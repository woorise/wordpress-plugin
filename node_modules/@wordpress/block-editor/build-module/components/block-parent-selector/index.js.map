{"version":3,"sources":["@wordpress/block-editor/src/components/block-parent-selector/index.js"],"names":["getBlockType","store","blocksStore","ToolbarButton","useSelect","useDispatch","__","sprintf","useRef","BlockIcon","useShowMoversGestures","blockEditorStore","BlockParentSelector","selectBlock","toggleBlockHighlight","select","getBlockName","getBlockParents","getSelectedBlockClientId","getSettings","hasBlockSupport","selectedBlockClientId","parents","_firstParentClientId","length","parentBlockName","_parentBlockType","settings","parentBlockType","firstParentClientId","shouldHide","hasReducedUI","nodeRef","ref","onChange","isFocused","showMoversGestures","gestures","undefined","title","icon"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { getBlockType, store as blocksStore } from '@wordpress/blocks';\nimport { ToolbarButton } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { useShowMoversGestures } from '../block-toolbar/utils';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Block parent selector component, displaying the hierarchy of the\n * current block selection as a single icon to \"go up\" a level.\n *\n * @return {WPComponent} Parent block selector.\n */\nexport default function BlockParentSelector() {\n\tconst { selectBlock, toggleBlockHighlight } = useDispatch(\n\t\tblockEditorStore\n\t);\n\tconst {\n\t\tparentBlockType,\n\t\tfirstParentClientId,\n\t\tshouldHide,\n\t\thasReducedUI,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockName,\n\t\t\tgetBlockParents,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetSettings,\n\t\t} = select( blockEditorStore );\n\t\tconst { hasBlockSupport } = select( blocksStore );\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst parents = getBlockParents( selectedBlockClientId );\n\t\tconst _firstParentClientId = parents[ parents.length - 1 ];\n\t\tconst parentBlockName = getBlockName( _firstParentClientId );\n\t\tconst _parentBlockType = getBlockType( parentBlockName );\n\t\tconst settings = getSettings();\n\t\treturn {\n\t\t\tparentBlockType: _parentBlockType,\n\t\t\tfirstParentClientId: _firstParentClientId,\n\t\t\tshouldHide: ! hasBlockSupport(\n\t\t\t\t_parentBlockType,\n\t\t\t\t'__experimentalParentSelector',\n\t\t\t\ttrue\n\t\t\t),\n\t\t\thasReducedUI: settings.hasReducedUI,\n\t\t};\n\t}, [] );\n\n\t// Allows highlighting the parent block outline when focusing or hovering\n\t// the parent block selector within the child.\n\tconst nodeRef = useRef();\n\tconst { gestures: showMoversGestures } = useShowMoversGestures( {\n\t\tref: nodeRef,\n\t\tonChange( isFocused ) {\n\t\t\tif ( isFocused && hasReducedUI ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttoggleBlockHighlight( firstParentClientId, isFocused );\n\t\t},\n\t} );\n\n\tif ( shouldHide ) {\n\t\treturn null;\n\t}\n\n\tif ( firstParentClientId !== undefined ) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"block-editor-block-parent-selector\"\n\t\t\t\tkey={ firstParentClientId }\n\t\t\t\tref={ nodeRef }\n\t\t\t\t{ ...showMoversGestures }\n\t\t\t>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName=\"block-editor-block-parent-selector__button\"\n\t\t\t\t\tonClick={ () => selectBlock( firstParentClientId ) }\n\t\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t\t/* translators: %s: Name of the block's parent. */\n\t\t\t\t\t\t__( 'Select %s' ),\n\t\t\t\t\t\tparentBlockType.title\n\t\t\t\t\t) }\n\t\t\t\t\tshowTooltip\n\t\t\t\t\ticon={ <BlockIcon icon={ parentBlockType.icon } /> }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n}\n"]}