{"version":3,"sources":["@wordpress/block-editor/src/components/block-navigation/block-contents.js"],"names":["classnames","useSelect","forwardRef","useBlockNavigationContext","BlockNavigationBlockSlot","BlockNavigationBlockSelectButton","BlockDraggable","store","blockEditorStore","BlockNavigationBlockContents","ref","onClick","block","isSelected","position","siblingBlockCount","level","props","__experimentalFeatures","blockDropTarget","clientId","select","getBlockRootClientId","hasBlockMovingClientId","getSelectedBlockClientId","rootClientId","blockMovingClientId","selectedBlockInBlockEditor","isBlockMoveTarget","dropTargetRootClientId","dropTargetClientId","dropPosition","isDroppingBefore","isDroppingAfter","isDroppingToInnerBlocks","className","draggable","onDragStart","onDragEnd"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useBlockNavigationContext } from './context';\nimport BlockNavigationBlockSlot from './block-slot';\nimport BlockNavigationBlockSelectButton from './block-select-button';\nimport BlockDraggable from '../block-draggable';\nimport { store as blockEditorStore } from '../../store';\n\nconst BlockNavigationBlockContents = forwardRef(\n\t(\n\t\t{\n\t\t\tonClick,\n\t\t\tblock,\n\t\t\tisSelected,\n\t\t\tposition,\n\t\t\tsiblingBlockCount,\n\t\t\tlevel,\n\t\t\t...props\n\t\t},\n\t\tref\n\t) => {\n\t\tconst {\n\t\t\t__experimentalFeatures,\n\t\t\tblockDropTarget = {},\n\t\t} = useBlockNavigationContext();\n\n\t\tconst { clientId } = block;\n\n\t\tconst {\n\t\t\trootClientId,\n\t\t\tblockMovingClientId,\n\t\t\tselectedBlockInBlockEditor,\n\t\t} = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\tgetBlockRootClientId,\n\t\t\t\t\thasBlockMovingClientId,\n\t\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\t} = select( blockEditorStore );\n\t\t\t\treturn {\n\t\t\t\t\trootClientId: getBlockRootClientId( clientId ) || '',\n\t\t\t\t\tblockMovingClientId: hasBlockMovingClientId(),\n\t\t\t\t\tselectedBlockInBlockEditor: getSelectedBlockClientId(),\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ clientId ]\n\t\t);\n\n\t\tconst isBlockMoveTarget =\n\t\t\tblockMovingClientId && selectedBlockInBlockEditor === clientId;\n\n\t\tconst {\n\t\t\trootClientId: dropTargetRootClientId,\n\t\t\tclientId: dropTargetClientId,\n\t\t\tdropPosition,\n\t\t} = blockDropTarget;\n\n\t\tconst isDroppingBefore =\n\t\t\tdropTargetRootClientId === rootClientId &&\n\t\t\tdropTargetClientId === clientId &&\n\t\t\tdropPosition === 'top';\n\t\tconst isDroppingAfter =\n\t\t\tdropTargetRootClientId === rootClientId &&\n\t\t\tdropTargetClientId === clientId &&\n\t\t\tdropPosition === 'bottom';\n\t\tconst isDroppingToInnerBlocks =\n\t\t\tdropTargetRootClientId === clientId && dropPosition === 'inside';\n\n\t\tconst className = classnames(\n\t\t\t'block-editor-block-navigation-block-contents',\n\t\t\t{\n\t\t\t\t'is-dropping-before': isDroppingBefore || isBlockMoveTarget,\n\t\t\t\t'is-dropping-after': isDroppingAfter,\n\t\t\t\t'is-dropping-to-inner-blocks': isDroppingToInnerBlocks,\n\t\t\t}\n\t\t);\n\n\t\treturn (\n\t\t\t<BlockDraggable\n\t\t\t\tclientIds={ [ block.clientId ] }\n\t\t\t\telementId={ `block-navigation-block-${ block.clientId }` }\n\t\t\t>\n\t\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) =>\n\t\t\t\t\t__experimentalFeatures ? (\n\t\t\t\t\t\t<BlockNavigationBlockSlot\n\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\tclassName={ className }\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\tsiblingBlockCount={ siblingBlockCount }\n\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\tdraggable={ draggable && __experimentalFeatures }\n\t\t\t\t\t\t\tonDragStart={ onDragStart }\n\t\t\t\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<BlockNavigationBlockSelectButton\n\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\tclassName={ className }\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\tonClick={ onClick }\n\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\tsiblingBlockCount={ siblingBlockCount }\n\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\tdraggable={ draggable && __experimentalFeatures }\n\t\t\t\t\t\t\tonDragStart={ onDragStart }\n\t\t\t\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t/>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</BlockDraggable>\n\t\t);\n\t}\n);\n\nexport default BlockNavigationBlockContents;\n"]}