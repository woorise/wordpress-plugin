/**
 * WordPress dependencies
 */
import { useSelect, useDispatch } from '@wordpress/data';
import { useRefEffect } from '@wordpress/compose';
/**
 * Internal dependencies
 */

import { store as blockEditorStore } from '../../../store';
/**
 * Allows navigation mode to be exited by clicking in the selected block.
 *
 * @param {string} clientId Block client ID.
 */

export function useNavModeExit(clientId) {
  var isEnabled = useSelect(function (select) {
    var _select = select(blockEditorStore),
        isNavigationMode = _select.isNavigationMode,
        isBlockSelected = _select.isBlockSelected;

    return isNavigationMode() && isBlockSelected(clientId);
  }, []);

  var _useDispatch = useDispatch(blockEditorStore),
      setNavigationMode = _useDispatch.setNavigationMode;

  return useRefEffect(function (node) {
    if (!isEnabled) {
      return;
    }

    function onMouseDown() {
      setNavigationMode(false);
    }

    node.addEventListener('mousedown', onMouseDown);
    return function () {
      node.addEventListener('mousedown', onMouseDown);
    };
  }, [isEnabled]);
}
//# sourceMappingURL=use-nav-mode-exit.js.map