{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/use-block-props/use-nav-mode-exit.js"],"names":["useSelect","useDispatch","useRefEffect","store","blockEditorStore","useNavModeExit","clientId","isEnabled","select","isNavigationMode","isBlockSelected","setNavigationMode","node","onMouseDown","addEventListener"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,SAAT,EAAoBC,WAApB,QAAuC,iBAAvC;AACA,SAASC,YAAT,QAA6B,oBAA7B;AAEA;AACA;AACA;;AACA,SAASC,KAAK,IAAIC,gBAAlB,QAA0C,gBAA1C;AAEA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,cAAT,CAAyBC,QAAzB,EAAoC;AAC1C,MAAMC,SAAS,GAAGP,SAAS,CAAE,UAAEQ,MAAF,EAAc;AAAA,kBACIA,MAAM,CACnDJ,gBADmD,CADV;AAAA,QAClCK,gBADkC,WAClCA,gBADkC;AAAA,QAChBC,eADgB,WAChBA,eADgB;;AAI1C,WAAOD,gBAAgB,MAAMC,eAAe,CAAEJ,QAAF,CAA5C;AACA,GAL0B,EAKxB,EALwB,CAA3B;;AAD0C,qBAOZL,WAAW,CAAEG,gBAAF,CAPC;AAAA,MAOlCO,iBAPkC,gBAOlCA,iBAPkC;;AAS1C,SAAOT,YAAY,CAClB,UAAEU,IAAF,EAAY;AACX,QAAK,CAAEL,SAAP,EAAmB;AAClB;AACA;;AAED,aAASM,WAAT,GAAuB;AACtBF,MAAAA,iBAAiB,CAAE,KAAF,CAAjB;AACA;;AAEDC,IAAAA,IAAI,CAACE,gBAAL,CAAuB,WAAvB,EAAoCD,WAApC;AAEA,WAAO,YAAM;AACZD,MAAAA,IAAI,CAACE,gBAAL,CAAuB,WAAvB,EAAoCD,WAApC;AACA,KAFD;AAGA,GAfiB,EAgBlB,CAAEN,SAAF,CAhBkB,CAAnB;AAkBA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Allows navigation mode to be exited by clicking in the selected block.\n *\n * @param {string} clientId Block client ID.\n */\nexport function useNavModeExit( clientId ) {\n\tconst isEnabled = useSelect( ( select ) => {\n\t\tconst { isNavigationMode, isBlockSelected } = select(\n\t\t\tblockEditorStore\n\t\t);\n\t\treturn isNavigationMode() && isBlockSelected( clientId );\n\t}, [] );\n\tconst { setNavigationMode } = useDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! isEnabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction onMouseDown() {\n\t\t\t\tsetNavigationMode( false );\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\n\t\t\treturn () => {\n\t\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\t\t\t};\n\t\t},\n\t\t[ isEnabled ]\n\t);\n}\n"]}