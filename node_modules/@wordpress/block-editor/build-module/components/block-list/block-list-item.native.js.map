{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/block-list-item.native.js"],"names":["View","Dimensions","Component","withSelect","compose","ReadableContentView","alignmentHelpers","BlockListBlock","BlockInsertionPoint","styles","store","blockEditorStore","stretchStyle","flex","BlockListItem","props","blockAlignment","marginHorizontal","parentBlockAlignment","hasParents","blockName","parentBlockName","parentWidth","blockWidth","isFullWidth","isWideWidth","isWider","isContainerRelated","screenWidth","Math","floor","get","width","isScreenWidthEqual","readableContentViewStyle","fullAlignment","paddingHorizontal","fullAlignmentPadding","paddingLeft","clientId","isReadOnly","shouldShowInsertionPointBefore","shouldShowInsertionPointAfter","contentResizeMode","shouldShowInnerBlockAppender","restProps","maxWidth","getContentStyles","onLayout","getMarginHorizontal","select","rootClientId","isStackedHorizontally","getBlockOrder","getBlockInsertionPoint","isBlockInsertionPointVisible","getSettings","getBlockParents","__unstableGetBlockWithoutInnerBlocks","blockClientIds","insertionPoint","blockInsertionPointIsVisible","length","index","readOnly","block","attributes","name","align","parents","parentBlock"],"mappings":";;;;;;;;;;;;;AAAA;AACA;AACA;AACA,SAASA,IAAT,EAAeC,UAAf,QAAiC,cAAjC;AAEA;AACA;AACA;;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,mBAAT,EAA8BC,gBAA9B,QAAsD,uBAAtD;AAEA;AACA;AACA;;AACA,OAAOC,cAAP,MAA2B,SAA3B;AACA,OAAOC,mBAAP,MAAgC,mBAAhC;AACA,OAAOC,MAAP,MAAmB,+BAAnB;AACA,SAASC,KAAK,IAAIC,gBAAlB,QAA0C,aAA1C;AAEA,IAAMC,YAAY,GAAG;AACpBC,EAAAA,IAAI,EAAE;AADc,CAArB;AAIA,WAAaC,aAAb;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,WACC,+BAAsB;AAAA,wBAUjB,KAAKC,KAVY;AAAA,UAEpBC,cAFoB,eAEpBA,cAFoB;AAAA,UAGpBC,gBAHoB,eAGpBA,gBAHoB;AAAA,UAIpBC,oBAJoB,eAIpBA,oBAJoB;AAAA,UAKpBC,UALoB,eAKpBA,UALoB;AAAA,UAMpBC,SANoB,eAMpBA,SANoB;AAAA,UAOpBC,eAPoB,eAOpBA,eAPoB;AAAA,UAQpBC,WARoB,eAQpBA,WARoB;AAAA,UASpBC,UAToB,eASpBA,UAToB;AAAA,UAYpBC,WAZoB,GAgBjBlB,gBAhBiB,CAYpBkB,WAZoB;AAAA,UAapBC,WAboB,GAgBjBnB,gBAhBiB,CAapBmB,WAboB;AAAA,UAcpBC,OAdoB,GAgBjBpB,gBAhBiB,CAcpBoB,OAdoB;AAAA,UAepBC,kBAfoB,GAgBjBrB,gBAhBiB,CAepBqB,kBAfoB;;AAkBrB,UAAKH,WAAW,CAAER,cAAF,CAAhB,EAAqC;AACpC,YAAK,CAAEG,UAAP,EAAoB;AACnB,iBAAO,CAAP;AACA;;AACD,eAAOF,gBAAP;AACA;;AACD,UAAKQ,WAAW,CAAET,cAAF,CAAhB,EAAqC;AACpC,eAAOC,gBAAP;AACA;;AAED,UAAMW,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAY7B,UAAU,CAAC8B,GAAX,CAAgB,QAAhB,EAA2BC,KAAvC,CAApB;;AAEA,UACCR,WAAW,CAAEN,oBAAF,CAAX,IACA,CAAEQ,OAAO,CAAEH,UAAF,EAAc,QAAd,CAFV,EAGE;AACD,YACCI,kBAAkB,CAAEP,SAAF,CAAlB,IACAM,OAAO,CAAEE,WAAF,EAAe,QAAf,CAFR,EAGE;AACD,iBAAOX,gBAAP;AACA;;AACD,eAAOA,gBAAgB,GAAG,CAA1B;AACA;;AAED,UACCU,kBAAkB,CAAEN,eAAF,CAAlB,IACA,CAAEM,kBAAkB,CAAEP,SAAF,CAFrB,EAGE;AACD,YAAMa,kBAAkB,GAAGX,WAAW,KAAKM,WAA3C;;AACA,YAAKK,kBAAkB,IAAIP,OAAO,CAAEE,WAAF,EAAe,QAAf,CAAlC,EAA8D;AAC7D,iBAAOX,gBAAgB,GAAG,CAA1B;AACA;AACD;;AAED,aAAOA,gBAAP;AACA;AAvDF;AAAA;AAAA,WAyDC,0BAAkBiB,wBAAlB,EAA6C;AAAA,yBAMxC,KAAKnB,KANmC;AAAA,UAE3CC,cAF2C,gBAE3CA,cAF2C;AAAA,UAG3CI,SAH2C,gBAG3CA,SAH2C;AAAA,UAI3CD,UAJ2C,gBAI3CA,UAJ2C;AAAA,UAK3CE,eAL2C,gBAK3CA,eAL2C;AAAA,UAOpCG,WAPoC,GAOAlB,gBAPA,CAOpCkB,WAPoC;AAAA,UAOvBG,kBAPuB,GAOArB,gBAPA,CAOvBqB,kBAPuB;AAS5C,aAAO,CACNO,wBADM,EAENV,WAAW,CAAER,cAAF,CAAX,IACC,CAAEG,UADH,IACiB;AACfa,QAAAA,KAAK,EAAEvB,MAAM,CAAC0B,aAAP,CAAqBH;AADb,OAHX,EAMN,CAAEhB,cAAF,IACCG,UADD,IAEC,CAAEQ,kBAAkB,CAAEN,eAAF,CAFrB,IAGCM,kBAAkB,CAAEP,SAAF,CAHnB,IAGoC;AAClCgB,QAAAA,iBAAiB,EAAE3B,MAAM,CAAC4B,oBAAP,CAA4BC;AADb,OAT9B,CAAP;AAaA;AA/EF;AAAA;AAAA,WAiFC,kBAAS;AAAA,yBAcJ,KAAKvB,KAdD;AAAA,UAEPC,cAFO,gBAEPA,cAFO;AAAA,UAGPuB,QAHO,gBAGPA,QAHO;AAAA,UAIPC,UAJO,gBAIPA,UAJO;AAAA,UAKPC,8BALO,gBAKPA,8BALO;AAAA,UAMPC,6BANO,gBAMPA,6BANO;AAAA,UAOPC,iBAPO,gBAOPA,iBAPO;AAAA,UAQPC,4BARO,gBAQPA,4BARO;AAAA,UASPtB,WATO,gBASPA,WATO;AAAA,UAUPL,gBAVO,gBAUPA,gBAVO;AAAA,UAWPG,SAXO,gBAWPA,SAXO;AAAA,UAYPG,UAZO,gBAYPA,UAZO;AAAA,UAaJsB,SAbI;;AAeR,UAAMX,wBAAwB,GAC7BS,iBAAiB,KAAK,SAAtB,IAAmC/B,YADpC;AAfQ,UAiBAe,kBAjBA,GAiBuBrB,gBAjBvB,CAiBAqB,kBAjBA;;AAmBR,UAAK,CAAEJ,UAAP,EAAoB;AACnB,eAAO,IAAP;AACA;;AAED,aACC,cAAC,mBAAD;AACC,QAAA,KAAK,EAAGP,cADT;AAEC,QAAA,KAAK,EAAG,CACPkB,wBADO,EAEPP,kBAAkB,CAAEP,SAAF,CAAlB,IACCE,WADD,IACgB;AACdwB,UAAAA,QAAQ,EAAExB,WAAW,GAAG,IAAIL;AADd,SAHT;AAFT,SAUC,cAAC,IAAD;AACC,QAAA,KAAK,EAAG,KAAK8B,gBAAL,CAAuBb,wBAAvB,CADT;AAEC,QAAA,aAAa,EAAGM,UAAU,GAAG,UAAH,GAAgB,MAF3C;AAGC,QAAA,QAAQ,EAAG,KAAKQ;AAHjB,SAKGP,8BAA8B,IAC/B,cAAC,mBAAD,OANF,EAQC,cAAC,cAAD;AACC,QAAA,GAAG,EAAGF,QADP;AAEC,QAAA,SAAS,EAAG,KAFb;AAGC,QAAA,QAAQ,EAAGA,QAHZ;AAIC,QAAA,WAAW,EAAGjB;AAJf,SAKMuB,SALN;AAMC,QAAA,gBAAgB,EAAG,KAAKI,mBAAL,EANpB;AAOC,QAAA,UAAU,EAAG1B;AAPd,SARD,EAiBG,CAAEqB,4BAA4B,EAA9B,IACDF,6BADC,IAEA,cAAC,mBAAD,OAnBH,CAVD,CADD;AAmCA;AA3IF;;AAAA;AAAA,EAAmCxC,SAAnC;AA8IA,eAAeE,OAAO,CAAE,CACvBD,UAAU,CACT,UAAE+C,MAAF,QAAiE;AAAA,MAArDC,YAAqD,QAArDA,YAAqD;AAAA,MAAvCC,qBAAuC,QAAvCA,qBAAuC;AAAA,MAAhBb,QAAgB,QAAhBA,QAAgB;;AAAA,gBAQ5DW,MAAM,CAAEvC,gBAAF,CARsD;AAAA,MAE/D0C,aAF+D,WAE/DA,aAF+D;AAAA,MAG/DC,sBAH+D,WAG/DA,sBAH+D;AAAA,MAI/DC,4BAJ+D,WAI/DA,4BAJ+D;AAAA,MAK/DC,WAL+D,WAK/DA,WAL+D;AAAA,MAM/DC,eAN+D,WAM/DA,eAN+D;AAAA,MAO/DC,oCAP+D,WAO/DA,oCAP+D;;AAUhE,MAAMC,cAAc,GAAGN,aAAa,CAAEF,YAAF,CAApC;AACA,MAAMS,cAAc,GAAGN,sBAAsB,EAA7C;AACA,MAAMO,4BAA4B,GAAGN,4BAA4B,EAAjE;AACA,MAAMd,8BAA8B,GACnC,CAAEW,qBAAF,IACAS,4BADA,IAEAD,cAAc,CAACT,YAAf,KAAgCA,YAFhC,MAGA;AACEQ,EAAAA,cAAc,CAACG,MAAf,KAA0B,CAA1B,IACD;AACAH,EAAAA,cAAc,CAAEC,cAAc,CAACG,KAAjB,CAAd,KAA2CxB,QAN5C,CADD;AASA,MAAMG,6BAA6B,GAClC,CAAEU,qBAAF,IACAS,4BADA,IAEAD,cAAc,CAACT,YAAf,KAAgCA,YAFhC,IAGA;AACAQ,EAAAA,cAAc,CAACG,MAAf,KAA0BF,cAAc,CAACG,KAJzC,IAKA;AACAJ,EAAAA,cAAc,CAAEC,cAAc,CAACG,KAAf,GAAuB,CAAzB,CAAd,KAA+CxB,QAPhD;AASA,MAAMC,UAAU,GAAGgB,WAAW,GAAGQ,QAAjC;;AAEA,MAAMC,KAAK,GAAGP,oCAAoC,CAAEnB,QAAF,CAAlD;;AAjCgE,cAkCnC0B,KAAK,IAAI,EAlC0B;AAAA,MAkCxDC,UAlCwD,SAkCxDA,UAlCwD;AAAA,MAkC5CC,IAlC4C,SAkC5CA,IAlC4C;;AAAA,cAmC9CD,UAAU,IAAI,EAnCgC;AAAA,MAmCxDE,KAnCwD,SAmCxDA,KAnCwD;;AAoChE,MAAMC,OAAO,GAAGZ,eAAe,CAAElB,QAAF,EAAY,IAAZ,CAA/B;AACA,MAAMpB,UAAU,GAAG,CAAC,CAAEkD,OAAO,CAACP,MAA9B;AACA,MAAMQ,WAAW,GAAGnD,UAAU,GAC3BuC,oCAAoC,CAAEW,OAAO,CAAE,CAAF,CAAT,CADT,GAE3B,EAFH;;AAtCgE,cA0C/D,CAAAC,WAAW,SAAX,IAAAA,WAAW,WAAX,YAAAA,WAAW,CAAEJ,UAAb,KAA2B,EA1CoC;AAAA,MAyCjDhD,oBAzCiD,SAyCxDkD,KAzCwD;;AAAA,cA2C9BE,WAAW,IAAI,EA3Ce;AAAA,MA2ClDjD,eA3CkD,SA2CxD8C,IA3CwD;;AA6ChE,SAAO;AACN1B,IAAAA,8BAA8B,EAA9BA,8BADM;AAENC,IAAAA,6BAA6B,EAA7BA,6BAFM;AAGNF,IAAAA,UAAU,EAAVA,UAHM;AAINrB,IAAAA,UAAU,EAAVA,UAJM;AAKNH,IAAAA,cAAc,EAAEoD,KALV;AAMNlD,IAAAA,oBAAoB,EAApBA,oBANM;AAONE,IAAAA,SAAS,EAAE+C,IAPL;AAQN9C,IAAAA,eAAe,EAAfA;AARM,GAAP;AAUA,CAxDQ,CADa,CAAF,CAAP,CA2DVP,aA3DU,CAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Dimensions } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { ReadableContentView, alignmentHelpers } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockListBlock from './block';\nimport BlockInsertionPoint from './insertion-point';\nimport styles from './block-list-item.native.scss';\nimport { store as blockEditorStore } from '../../store';\n\nconst stretchStyle = {\n\tflex: 1,\n};\n\nexport class BlockListItem extends Component {\n\tgetMarginHorizontal() {\n\t\tconst {\n\t\t\tblockAlignment,\n\t\t\tmarginHorizontal,\n\t\t\tparentBlockAlignment,\n\t\t\thasParents,\n\t\t\tblockName,\n\t\t\tparentBlockName,\n\t\t\tparentWidth,\n\t\t\tblockWidth,\n\t\t} = this.props;\n\t\tconst {\n\t\t\tisFullWidth,\n\t\t\tisWideWidth,\n\t\t\tisWider,\n\t\t\tisContainerRelated,\n\t\t} = alignmentHelpers;\n\n\t\tif ( isFullWidth( blockAlignment ) ) {\n\t\t\tif ( ! hasParents ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn marginHorizontal;\n\t\t}\n\t\tif ( isWideWidth( blockAlignment ) ) {\n\t\t\treturn marginHorizontal;\n\t\t}\n\n\t\tconst screenWidth = Math.floor( Dimensions.get( 'window' ).width );\n\n\t\tif (\n\t\t\tisFullWidth( parentBlockAlignment ) &&\n\t\t\t! isWider( blockWidth, 'medium' )\n\t\t) {\n\t\t\tif (\n\t\t\t\tisContainerRelated( blockName ) ||\n\t\t\t\tisWider( screenWidth, 'mobile' )\n\t\t\t) {\n\t\t\t\treturn marginHorizontal;\n\t\t\t}\n\t\t\treturn marginHorizontal * 2;\n\t\t}\n\n\t\tif (\n\t\t\tisContainerRelated( parentBlockName ) &&\n\t\t\t! isContainerRelated( blockName )\n\t\t) {\n\t\t\tconst isScreenWidthEqual = parentWidth === screenWidth;\n\t\t\tif ( isScreenWidthEqual || isWider( screenWidth, 'mobile' ) ) {\n\t\t\t\treturn marginHorizontal * 2;\n\t\t\t}\n\t\t}\n\n\t\treturn marginHorizontal;\n\t}\n\n\tgetContentStyles( readableContentViewStyle ) {\n\t\tconst {\n\t\t\tblockAlignment,\n\t\t\tblockName,\n\t\t\thasParents,\n\t\t\tparentBlockName,\n\t\t} = this.props;\n\t\tconst { isFullWidth, isContainerRelated } = alignmentHelpers;\n\n\t\treturn [\n\t\t\treadableContentViewStyle,\n\t\t\tisFullWidth( blockAlignment ) &&\n\t\t\t\t! hasParents && {\n\t\t\t\t\twidth: styles.fullAlignment.width,\n\t\t\t\t},\n\t\t\t! blockAlignment &&\n\t\t\t\thasParents &&\n\t\t\t\t! isContainerRelated( parentBlockName ) &&\n\t\t\t\tisContainerRelated( blockName ) && {\n\t\t\t\t\tpaddingHorizontal: styles.fullAlignmentPadding.paddingLeft,\n\t\t\t\t},\n\t\t];\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tblockAlignment,\n\t\t\tclientId,\n\t\t\tisReadOnly,\n\t\t\tshouldShowInsertionPointBefore,\n\t\t\tshouldShowInsertionPointAfter,\n\t\t\tcontentResizeMode,\n\t\t\tshouldShowInnerBlockAppender,\n\t\t\tparentWidth,\n\t\t\tmarginHorizontal,\n\t\t\tblockName,\n\t\t\tblockWidth,\n\t\t\t...restProps\n\t\t} = this.props;\n\t\tconst readableContentViewStyle =\n\t\t\tcontentResizeMode === 'stretch' && stretchStyle;\n\t\tconst { isContainerRelated } = alignmentHelpers;\n\n\t\tif ( ! blockWidth ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<ReadableContentView\n\t\t\t\talign={ blockAlignment }\n\t\t\t\tstyle={ [\n\t\t\t\t\treadableContentViewStyle,\n\t\t\t\t\tisContainerRelated( blockName ) &&\n\t\t\t\t\t\tparentWidth && {\n\t\t\t\t\t\t\tmaxWidth: parentWidth + 2 * marginHorizontal,\n\t\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t>\n\t\t\t\t<View\n\t\t\t\t\tstyle={ this.getContentStyles( readableContentViewStyle ) }\n\t\t\t\t\tpointerEvents={ isReadOnly ? 'box-only' : 'auto' }\n\t\t\t\t\tonLayout={ this.onLayout }\n\t\t\t\t>\n\t\t\t\t\t{ shouldShowInsertionPointBefore && (\n\t\t\t\t\t\t<BlockInsertionPoint />\n\t\t\t\t\t) }\n\t\t\t\t\t<BlockListBlock\n\t\t\t\t\t\tkey={ clientId }\n\t\t\t\t\t\tshowTitle={ false }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\tparentWidth={ parentWidth }\n\t\t\t\t\t\t{ ...restProps }\n\t\t\t\t\t\tmarginHorizontal={ this.getMarginHorizontal() }\n\t\t\t\t\t\tblockWidth={ blockWidth }\n\t\t\t\t\t/>\n\t\t\t\t\t{ ! shouldShowInnerBlockAppender() &&\n\t\t\t\t\t\tshouldShowInsertionPointAfter && (\n\t\t\t\t\t\t\t<BlockInsertionPoint />\n\t\t\t\t\t\t) }\n\t\t\t\t</View>\n\t\t\t</ReadableContentView>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect(\n\t\t( select, { rootClientId, isStackedHorizontally, clientId } ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetBlockInsertionPoint,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetSettings,\n\t\t\t\tgetBlockParents,\n\t\t\t\t__unstableGetBlockWithoutInnerBlocks,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst blockClientIds = getBlockOrder( rootClientId );\n\t\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\t\tconst blockInsertionPointIsVisible = isBlockInsertionPointVisible();\n\t\t\tconst shouldShowInsertionPointBefore =\n\t\t\t\t! isStackedHorizontally &&\n\t\t\t\tblockInsertionPointIsVisible &&\n\t\t\t\tinsertionPoint.rootClientId === rootClientId &&\n\t\t\t\t// if list is empty, show the insertion point (via the default appender)\n\t\t\t\t( blockClientIds.length === 0 ||\n\t\t\t\t\t// or if the insertion point is right before the denoted block\n\t\t\t\t\tblockClientIds[ insertionPoint.index ] === clientId );\n\n\t\t\tconst shouldShowInsertionPointAfter =\n\t\t\t\t! isStackedHorizontally &&\n\t\t\t\tblockInsertionPointIsVisible &&\n\t\t\t\tinsertionPoint.rootClientId === rootClientId &&\n\t\t\t\t// if the insertion point is at the end of the list\n\t\t\t\tblockClientIds.length === insertionPoint.index &&\n\t\t\t\t// and the denoted block is the last one on the list, show the indicator at the end of the block\n\t\t\t\tblockClientIds[ insertionPoint.index - 1 ] === clientId;\n\n\t\t\tconst isReadOnly = getSettings().readOnly;\n\n\t\t\tconst block = __unstableGetBlockWithoutInnerBlocks( clientId );\n\t\t\tconst { attributes, name } = block || {};\n\t\t\tconst { align } = attributes || {};\n\t\t\tconst parents = getBlockParents( clientId, true );\n\t\t\tconst hasParents = !! parents.length;\n\t\t\tconst parentBlock = hasParents\n\t\t\t\t? __unstableGetBlockWithoutInnerBlocks( parents[ 0 ] )\n\t\t\t\t: {};\n\t\t\tconst { align: parentBlockAlignment } =\n\t\t\t\tparentBlock?.attributes || {};\n\t\t\tconst { name: parentBlockName } = parentBlock || {};\n\n\t\t\treturn {\n\t\t\t\tshouldShowInsertionPointBefore,\n\t\t\t\tshouldShowInsertionPointAfter,\n\t\t\t\tisReadOnly,\n\t\t\t\thasParents,\n\t\t\t\tblockAlignment: align,\n\t\t\t\tparentBlockAlignment,\n\t\t\t\tblockName: name,\n\t\t\t\tparentBlockName,\n\t\t\t};\n\t\t}\n\t),\n] )( BlockListItem );\n"]}