{"version":3,"sources":["@wordpress/block-editor/src/components/provider/with-registry-provider.js"],"names":["useState","useEffect","withRegistry","createRegistry","RegistryProvider","createHigherOrderComponent","storeConfig","STORE_NAME","blockEditorStoreName","withRegistryProvider","WrappedComponent","useSubRegistry","registry","props","subRegistry","setSubRegistry","newRegistry","registerStore"],"mappings":";;;;;AAAA;AACA;AACA;AACA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,oBAApC;AACA,SACCC,YADD,EAECC,cAFD,EAGCC,gBAHD,QAIO,iBAJP;AAKA,SAASC,0BAAT,QAA2C,oBAA3C;AAEA;AACA;AACA;;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,UAAU,IAAIC,oBAAvB,QAAmD,uBAAnD;AAEA,IAAMC,oBAAoB,GAAGJ,0BAA0B,CACtD,UAAEK,gBAAF,EAAwB;AACvB,SAAOR,YAAY,CAClB,gBAAqD;AAAA,mCAAjDS,cAAiD;AAAA,QAAjDA,cAAiD,oCAAhC,IAAgC;AAAA,QAA1BC,QAA0B,QAA1BA,QAA0B;AAAA,QAAbC,KAAa;;AACpD,QAAK,CAAEF,cAAP,EAAwB;AACvB,aACC,cAAC,gBAAD;AAAkB,QAAA,QAAQ,EAAGC;AAA7B,SAA6CC,KAA7C,EADD;AAGA;;AALmD,oBAOZb,QAAQ,CAAE,IAAF,CAPI;AAAA;AAAA,QAO5Cc,WAP4C;AAAA,QAO/BC,cAP+B;;AAQpDd,IAAAA,SAAS,CAAE,YAAM;AAChB,UAAMe,WAAW,GAAGb,cAAc,CAAE,EAAF,EAAMS,QAAN,CAAlC;AACAI,MAAAA,WAAW,CAACC,aAAZ,CACCT,oBADD,EAECF,WAFD;AAIAS,MAAAA,cAAc,CAAEC,WAAF,CAAd;AACA,KAPQ,EAON,CAAEJ,QAAF,CAPM,CAAT;;AASA,QAAK,CAAEE,WAAP,EAAqB;AACpB,aAAO,IAAP;AACA;;AAED,WACC,cAAC,gBAAD;AAAkB,MAAA,KAAK,EAAGA;AAA1B,OACC,cAAC,gBAAD;AACC,MAAA,QAAQ,EAAGA;AADZ,OAEMD,KAFN,EADD,CADD;AAQA,GA9BiB,CAAnB;AAgCA,CAlCqD,EAmCtD,sBAnCsD,CAAvD;AAsCA,eAAeJ,oBAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport {\n\twithRegistry,\n\tcreateRegistry,\n\tRegistryProvider,\n} from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { storeConfig } from '../../store';\nimport { STORE_NAME as blockEditorStoreName } from '../../store/constants';\n\nconst withRegistryProvider = createHigherOrderComponent(\n\t( WrappedComponent ) => {\n\t\treturn withRegistry(\n\t\t\t( { useSubRegistry = true, registry, ...props } ) => {\n\t\t\t\tif ( ! useSubRegistry ) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<WrappedComponent registry={ registry } { ...props } />\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst [ subRegistry, setSubRegistry ] = useState( null );\n\t\t\t\tuseEffect( () => {\n\t\t\t\t\tconst newRegistry = createRegistry( {}, registry );\n\t\t\t\t\tnewRegistry.registerStore(\n\t\t\t\t\t\tblockEditorStoreName,\n\t\t\t\t\t\tstoreConfig\n\t\t\t\t\t);\n\t\t\t\t\tsetSubRegistry( newRegistry );\n\t\t\t\t}, [ registry ] );\n\n\t\t\t\tif ( ! subRegistry ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<RegistryProvider value={ subRegistry }>\n\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\tregistry={ subRegistry }\n\t\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</RegistryProvider>\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t},\n\t'withRegistryProvider'\n);\n\nexport default withRegistryProvider;\n"]}