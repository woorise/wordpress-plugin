{"version":3,"sources":["@wordpress/block-editor/src/components/editor-styles/index.js"],"names":["tinycolor","useCallback","transformStyles","EDITOR_STYLES_SELECTOR","useDarkThemeBodyClassName","styles","node","ownerDocument","defaultView","body","canvas","querySelector","backgroundColor","getComputedStyle","getPropertyValue","getLuminance","classList","remove","add","EditorStyles","map","css","index"],"mappings":";;AAAA;AACA;AACA;AACA,OAAOA,SAAP,MAAsB,YAAtB;AAEA;AACA;AACA;;AACA,SAASC,WAAT,QAA4B,oBAA5B;AAEA;AACA;AACA;;AACA,OAAOC,eAAP,MAA4B,8BAA5B;AAEA,IAAMC,sBAAsB,GAAG,wBAA/B;;AAEA,SAASC,yBAAT,CAAoCC,MAApC,EAA6C;AAC5C,SAAOJ,WAAW,CACjB,UAAEK,IAAF,EAAY;AACX,QAAK,CAAEA,IAAP,EAAc;AACb;AACA;;AAHU,QAKHC,aALG,GAKeD,IALf,CAKHC,aALG;AAAA,QAMHC,WANG,GAMmBD,aANnB,CAMHC,WANG;AAAA,QAMUC,IANV,GAMmBF,aANnB,CAMUE,IANV;AAOX,QAAMC,MAAM,GAAGH,aAAa,CAACI,aAAd,CACdR,sBADc,CAAf;AAGA,QAAMS,eAAe,GAAGJ,WAAW,CACjCK,gBADsB,CACJH,MADI,EACI,IADJ,EAEtBI,gBAFsB,CAEJ,kBAFI,CAAxB;;AAIA,QAAKd,SAAS,CAAEY,eAAF,CAAT,CAA6BG,YAA7B,KAA8C,GAAnD,EAAyD;AACxDN,MAAAA,IAAI,CAACO,SAAL,CAAeC,MAAf,CAAuB,eAAvB;AACA,KAFD,MAEO;AACNR,MAAAA,IAAI,CAACO,SAAL,CAAeE,GAAf,CAAoB,eAApB;AACA;AACD,GApBgB,EAqBjB,CAAEb,MAAF,CArBiB,CAAlB;AAuBA;;AAED,eAAe,SAASc,YAAT,OAAoC;AAAA,MAAXd,MAAW,QAAXA,MAAW;AAClD,SACC,8BAGC;AAAO,IAAA,GAAG,EAAGD,yBAAyB,CAAEC,MAAF;AAAtC,IAHD,EAIGH,eAAe,CAAEG,MAAF,EAAUF,sBAAV,CAAf,CAAkDiB,GAAlD,CACD,UAAEC,GAAF,EAAOC,KAAP;AAAA,WACC;AAAO,MAAA,GAAG,EAAGA;AAAb,OAAuBD,GAAvB,CADD;AAAA,GADC,CAJH,CADD;AAYA","sourcesContent":["/**\n * External dependencies\n */\nimport tinycolor from 'tinycolor2';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport transformStyles from '../../utils/transform-styles';\n\nconst EDITOR_STYLES_SELECTOR = '.editor-styles-wrapper';\n\nfunction useDarkThemeBodyClassName( styles ) {\n\treturn useCallback(\n\t\t( node ) => {\n\t\t\tif ( ! node ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView, body } = ownerDocument;\n\t\t\tconst canvas = ownerDocument.querySelector(\n\t\t\t\tEDITOR_STYLES_SELECTOR\n\t\t\t);\n\t\t\tconst backgroundColor = defaultView\n\t\t\t\t.getComputedStyle( canvas, null )\n\t\t\t\t.getPropertyValue( 'background-color' );\n\n\t\t\tif ( tinycolor( backgroundColor ).getLuminance() > 0.5 ) {\n\t\t\t\tbody.classList.remove( 'is-dark-theme' );\n\t\t\t} else {\n\t\t\t\tbody.classList.add( 'is-dark-theme' );\n\t\t\t}\n\t\t},\n\t\t[ styles ]\n\t);\n}\n\nexport default function EditorStyles( { styles } ) {\n\treturn (\n\t\t<>\n\t\t\t{ /* Use an empty style element to have a document reference,\n\t\t\t     but this could be any element. */ }\n\t\t\t<style ref={ useDarkThemeBodyClassName( styles ) } />\n\t\t\t{ transformStyles( styles, EDITOR_STYLES_SELECTOR ).map(\n\t\t\t\t( css, index ) => (\n\t\t\t\t\t<style key={ index }>{ css }</style>\n\t\t\t\t)\n\t\t\t) }\n\t\t</>\n\t);\n}\n"]}