{"version":3,"sources":["@wordpress/block-editor/src/components/autocomplete/index.js"],"names":["clone","applyFilters","hasFilter","Autocomplete","useMemo","getDefaultBlockName","useBlockEditContext","blockAutocompleter","EMPTY_ARRAY","BlockEditorAutocomplete","props","name","completers","filteredCompleters","concat","map"],"mappings":";;;AAAA;AACA;AACA;AACA,SAASA,KAAT,QAAsB,QAAtB;AAEA;AACA;AACA;;AACA,SAASC,YAAT,EAAuBC,SAAvB,QAAwC,kBAAxC;AACA,SAASC,YAAT,QAA6B,uBAA7B;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,mBAAT,QAAoC,mBAApC;AAEA;AACA;AACA;;AACA,SAASC,mBAAT,QAAoC,uBAApC;AACA,OAAOC,kBAAP,MAA+B,4BAA/B;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMC,WAAW,GAAG,EAApB;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,uBAAT,CAAkCC,KAAlC,EAA0C;AAAA,6BACxBJ,mBAAmB,EADK;AAAA,MACjCK,IADiC,wBACjCA,IADiC;;AAAA,0BAGND,KAHM,CAGnCE,UAHmC;AAAA,MAGnCA,UAHmC,kCAGtBJ,WAHsB;AAKzCI,EAAAA,UAAU,GAAGR,OAAO,CAAE,YAAM;AAC3B,QAAIS,kBAAkB,GAAGD,UAAzB;;AAEA,QAAKD,IAAI,KAAKN,mBAAmB,EAAjC,EAAsC;AACrCQ,MAAAA,kBAAkB,GAAGA,kBAAkB,CAACC,MAAnB,CAA2B,CAC/CP,kBAD+C,CAA3B,CAArB;AAGA;;AAED,QAAKL,SAAS,CAAE,gCAAF,CAAd,EAAqD;AACpD;AACA,UAAKW,kBAAkB,KAAKD,UAA5B,EAAyC;AACxCC,QAAAA,kBAAkB,GAAGA,kBAAkB,CAACE,GAAnB,CAAwBf,KAAxB,CAArB;AACA;;AAEDa,MAAAA,kBAAkB,GAAGZ,YAAY,CAChC,gCADgC,EAEhCY,kBAFgC,EAGhCF,IAHgC,CAAjC;AAKA;;AAED,WAAOE,kBAAP;AACA,GAvBmB,EAuBjB,CAAED,UAAF,EAAcD,IAAd,CAvBiB,CAApB;AAyBA,SAAO,cAAC,YAAD,eAAmBD,KAAnB;AAA2B,IAAA,UAAU,EAAGE;AAAxC,KAAP;AACA;AAED;AACA;AACA;;;AACA,eAAeH,uBAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { clone } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { applyFilters, hasFilter } from '@wordpress/hooks';\nimport { Autocomplete } from '@wordpress/components';\nimport { useMemo } from '@wordpress/element';\nimport { getDefaultBlockName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit/context';\nimport blockAutocompleter from '../../autocompleters/block';\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\n/**\n * Wrap the default Autocomplete component with one that supports a filter hook\n * for customizing its list of autocompleters.\n *\n * @type {import('react').FC}\n */\nfunction BlockEditorAutocomplete( props ) {\n\tconst { name } = useBlockEditContext();\n\n\tlet { completers = EMPTY_ARRAY } = props;\n\n\tcompleters = useMemo( () => {\n\t\tlet filteredCompleters = completers;\n\n\t\tif ( name === getDefaultBlockName() ) {\n\t\t\tfilteredCompleters = filteredCompleters.concat( [\n\t\t\t\tblockAutocompleter,\n\t\t\t] );\n\t\t}\n\n\t\tif ( hasFilter( 'editor.Autocomplete.completers' ) ) {\n\t\t\t// Provide copies so filters may directly modify them.\n\t\t\tif ( filteredCompleters === completers ) {\n\t\t\t\tfilteredCompleters = filteredCompleters.map( clone );\n\t\t\t}\n\n\t\t\tfilteredCompleters = applyFilters(\n\t\t\t\t'editor.Autocomplete.completers',\n\t\t\t\tfilteredCompleters,\n\t\t\t\tname\n\t\t\t);\n\t\t}\n\n\t\treturn filteredCompleters;\n\t}, [ completers, name ] );\n\n\treturn <Autocomplete { ...props } completers={ completers } />;\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/autocomplete/README.md\n */\nexport default BlockEditorAutocomplete;\n"]}