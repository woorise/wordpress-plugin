{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/block-selection-button.js"],"names":["isWindows","window","navigator","platform","indexOf","selector","select","blockEditorStore","getSelectedBlockClientId","getMultiSelectedBlocksEndClientId","getPreviousBlockClientId","getNextBlockClientId","hasBlockMovingClientId","getBlockIndex","getBlockRootClientId","getClientIdsOfDescendants","canInsertBlockType","getBlockName","selectedBlockClientId","selectionEndClientId","selectionBeforeEndClientId","selectionAfterEndClientId","BlockSelectionButton","clientId","rootClientId","blockElement","blockInformation","selected","__unstableGetBlockWithoutInnerBlocks","getBlockListSettings","index","name","attributes","blockMovingMode","orientation","setNavigationMode","removeBlock","ref","current","focus","label","selectBlock","clearSelectedBlock","setBlockMovingClientId","moveBlockToPosition","onKeyDown","event","keyCode","isUp","UP","isDown","DOWN","isLeft","LEFT","isRight","RIGHT","isTab","TAB","isEscape","ESCAPE","isEnter","ENTER","isSpace","SPACE","isShift","shiftKey","BACKSPACE","DELETE","preventDefault","navigateUp","navigateDown","navigateOut","navigateIn","focusedBlockUid","startingBlockClientId","sourceRoot","destRoot","sourceBlockIndex","destinationBlockIndex","nextTabbable","tabbable","findNext","ownerDocument","defaultView","frameElement","findPrevious","blockType","classNames","dragHandleLabel","icon","draggableProps","dragHandle"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { dragHandle } from '@wordpress/icons';\nimport { Button, Flex, FlexItem } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect, useRef } from '@wordpress/element';\nimport {\n\tBACKSPACE,\n\tDELETE,\n\tUP,\n\tDOWN,\n\tLEFT,\n\tRIGHT,\n\tTAB,\n\tESCAPE,\n\tENTER,\n\tSPACE,\n} from '@wordpress/keycodes';\nimport {\n\tgetBlockType,\n\t__experimentalGetAccessibleBlockLabel as getAccessibleBlockLabel,\n} from '@wordpress/blocks';\nimport { speak } from '@wordpress/a11y';\nimport { focus } from '@wordpress/dom';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockTitle from '../block-title';\nimport BlockIcon from '../block-icon';\nimport { store as blockEditorStore } from '../../store';\nimport BlockDraggable from '../block-draggable';\nimport useBlockDisplayInformation from '../use-block-display-information';\n\n/**\n * Returns true if the user is using windows.\n *\n * @return {boolean} Whether the user is using Windows.\n */\nfunction isWindows() {\n\treturn window.navigator.platform.indexOf( 'Win' ) > -1;\n}\n\nfunction selector( select ) {\n\tconst {\n\t\tgetSelectedBlockClientId,\n\t\tgetMultiSelectedBlocksEndClientId,\n\t\tgetPreviousBlockClientId,\n\t\tgetNextBlockClientId,\n\t\thasBlockMovingClientId,\n\t\tgetBlockIndex,\n\t\tgetBlockRootClientId,\n\t\tgetClientIdsOfDescendants,\n\t\tcanInsertBlockType,\n\t\tgetBlockName,\n\t} = select( blockEditorStore );\n\n\tconst selectedBlockClientId = getSelectedBlockClientId();\n\tconst selectionEndClientId = getMultiSelectedBlocksEndClientId();\n\n\treturn {\n\t\tselectedBlockClientId,\n\t\tselectionBeforeEndClientId: getPreviousBlockClientId(\n\t\t\tselectionEndClientId || selectedBlockClientId\n\t\t),\n\t\tselectionAfterEndClientId: getNextBlockClientId(\n\t\t\tselectionEndClientId || selectedBlockClientId\n\t\t),\n\t\thasBlockMovingClientId,\n\t\tgetBlockIndex,\n\t\tgetBlockRootClientId,\n\t\tgetClientIdsOfDescendants,\n\t\tcanInsertBlockType,\n\t\tgetBlockName,\n\t};\n}\n\n/**\n * Block selection button component, displaying the label of the block. If the block\n * descends from a root block, a button is displayed enabling the user to select\n * the root block.\n *\n * @param {string} props          Component props.\n * @param {string} props.clientId Client ID of block.\n *\n * @return {WPComponent} The component to be rendered.\n */\nfunction BlockSelectionButton( { clientId, rootClientId, blockElement } ) {\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst selected = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\t__unstableGetBlockWithoutInnerBlocks,\n\t\t\t\tgetBlockIndex,\n\t\t\t\thasBlockMovingClientId,\n\t\t\t\tgetBlockListSettings,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst index = getBlockIndex( clientId, rootClientId );\n\t\t\tconst { name, attributes } = __unstableGetBlockWithoutInnerBlocks(\n\t\t\t\tclientId\n\t\t\t);\n\t\t\tconst blockMovingMode = hasBlockMovingClientId();\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\tname,\n\t\t\t\tattributes,\n\t\t\t\tblockMovingMode,\n\t\t\t\torientation: getBlockListSettings( rootClientId )?.orientation,\n\t\t\t};\n\t\t},\n\t\t[ clientId, rootClientId ]\n\t);\n\tconst { index, name, attributes, blockMovingMode, orientation } = selected;\n\tconst { setNavigationMode, removeBlock } = useDispatch( blockEditorStore );\n\tconst ref = useRef();\n\n\t// Focus the breadcrumb in navigation mode.\n\tuseEffect( () => {\n\t\tref.current.focus();\n\n\t\t// NVDA on windows suffers from a bug where focus changes are not announced properly\n\t\t// See WordPress/gutenberg#24121 and nvaccess/nvda#5825 for more details\n\t\t// To solve it we announce the focus change manually.\n\t\tif ( isWindows() ) {\n\t\t\tspeak( label );\n\t\t}\n\t}, [] );\n\n\tconst {\n\t\tselectedBlockClientId,\n\t\tselectionBeforeEndClientId,\n\t\tselectionAfterEndClientId,\n\t\thasBlockMovingClientId,\n\t\tgetBlockIndex,\n\t\tgetBlockRootClientId,\n\t\tgetClientIdsOfDescendants,\n\t} = useSelect( selector, [] );\n\tconst {\n\t\tselectBlock,\n\t\tclearSelectedBlock,\n\t\tsetBlockMovingClientId,\n\t\tmoveBlockToPosition,\n\t} = useDispatch( blockEditorStore );\n\n\tfunction onKeyDown( event ) {\n\t\tconst { keyCode } = event;\n\t\tconst isUp = keyCode === UP;\n\t\tconst isDown = keyCode === DOWN;\n\t\tconst isLeft = keyCode === LEFT;\n\t\tconst isRight = keyCode === RIGHT;\n\t\tconst isTab = keyCode === TAB;\n\t\tconst isEscape = keyCode === ESCAPE;\n\t\tconst isEnter = keyCode === ENTER;\n\t\tconst isSpace = keyCode === SPACE;\n\t\tconst isShift = event.shiftKey;\n\n\t\tif ( keyCode === BACKSPACE || keyCode === DELETE ) {\n\t\t\tremoveBlock( clientId );\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tconst navigateUp = ( isTab && isShift ) || isUp;\n\t\tconst navigateDown = ( isTab && ! isShift ) || isDown;\n\t\t// Move out of current nesting level (no effect if at root level).\n\t\tconst navigateOut = isLeft;\n\t\t// Move into next nesting level (no effect if the current block has no innerBlocks).\n\t\tconst navigateIn = isRight;\n\n\t\tlet focusedBlockUid;\n\t\tif ( navigateUp ) {\n\t\t\tfocusedBlockUid = selectionBeforeEndClientId;\n\t\t} else if ( navigateDown ) {\n\t\t\tfocusedBlockUid = selectionAfterEndClientId;\n\t\t} else if ( navigateOut ) {\n\t\t\tfocusedBlockUid =\n\t\t\t\tgetBlockRootClientId( selectedBlockClientId ) ??\n\t\t\t\tselectedBlockClientId;\n\t\t} else if ( navigateIn ) {\n\t\t\tfocusedBlockUid =\n\t\t\t\tgetClientIdsOfDescendants( [ selectedBlockClientId ] )[ 0 ] ??\n\t\t\t\tselectedBlockClientId;\n\t\t}\n\t\tconst startingBlockClientId = hasBlockMovingClientId();\n\n\t\tif ( isEscape && startingBlockClientId ) {\n\t\t\tsetBlockMovingClientId( null );\n\t\t}\n\t\tif ( ( isEnter || isSpace ) && startingBlockClientId ) {\n\t\t\tconst sourceRoot = getBlockRootClientId( startingBlockClientId );\n\t\t\tconst destRoot = getBlockRootClientId( selectedBlockClientId );\n\t\t\tconst sourceBlockIndex = getBlockIndex(\n\t\t\t\tstartingBlockClientId,\n\t\t\t\tsourceRoot\n\t\t\t);\n\t\t\tlet destinationBlockIndex = getBlockIndex(\n\t\t\t\tselectedBlockClientId,\n\t\t\t\tdestRoot\n\t\t\t);\n\t\t\tif (\n\t\t\t\tsourceBlockIndex < destinationBlockIndex &&\n\t\t\t\tsourceRoot === destRoot\n\t\t\t) {\n\t\t\t\tdestinationBlockIndex -= 1;\n\t\t\t}\n\t\t\tmoveBlockToPosition(\n\t\t\t\tstartingBlockClientId,\n\t\t\t\tsourceRoot,\n\t\t\t\tdestRoot,\n\t\t\t\tdestinationBlockIndex\n\t\t\t);\n\t\t\tselectBlock( startingBlockClientId );\n\t\t\tsetBlockMovingClientId( null );\n\t\t}\n\t\tif ( navigateDown || navigateUp || navigateOut || navigateIn ) {\n\t\t\tif ( focusedBlockUid ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tselectBlock( focusedBlockUid );\n\t\t\t} else if ( isTab && selectedBlockClientId ) {\n\t\t\t\tlet nextTabbable;\n\n\t\t\t\tif ( navigateDown ) {\n\t\t\t\t\tnextTabbable = focus.tabbable.findNext( blockElement );\n\n\t\t\t\t\tif ( ! nextTabbable ) {\n\t\t\t\t\t\tnextTabbable =\n\t\t\t\t\t\t\tblockElement.ownerDocument.defaultView.frameElement;\n\t\t\t\t\t\tnextTabbable = focus.tabbable.findNext( nextTabbable );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnextTabbable = focus.tabbable.findPrevious( blockElement );\n\t\t\t\t}\n\n\t\t\t\tif ( nextTabbable ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tnextTabbable.focus();\n\t\t\t\t\tclearSelectedBlock();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst blockType = getBlockType( name );\n\tconst label = getAccessibleBlockLabel(\n\t\tblockType,\n\t\tattributes,\n\t\tindex + 1,\n\t\torientation\n\t);\n\n\tconst classNames = classnames(\n\t\t'block-editor-block-list__block-selection-button',\n\t\t{\n\t\t\t'is-block-moving-mode': !! blockMovingMode,\n\t\t}\n\t);\n\n\tconst dragHandleLabel = __( 'Drag' );\n\n\treturn (\n\t\t<div className={ classNames }>\n\t\t\t<Flex\n\t\t\t\tjustify=\"center\"\n\t\t\t\tclassName=\"block-editor-block-list__block-selection-button__content\"\n\t\t\t>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<BlockIcon icon={ blockInformation?.icon } showColors />\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<BlockDraggable clientIds={ [ clientId ] }>\n\t\t\t\t\t\t{ ( draggableProps ) => (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ticon={ dragHandle }\n\t\t\t\t\t\t\t\tclassName=\"block-selection-button_drag-handle\"\n\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\tlabel={ dragHandleLabel }\n\t\t\t\t\t\t\t\t// Should not be able to tab to drag handle as this\n\t\t\t\t\t\t\t\t// button can only be used with a pointer device.\n\t\t\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\t\t\t{ ...draggableProps }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</BlockDraggable>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tonClick={ () => setNavigationMode( false ) }\n\t\t\t\t\t\tonKeyDown={ onKeyDown }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\tclassName=\"block-selection-button_select-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockTitle clientId={ clientId } />\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</div>\n\t);\n}\n\nexport default BlockSelectionButton;\n"]}