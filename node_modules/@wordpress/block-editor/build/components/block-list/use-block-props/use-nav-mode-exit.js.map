{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/use-block-props/use-nav-mode-exit.js"],"names":["useNavModeExit","clientId","isEnabled","select","blockEditorStore","isNavigationMode","isBlockSelected","setNavigationMode","node","onMouseDown","addEventListener"],"mappings":";;;;;;;AAGA;;AACA;;AAKA;;AATA;AACA;AACA;;AAIA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACO,SAASA,cAAT,CAAyBC,QAAzB,EAAoC;AAC1C,MAAMC,SAAS,GAAG,qBAAW,UAAEC,MAAF,EAAc;AAAA,kBACIA,MAAM,CACnDC,YADmD,CADV;AAAA,QAClCC,gBADkC,WAClCA,gBADkC;AAAA,QAChBC,eADgB,WAChBA,eADgB;;AAI1C,WAAOD,gBAAgB,MAAMC,eAAe,CAAEL,QAAF,CAA5C;AACA,GALiB,EAKf,EALe,CAAlB;;AAD0C,qBAOZ,uBAAaG,YAAb,CAPY;AAAA,MAOlCG,iBAPkC,gBAOlCA,iBAPkC;;AAS1C,SAAO,2BACN,UAAEC,IAAF,EAAY;AACX,QAAK,CAAEN,SAAP,EAAmB;AAClB;AACA;;AAED,aAASO,WAAT,GAAuB;AACtBF,MAAAA,iBAAiB,CAAE,KAAF,CAAjB;AACA;;AAEDC,IAAAA,IAAI,CAACE,gBAAL,CAAuB,WAAvB,EAAoCD,WAApC;AAEA,WAAO,YAAM;AACZD,MAAAA,IAAI,CAACE,gBAAL,CAAuB,WAAvB,EAAoCD,WAApC;AACA,KAFD;AAGA,GAfK,EAgBN,CAAEP,SAAF,CAhBM,CAAP;AAkBA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Allows navigation mode to be exited by clicking in the selected block.\n *\n * @param {string} clientId Block client ID.\n */\nexport function useNavModeExit( clientId ) {\n\tconst isEnabled = useSelect( ( select ) => {\n\t\tconst { isNavigationMode, isBlockSelected } = select(\n\t\t\tblockEditorStore\n\t\t);\n\t\treturn isNavigationMode() && isBlockSelected( clientId );\n\t}, [] );\n\tconst { setNavigationMode } = useDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! isEnabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction onMouseDown() {\n\t\t\t\tsetNavigationMode( false );\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\n\t\t\treturn () => {\n\t\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\n\t\t\t};\n\t\t},\n\t\t[ isEnabled ]\n\t);\n}\n"]}