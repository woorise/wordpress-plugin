{"version":3,"sources":["@wordpress/block-editor/src/components/block-media-update-progress/index.native.js"],"names":["MEDIA_UPLOAD_STATE_UPLOADING","MEDIA_UPLOAD_STATE_SUCCEEDED","MEDIA_UPLOAD_STATE_FAILED","MEDIA_UPLOAD_STATE_RESET","MEDIA_SAVE_STATE_SAVING","MEDIA_SAVE_STATE_SUCCEEDED","MEDIA_SAVE_STATE_FAILED","MEDIA_SAVE_STATE_RESET","MEDIA_SAVE_FINAL_STATE_RESULT","MEDIA_SAVE_MEDIAID_CHANGED","BlockMediaUpdateProgress","props","state","progress","isSaveInProgress","isSaveFailed","isUploadInProgress","isUploadFailed","mediaUpload","bind","mediaSave","addMediaUploadListener","addMediaSaveListener","removeMediaUploadListener","removeMediaSaveListener","mediaId","mediaFiles","undefined","some","element","id","toString","payload","mediaIdContainedInMediaFiles","updateMediaUploadProgress","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","mediaUploadStateReset","updateMediaSaveProgress","finishMediaSaveWithSuccess","finishMediaSaveWithFailure","mediaSaveStateReset","finalSaveResult","mediaIdChanged","setState","onUpdateMediaSaveProgress","onFinishMediaSaveWithSuccess","onFinishMediaSaveWithFailure","onMediaSaveStateReset","success","onFinalSaveResult","onMediaIdChanged","onUpdateMediaUploadProgress","onFinishMediaUploadWithSuccess","onFinishMediaUploadWithFailure","onMediaUploadStateReset","subscriptionParentMediaUpload","remove","subscriptionParentMediaSave","renderContent","showSpinner","retryMessageSave","retryMessageUpload","retryMessage","styles","mediaUploadProgress","progressBar","Component"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { Spinner } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tsubscribeMediaUpload,\n\tsubscribeMediaSave,\n} from '@wordpress/react-native-bridge';\n\n/**\n * Internal dependencies\n */\nimport styles from './styles.scss';\n\nexport const MEDIA_UPLOAD_STATE_UPLOADING = 1;\nexport const MEDIA_UPLOAD_STATE_SUCCEEDED = 2;\nexport const MEDIA_UPLOAD_STATE_FAILED = 3;\nexport const MEDIA_UPLOAD_STATE_RESET = 4;\n\nexport const MEDIA_SAVE_STATE_SAVING = 5;\nexport const MEDIA_SAVE_STATE_SUCCEEDED = 6;\nexport const MEDIA_SAVE_STATE_FAILED = 7;\nexport const MEDIA_SAVE_STATE_RESET = 8;\nexport const MEDIA_SAVE_FINAL_STATE_RESULT = 9;\nexport const MEDIA_SAVE_MEDIAID_CHANGED = 10;\n\nexport class BlockMediaUpdateProgress extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tprogress: 0,\n\t\t\tisSaveInProgress: false,\n\t\t\tisSaveFailed: false,\n\t\t\tisUploadInProgress: false,\n\t\t\tisUploadFailed: false,\n\t\t};\n\n\t\tthis.mediaUpload = this.mediaUpload.bind( this );\n\t\tthis.mediaSave = this.mediaSave.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.addMediaUploadListener();\n\t\tthis.addMediaSaveListener();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.removeMediaUploadListener();\n\t\tthis.removeMediaSaveListener();\n\t}\n\n\tmediaIdContainedInMediaFiles( mediaId, mediaFiles ) {\n\t\tif ( mediaId !== undefined && mediaFiles !== undefined ) {\n\t\t\treturn mediaFiles.some(\n\t\t\t\t( element ) => element.id === mediaId.toString()\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\n\tmediaUpload( payload ) {\n\t\tconst { mediaFiles } = this.props;\n\n\t\tif (\n\t\t\tthis.mediaIdContainedInMediaFiles( payload.mediaId, mediaFiles ) ===\n\t\t\tfalse\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch ( payload.state ) {\n\t\t\tcase MEDIA_UPLOAD_STATE_UPLOADING:\n\t\t\t\tthis.updateMediaUploadProgress( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_UPLOAD_STATE_SUCCEEDED:\n\t\t\t\tthis.finishMediaUploadWithSuccess( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_UPLOAD_STATE_FAILED:\n\t\t\t\tthis.finishMediaUploadWithFailure( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_UPLOAD_STATE_RESET:\n\t\t\t\tthis.mediaUploadStateReset( payload );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tmediaSave( payload ) {\n\t\tconst { mediaFiles } = this.props;\n\n\t\tif (\n\t\t\tthis.mediaIdContainedInMediaFiles( payload.mediaId, mediaFiles ) ===\n\t\t\tfalse\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch ( payload.state ) {\n\t\t\tcase MEDIA_SAVE_STATE_SAVING:\n\t\t\t\tthis.updateMediaSaveProgress( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_SAVE_STATE_SUCCEEDED:\n\t\t\t\tthis.finishMediaSaveWithSuccess( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_SAVE_STATE_FAILED:\n\t\t\t\tthis.finishMediaSaveWithFailure( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_SAVE_STATE_RESET:\n\t\t\t\tthis.mediaSaveStateReset( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_SAVE_FINAL_STATE_RESULT:\n\t\t\t\tthis.finalSaveResult( payload );\n\t\t\t\tbreak;\n\t\t\tcase MEDIA_SAVE_MEDIAID_CHANGED:\n\t\t\t\tthis.mediaIdChanged( payload );\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// ---- Block media save actions\n\tupdateMediaSaveProgress( payload ) {\n\t\tthis.setState( {\n\t\t\tprogress: payload.progress,\n\t\t\tisUploadInProgress: false,\n\t\t\tisUploadFailed: false,\n\t\t\tisSaveInProgress: true,\n\t\t\tisSaveFailed: false,\n\t\t} );\n\t\tif ( this.props.onUpdateMediaSaveProgress ) {\n\t\t\tthis.props.onUpdateMediaSaveProgress( payload );\n\t\t}\n\t}\n\n\tfinishMediaSaveWithSuccess( payload ) {\n\t\tthis.setState( { isSaveInProgress: false } );\n\t\tif ( this.props.onFinishMediaSaveWithSuccess ) {\n\t\t\tthis.props.onFinishMediaSaveWithSuccess( payload );\n\t\t}\n\t}\n\n\tfinishMediaSaveWithFailure( payload ) {\n\t\tthis.setState( { isSaveInProgress: false, isSaveFailed: true } );\n\t\tif ( this.props.onFinishMediaSaveWithFailure ) {\n\t\t\tthis.props.onFinishMediaSaveWithFailure( payload );\n\t\t}\n\t}\n\n\tmediaSaveStateReset( payload ) {\n\t\tthis.setState( { isSaveInProgress: false, isSaveFailed: false } );\n\t\tif ( this.props.onMediaSaveStateReset ) {\n\t\t\tthis.props.onMediaSaveStateReset( payload );\n\t\t}\n\t}\n\n\tfinalSaveResult( payload ) {\n\t\tthis.setState( {\n\t\t\tprogress: payload.progress,\n\t\t\tisUploadInProgress: false,\n\t\t\tisUploadFailed: false,\n\t\t\tisSaveInProgress: false,\n\t\t\tisSaveFailed: ! payload.success,\n\t\t} );\n\t\tif ( this.props.onFinalSaveResult ) {\n\t\t\tthis.props.onFinalSaveResult( payload );\n\t\t}\n\t}\n\n\tmediaIdChanged( payload ) {\n\t\tthis.setState( {\n\t\t\tisUploadInProgress: false,\n\t\t\tisUploadFailed: false,\n\t\t\tisSaveInProgress: false,\n\t\t\tisSaveFailed: false,\n\t\t} );\n\t\tif ( this.props.onMediaIdChanged ) {\n\t\t\tthis.props.onMediaIdChanged( payload );\n\t\t}\n\t}\n\n\t// ---- Block media upload actions\n\tupdateMediaUploadProgress( payload ) {\n\t\tthis.setState( {\n\t\t\tprogress: payload.progress,\n\t\t\tisUploadInProgress: true,\n\t\t\tisUploadFailed: false,\n\t\t\tisSaveInProgress: false,\n\t\t\tisSaveFailed: false,\n\t\t} );\n\t\tif ( this.props.onUpdateMediaUploadProgress ) {\n\t\t\tthis.props.onUpdateMediaUploadProgress( payload );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tthis.setState( { isUploadInProgress: false, isSaveInProgress: false } );\n\t\tif ( this.props.onFinishMediaUploadWithSuccess ) {\n\t\t\tthis.props.onFinishMediaUploadWithSuccess( payload );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithFailure( payload ) {\n\t\tthis.setState( { isUploadInProgress: false, isUploadFailed: true } );\n\t\tif ( this.props.onFinishMediaUploadWithFailure ) {\n\t\t\tthis.props.onFinishMediaUploadWithFailure( payload );\n\t\t}\n\t}\n\n\tmediaUploadStateReset( payload ) {\n\t\tthis.setState( { isUploadInProgress: false, isUploadFailed: false } );\n\t\tif ( this.props.onMediaUploadStateReset ) {\n\t\t\tthis.props.onMediaUploadStateReset( payload );\n\t\t}\n\t}\n\n\taddMediaUploadListener() {\n\t\t//if we already have a subscription not worth doing it again\n\t\tif ( this.subscriptionParentMediaUpload ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.subscriptionParentMediaUpload = subscribeMediaUpload(\n\t\t\t( payload ) => {\n\t\t\t\tthis.mediaUpload( payload );\n\t\t\t}\n\t\t);\n\t}\n\n\tremoveMediaUploadListener() {\n\t\tif ( this.subscriptionParentMediaUpload ) {\n\t\t\tthis.subscriptionParentMediaUpload.remove();\n\t\t}\n\t}\n\n\taddMediaSaveListener() {\n\t\t//if we already have a subscription not worth doing it again\n\t\tif ( this.subscriptionParentMediaSave ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.subscriptionParentMediaSave = subscribeMediaSave( ( payload ) => {\n\t\t\tthis.mediaSave( payload );\n\t\t} );\n\t}\n\n\tremoveMediaSaveListener() {\n\t\tif ( this.subscriptionParentMediaSave ) {\n\t\t\tthis.subscriptionParentMediaSave.remove();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { renderContent = () => null } = this.props;\n\t\tconst {\n\t\t\tisUploadInProgress,\n\t\t\tisUploadFailed,\n\t\t\tisSaveInProgress,\n\t\t\tisSaveFailed,\n\t\t} = this.state;\n\t\tconst showSpinner =\n\t\t\tthis.state.isUploadInProgress || this.state.isSaveInProgress;\n\t\tconst progress = this.state.progress * 100;\n\t\t// eslint-disable-next-line @wordpress/i18n-no-collapsible-whitespace\n\t\tconst retryMessageSave = __(\n\t\t\t'Failed to save files.\\nPlease tap for options.'\n\t\t);\n\t\t// eslint-disable-next-line @wordpress/i18n-no-collapsible-whitespace\n\t\tconst retryMessageUpload = __(\n\t\t\t'Failed to upload files.\\nPlease tap for options.'\n\t\t);\n\t\tlet retryMessage = retryMessageSave;\n\t\tif ( isUploadFailed ) {\n\t\t\tretryMessage = retryMessageUpload;\n\t\t}\n\n\t\treturn (\n\t\t\t<View style={ styles.mediaUploadProgress } pointerEvents=\"box-none\">\n\t\t\t\t{ showSpinner && (\n\t\t\t\t\t<View style={ styles.progressBar }>\n\t\t\t\t\t\t<Spinner progress={ progress } />\n\t\t\t\t\t</View>\n\t\t\t\t) }\n\t\t\t\t{ renderContent( {\n\t\t\t\t\tisUploadInProgress,\n\t\t\t\t\tisUploadFailed,\n\t\t\t\t\tisSaveInProgress,\n\t\t\t\t\tisSaveFailed,\n\t\t\t\t\tretryMessage,\n\t\t\t\t} ) }\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default BlockMediaUpdateProgress;\n"]}