{"version":3,"sources":["@wordpress/block-editor/src/components/block-mobile-toolbar/block-actions-menu.native.js"],"names":["BlockActionsMenu","onDelete","isStackedHorizontally","wrapBlockSettings","wrapBlockMover","openGeneralSidebar","onMoveDown","onMoveUp","isFirst","isLast","blockTitle","isEmptyDefaultBlock","anchorNodeRef","getBlocksByClientId","selectedBlockClientId","createSuccessNotice","duplicateBlock","removeBlocks","pasteBlock","canInsertBlockType","rootClientId","clipboard","setCurrentClipboard","pickerRef","moversOptions","keys","clipboardBlock","HTML","isPasteEnabled","name","actionTitle","backwardButtonTitle","backward","forwardButtonTitle","forward","deleteOption","id","label","value","separated","disabled","settingsOption","backwardButtonOption","forwardButtonOption","copyButtonOption","cutButtonOption","pasteButtonOption","duplicateButtonOption","options","onPasteBlock","onPickerSelect","copyBlock","serializedBlock","cutBlock","onPickerPresent","current","presentPicker","disabledButtonIndices","map","option","index","filter","Boolean","accessibilityHint","Platform","OS","getAnchor","undefined","moreHorizontalMobile","hint","length","select","clientIds","blockEditorStore","getBlockIndex","getBlockRootClientId","getBlockOrder","getBlockName","getBlock","getSelectedBlockClientIds","normalizedClientIds","block","blockName","blockType","title","firstClientId","blockOrder","firstIndex","lastIndex","isDefaultBlock","isEmptyContent","attributes","content","isExactlyOneBlock","currentIndex","dispatch","moveBlocksDown","moveBlocksUp","duplicateBlocks","insertBlock","replaceBlocks","getBlockSelectionEnd","noticesStore","canReplaceBlock","insertedBlock","innerBlocks","withInstanceId"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { Platform, findNodeHandle } from 'react-native';\nimport { partial, first, castArray, last, compact } from 'lodash';\n/**\n * WordPress dependencies\n */\nimport {\n\tgetClipboard,\n\tsetClipboard,\n\tToolbarButton,\n\tPicker,\n} from '@wordpress/components';\nimport {\n\tgetBlockType,\n\tgetDefaultBlockName,\n\tserialize,\n\trawHandler,\n\tcreateBlock,\n\tisUnmodifiedDefaultBlock,\n} from '@wordpress/blocks';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport { moreHorizontalMobile } from '@wordpress/icons';\nimport { useRef, useState } from '@wordpress/element';\nimport { store as noticesStore } from '@wordpress/notices';\n/**\n * Internal dependencies\n */\nimport { getMoversSetup } from '../block-mover/mover-description';\nimport { store as blockEditorStore } from '../../store';\n\nconst BlockActionsMenu = ( {\n\tonDelete,\n\tisStackedHorizontally,\n\twrapBlockSettings,\n\twrapBlockMover,\n\topenGeneralSidebar,\n\tonMoveDown,\n\tonMoveUp,\n\tisFirst,\n\tisLast,\n\tblockTitle,\n\tisEmptyDefaultBlock,\n\tanchorNodeRef,\n\tgetBlocksByClientId,\n\tselectedBlockClientId,\n\tcreateSuccessNotice,\n\tduplicateBlock,\n\tremoveBlocks,\n\tpasteBlock,\n\tcanInsertBlockType,\n\trootClientId,\n} ) => {\n\tconst [ clipboard, setCurrentClipboard ] = useState( getClipboard() );\n\tconst pickerRef = useRef();\n\tconst moversOptions = { keys: [ 'icon', 'actionTitle' ] };\n\tconst clipboardBlock = clipboard && rawHandler( { HTML: clipboard } )[ 0 ];\n\tconst isPasteEnabled =\n\t\tclipboardBlock &&\n\t\tcanInsertBlockType( clipboardBlock.name, rootClientId );\n\n\tconst {\n\t\tactionTitle: {\n\t\t\tbackward: backwardButtonTitle,\n\t\t\tforward: forwardButtonTitle,\n\t\t},\n\t} = getMoversSetup( isStackedHorizontally, moversOptions );\n\n\tconst deleteOption = {\n\t\tid: 'deleteOption',\n\t\tlabel: __( 'Remove block' ),\n\t\tvalue: 'deleteOption',\n\t\tseparated: true,\n\t\tdisabled: isEmptyDefaultBlock,\n\t};\n\n\tconst settingsOption = {\n\t\tid: 'settingsOption',\n\t\tlabel: __( 'Block settings' ),\n\t\tvalue: 'settingsOption',\n\t};\n\n\tconst backwardButtonOption = {\n\t\tid: 'backwardButtonOption',\n\t\tlabel: backwardButtonTitle,\n\t\tvalue: 'backwardButtonOption',\n\t\tdisabled: isFirst,\n\t};\n\n\tconst forwardButtonOption = {\n\t\tid: 'forwardButtonOption',\n\t\tlabel: forwardButtonTitle,\n\t\tvalue: 'forwardButtonOption',\n\t\tdisabled: isLast,\n\t};\n\n\tconst copyButtonOption = {\n\t\tid: 'copyButtonOption',\n\t\tlabel: __( 'Copy block' ),\n\t\tvalue: 'copyButtonOption',\n\t};\n\n\tconst cutButtonOption = {\n\t\tid: 'cutButtonOption',\n\t\tlabel: __( 'Cut block' ),\n\t\tvalue: 'cutButtonOption',\n\t};\n\n\tconst pasteButtonOption = {\n\t\tid: 'pasteButtonOption',\n\t\tlabel: __( 'Paste block after' ),\n\t\tvalue: 'pasteButtonOption',\n\t};\n\n\tconst duplicateButtonOption = {\n\t\tid: 'duplicateButtonOption',\n\t\tlabel: __( 'Duplicate block' ),\n\t\tvalue: 'duplicateButtonOption',\n\t};\n\n\tconst options = compact( [\n\t\twrapBlockMover && backwardButtonOption,\n\t\twrapBlockMover && forwardButtonOption,\n\t\twrapBlockSettings && settingsOption,\n\t\tcopyButtonOption,\n\t\tcutButtonOption,\n\t\tisPasteEnabled && pasteButtonOption,\n\t\tduplicateButtonOption,\n\t\tdeleteOption,\n\t] );\n\n\tfunction onPasteBlock() {\n\t\tif ( ! clipboard ) {\n\t\t\treturn;\n\t\t}\n\n\t\tpasteBlock( rawHandler( { HTML: clipboard } )[ 0 ] );\n\t}\n\n\tfunction onPickerSelect( value ) {\n\t\tswitch ( value ) {\n\t\t\tcase deleteOption.value:\n\t\t\t\tonDelete();\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\t// translators: displayed right after the block is removed.\n\t\t\t\t\t__( 'Block removed' )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase settingsOption.value:\n\t\t\t\topenGeneralSidebar();\n\t\t\t\tbreak;\n\t\t\tcase forwardButtonOption.value:\n\t\t\t\tonMoveDown();\n\t\t\t\tbreak;\n\t\t\tcase backwardButtonOption.value:\n\t\t\t\tonMoveUp();\n\t\t\t\tbreak;\n\t\t\tcase copyButtonOption.value:\n\t\t\t\tconst copyBlock = getBlocksByClientId( selectedBlockClientId );\n\t\t\t\tconst serializedBlock = serialize( copyBlock );\n\t\t\t\tsetCurrentClipboard( serializedBlock );\n\t\t\t\tsetClipboard( serializedBlock );\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\t// translators: displayed right after the block is copied.\n\t\t\t\t\t__( 'Block copied' )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase cutButtonOption.value:\n\t\t\t\tconst cutBlock = getBlocksByClientId( selectedBlockClientId );\n\t\t\t\tsetClipboard( serialize( cutBlock ) );\n\t\t\t\tremoveBlocks( selectedBlockClientId );\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\t// translators: displayed right after the block is cut.\n\t\t\t\t\t__( 'Block cut' )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase pasteButtonOption.value:\n\t\t\t\tonPasteBlock();\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\t// translators: displayed right after the block is pasted.\n\t\t\t\t\t__( 'Block pasted' )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase duplicateButtonOption.value:\n\t\t\t\tduplicateBlock();\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\t// translators: displayed right after the block is duplicated.\n\t\t\t\t\t__( 'Block duplicated' )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tfunction onPickerPresent() {\n\t\tif ( pickerRef.current ) {\n\t\t\tpickerRef.current.presentPicker();\n\t\t}\n\t}\n\n\tconst disabledButtonIndices = options\n\t\t.map( ( option, index ) => option.disabled && index + 1 )\n\t\t.filter( Boolean );\n\n\tconst accessibilityHint =\n\t\tPlatform.OS === 'ios'\n\t\t\t? __( 'Double tap to open Action Sheet with available options' )\n\t\t\t: __( 'Double tap to open Bottom Sheet with available options' );\n\n\tconst getAnchor = () =>\n\t\tanchorNodeRef ? findNodeHandle( anchorNodeRef ) : undefined;\n\n\treturn (\n\t\t<>\n\t\t\t<ToolbarButton\n\t\t\t\ttitle={ __( 'Open Block Actions Menu' ) }\n\t\t\t\tonClick={ onPickerPresent }\n\t\t\t\ticon={ moreHorizontalMobile }\n\t\t\t\textraProps={ {\n\t\t\t\t\thint: accessibilityHint,\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t<Picker\n\t\t\t\tref={ pickerRef }\n\t\t\t\toptions={ options }\n\t\t\t\tonChange={ onPickerSelect }\n\t\t\t\tdestructiveButtonIndex={ options.length }\n\t\t\t\tdisabledButtonIndices={ disabledButtonIndices }\n\t\t\t\thideCancelButton={ Platform.OS !== 'ios' }\n\t\t\t\tleftAlign={ true }\n\t\t\t\tgetAnchor={ getAnchor }\n\t\t\t\t// translators: %s: block title e.g: \"Paragraph\".\n\t\t\t\ttitle={ sprintf( __( '%s block options' ), blockTitle ) }\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default compose(\n\twithSelect( ( select, { clientIds } ) => {\n\t\tconst {\n\t\t\tgetBlockIndex,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockOrder,\n\t\t\tgetBlockName,\n\t\t\tgetBlock,\n\t\t\tgetBlocksByClientId,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\tcanInsertBlockType,\n\t\t} = select( blockEditorStore );\n\t\tconst normalizedClientIds = castArray( clientIds );\n\t\tconst block = getBlock( normalizedClientIds );\n\t\tconst blockName = getBlockName( normalizedClientIds );\n\t\tconst blockType = getBlockType( blockName );\n\t\tconst blockTitle = blockType.title;\n\t\tconst firstClientId = first( normalizedClientIds );\n\t\tconst rootClientId = getBlockRootClientId( firstClientId );\n\t\tconst blockOrder = getBlockOrder( rootClientId );\n\n\t\tconst firstIndex = getBlockIndex( firstClientId, rootClientId );\n\t\tconst lastIndex = getBlockIndex(\n\t\t\tlast( normalizedClientIds ),\n\t\t\trootClientId\n\t\t);\n\n\t\tconst isDefaultBlock = blockName === getDefaultBlockName();\n\t\tconst isEmptyContent = block.attributes.content === '';\n\t\tconst isExactlyOneBlock = blockOrder.length === 1;\n\t\tconst isEmptyDefaultBlock =\n\t\t\tisExactlyOneBlock && isDefaultBlock && isEmptyContent;\n\n\t\treturn {\n\t\t\tisFirst: firstIndex === 0,\n\t\t\tisLast: lastIndex === blockOrder.length - 1,\n\t\t\trootClientId,\n\t\t\tblockTitle,\n\t\t\tisEmptyDefaultBlock,\n\t\t\tgetBlocksByClientId,\n\t\t\tselectedBlockClientId: getSelectedBlockClientIds(),\n\t\t\tcurrentIndex: firstIndex,\n\t\t\tcanInsertBlockType,\n\t\t};\n\t} ),\n\twithDispatch(\n\t\t( dispatch, { clientIds, rootClientId, currentIndex }, { select } ) => {\n\t\t\tconst {\n\t\t\t\tmoveBlocksDown,\n\t\t\t\tmoveBlocksUp,\n\t\t\t\tduplicateBlocks,\n\t\t\t\tremoveBlocks,\n\t\t\t\tinsertBlock,\n\t\t\t\treplaceBlocks,\n\t\t\t} = dispatch( blockEditorStore );\n\t\t\tconst { openGeneralSidebar } = dispatch( 'core/edit-post' );\n\t\t\tconst { getBlockSelectionEnd, getBlock } = select(\n\t\t\t\tblockEditorStore\n\t\t\t);\n\t\t\tconst { createSuccessNotice } = dispatch( noticesStore );\n\n\t\t\treturn {\n\t\t\t\tonMoveDown: partial( moveBlocksDown, clientIds, rootClientId ),\n\t\t\t\tonMoveUp: partial( moveBlocksUp, clientIds, rootClientId ),\n\t\t\t\topenGeneralSidebar: () =>\n\t\t\t\t\topenGeneralSidebar( 'edit-post/block' ),\n\t\t\t\tcreateSuccessNotice,\n\t\t\t\tduplicateBlock() {\n\t\t\t\t\treturn duplicateBlocks( clientIds );\n\t\t\t\t},\n\t\t\t\tremoveBlocks,\n\t\t\t\tpasteBlock: ( clipboardBlock ) => {\n\t\t\t\t\tconst canReplaceBlock = isUnmodifiedDefaultBlock(\n\t\t\t\t\t\tgetBlock( getBlockSelectionEnd() )\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( ! canReplaceBlock ) {\n\t\t\t\t\t\tconst insertedBlock = createBlock(\n\t\t\t\t\t\t\tclipboardBlock.name,\n\t\t\t\t\t\t\tclipboardBlock.attributes,\n\t\t\t\t\t\t\tclipboardBlock.innerBlocks\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tinsertBlock(\n\t\t\t\t\t\t\tinsertedBlock,\n\t\t\t\t\t\t\tcurrentIndex + 1,\n\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treplaceBlocks( clientIds, clipboardBlock );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t),\n\twithInstanceId\n)( BlockActionsMenu );\n"]}