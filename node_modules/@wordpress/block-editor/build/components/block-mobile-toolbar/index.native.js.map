{"version":3,"sources":["@wordpress/block-editor/src/components/block-mobile-toolbar/index.native.js"],"names":["BREAKPOINTS","wrapSettings","wrapMover","BlockMobileToolbar","clientId","onDelete","isStackedHorizontally","blockWidth","anchorNodeRef","isFullWidth","fillsLength","setFillsLength","appenderWidth","setAppenderWidth","spacingValue","styles","toolbar","marginLeft","onLayout","nativeEvent","layout","layoutWidth","Math","floor","width","wrapBlockSettings","wrapBlockMover","toolbarFullWidth","spacer","fills","length","select","blockEditorStore","getBlockIndex","order","dispatch","rootClientId","removeBlock"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\nimport BlockMover from '../block-mover';\nimport BlockActionsMenu from './block-actions-menu';\nimport { BlockSettingsButton } from '../block-settings';\nimport { store as blockEditorStore } from '../../store';\n\n// Defined breakpoints are used to get a point when\n// `settings` and `mover` controls should be wrapped into `BlockActionsMenu`\n// and accessed through `BottomSheet`(Android)/`ActionSheet`(iOS).\nconst BREAKPOINTS = {\n\twrapSettings: 65,\n\twrapMover: 150,\n};\nconst BlockMobileToolbar = ( {\n\tclientId,\n\tonDelete,\n\tisStackedHorizontally,\n\tblockWidth,\n\tanchorNodeRef,\n\tisFullWidth,\n} ) => {\n\tconst [ fillsLength, setFillsLength ] = useState( null );\n\tconst [ appenderWidth, setAppenderWidth ] = useState( 0 );\n\tconst spacingValue = styles.toolbar.marginLeft * 2;\n\n\tfunction onLayout( { nativeEvent } ) {\n\t\tconst { layout } = nativeEvent;\n\t\tconst layoutWidth = Math.floor( layout.width );\n\t\tif ( layoutWidth !== appenderWidth ) {\n\t\t\tsetAppenderWidth( nativeEvent.layout.width );\n\t\t}\n\t}\n\n\tconst wrapBlockSettings =\n\t\tblockWidth < BREAKPOINTS.wrapSettings ||\n\t\tappenderWidth - spacingValue < BREAKPOINTS.wrapSettings;\n\tconst wrapBlockMover =\n\t\tblockWidth <= BREAKPOINTS.wrapMover ||\n\t\tappenderWidth - spacingValue <= BREAKPOINTS.wrapMover;\n\n\treturn (\n\t\t<View\n\t\t\tstyle={ [ styles.toolbar, isFullWidth && styles.toolbarFullWidth ] }\n\t\t\tonLayout={ onLayout }\n\t\t>\n\t\t\t{ ! wrapBlockMover && (\n\t\t\t\t<BlockMover\n\t\t\t\t\tclientIds={ [ clientId ] }\n\t\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\n\t\t\t\t/>\n\t\t\t) }\n\n\t\t\t<View style={ styles.spacer } />\n\n\t\t\t<BlockSettingsButton.Slot>\n\t\t\t\t{ /* Render only one settings icon even if we have more than one fill - need for hooks with controls */ }\n\t\t\t\t{ ( fills = [ null ] ) => {\n\t\t\t\t\tsetFillsLength( fills.length );\n\t\t\t\t\treturn wrapBlockSettings ? null : fills[ 0 ];\n\t\t\t\t} }\n\t\t\t</BlockSettingsButton.Slot>\n\n\t\t\t<BlockActionsMenu\n\t\t\t\tclientIds={ [ clientId ] }\n\t\t\t\twrapBlockMover={ wrapBlockMover }\n\t\t\t\twrapBlockSettings={ wrapBlockSettings && fillsLength }\n\t\t\t\tisStackedHorizontally={ isStackedHorizontally }\n\t\t\t\tonDelete={ onDelete }\n\t\t\t\tanchorNodeRef={ anchorNodeRef }\n\t\t\t/>\n\t\t</View>\n\t);\n};\n\nexport default compose(\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlockIndex } = select( blockEditorStore );\n\n\t\treturn {\n\t\t\torder: getBlockIndex( clientId ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId, rootClientId, onDelete } ) => {\n\t\tconst { removeBlock } = dispatch( blockEditorStore );\n\t\treturn {\n\t\t\tonDelete:\n\t\t\t\tonDelete || ( () => removeBlock( clientId, rootClientId ) ),\n\t\t};\n\t} )\n)( BlockMobileToolbar );\n"]}