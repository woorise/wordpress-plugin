{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/hooks/use-patterns-state.js"],"names":["usePatternsState","onInsert","rootClientId","select","blockEditorStore","__experimentalGetAllowedPatterns","getSettings","inserterPatterns","filter","pattern","scope","inserter","patterns","patternCategories","__experimentalBlockPatternCategories","noticesStore","createSuccessNotice","onClickPattern","blocks","block","name","title","type"],"mappings":";;;;;;;AAGA;;AAKA;;AACA;;AACA;;AACA;;AACA;;AAKA;;AAjBA;AACA;AACA;;AAGA;AACA;AACA;;AAOA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMA,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAEC,QAAF,EAAYC,YAAZ,EAA8B;AAAA,mBACd,qBACvC,UAAEC,MAAF,EAAc;AAAA,kBAC6CA,MAAM,CAC/DC,YAD+D,CADnD;AAAA,QACLC,gCADK,WACLA,gCADK;AAAA,QAC6BC,WAD7B,WAC6BA,WAD7B;;AAIb,QAAMC,gBAAgB,GAAGF,gCAAgC,CACxDH,YADwD,CAAhC,CAEvBM,MAFuB,CAGxB,UAAEC,OAAF;AAAA,aAAe,CAAEA,OAAO,CAACC,KAAV,IAAmBD,OAAO,CAACC,KAAR,CAAcC,QAAhD;AAAA,KAHwB,CAAzB;;AAKA,WAAO;AACNC,MAAAA,QAAQ,EAAEL,gBADJ;AAENM,MAAAA,iBAAiB,EAAEP,WAAW,GAC5BQ;AAHI,KAAP;AAKA,GAfsC,EAgBvC,CAAEZ,YAAF,CAhBuC,CADc;AAAA,MAC9CW,iBAD8C,cAC9CA,iBAD8C;AAAA,MAC3BD,QAD2B,cAC3BA,QAD2B;;AAAA,qBAmBtB,uBAAaG,cAAb,CAnBsB;AAAA,MAmB9CC,mBAnB8C,gBAmB9CA,mBAnB8C;;AAoBtD,MAAMC,cAAc,GAAG,0BAAa,UAAER,OAAF,EAAWS,MAAX,EAAuB;AAC1DjB,IAAAA,QAAQ,CACP,iBAAKiB,MAAL,EAAa,UAAEC,KAAF;AAAA,aAAa,wBAAYA,KAAZ,CAAb;AAAA,KAAb,CADO,EAEPV,OAAO,CAACW,IAFD,CAAR;AAIAJ,IAAAA,mBAAmB,CAClB;AACC;AACA,kBAAI,8BAAJ,CAFD,EAGCP,OAAO,CAACY,KAHT,CADkB,EAMlB;AACCC,MAAAA,IAAI,EAAE;AADP,KANkB,CAAnB;AAUA,GAfsB,EAepB,EAfoB,CAAvB;AAiBA,SAAO,CAAEV,QAAF,EAAYC,iBAAZ,EAA+BI,cAA/B,CAAP;AACA,CAtCD;;eAwCejB,gB","sourcesContent":["/**\n * External dependencies\n */\nimport { map } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport { cloneBlock } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Retrieves the block patterns inserter state.\n *\n * @param {Function} onInsert     function called when inserter a list of blocks.\n * @param {string=}  rootClientId Insertion's root client ID.\n *\n * @return {Array} Returns the patterns state. (patterns, categories, onSelect handler)\n */\nconst usePatternsState = ( onInsert, rootClientId ) => {\n\tconst { patternCategories, patterns } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { __experimentalGetAllowedPatterns, getSettings } = select(\n\t\t\t\tblockEditorStore\n\t\t\t);\n\t\t\tconst inserterPatterns = __experimentalGetAllowedPatterns(\n\t\t\t\trootClientId\n\t\t\t).filter(\n\t\t\t\t( pattern ) => ! pattern.scope || pattern.scope.inserter\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tpatterns: inserterPatterns,\n\t\t\t\tpatternCategories: getSettings()\n\t\t\t\t\t.__experimentalBlockPatternCategories,\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\n\tconst onClickPattern = useCallback( ( pattern, blocks ) => {\n\t\tonInsert(\n\t\t\tmap( blocks, ( block ) => cloneBlock( block ) ),\n\t\t\tpattern.name\n\t\t);\n\t\tcreateSuccessNotice(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: block pattern title. */\n\t\t\t\t__( 'Block pattern \"%s\" inserted.' ),\n\t\t\t\tpattern.title\n\t\t\t),\n\t\t\t{\n\t\t\t\ttype: 'snackbar',\n\t\t\t}\n\t\t);\n\t}, [] );\n\n\treturn [ patterns, patternCategories, onClickPattern ];\n};\n\nexport default usePatternsState;\n"]}