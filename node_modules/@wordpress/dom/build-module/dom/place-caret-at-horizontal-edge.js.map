{"version":3,"sources":["@wordpress/dom/src/dom/place-caret-at-horizontal-edge.js"],"names":["includes","placeCaretAtHorizontalEdge","container","isReverse","focus","tagName","selectionStart","value","length","selectionEnd","isContentEditable","rangeTarget","ownerDocument","defaultView","selection","getSelection","range","createRange","selectNodeContents","collapse","removeAllRanges","addRange"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,QAAT,QAAyB,QAAzB;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,0BAAT,CAAqCC,SAArC,EAAgDC,SAAhD,EAA4D;AAC1E,MAAK,CAAED,SAAP,EAAmB;AAClB;AACA;;AAEDA,EAAAA,SAAS,CAACE,KAAV;;AAEA,MAAKJ,QAAQ,CAAE,CAAE,OAAF,EAAW,UAAX,CAAF,EAA2BE,SAAS,CAACG,OAArC,CAAb,EAA8D;AAC7D;AACA,QAAK,OAAOH,SAAS,CAACI,cAAjB,KAAoC,QAAzC,EAAoD;AACnD;AACA;;AAED,QAAKH,SAAL,EAAiB;AAChBD,MAAAA,SAAS,CAACI,cAAV,GAA2BJ,SAAS,CAACK,KAAV,CAAgBC,MAA3C;AACAN,MAAAA,SAAS,CAACO,YAAV,GAAyBP,SAAS,CAACK,KAAV,CAAgBC,MAAzC;AACA,KAHD,MAGO;AACNN,MAAAA,SAAS,CAACI,cAAV,GAA2B,CAA3B;AACAJ,MAAAA,SAAS,CAACO,YAAV,GAAyB,CAAzB;AACA;;AAED;AACA;;AAED,MAAK,CAAEP,SAAS,CAACQ,iBAAjB,EAAqC;AACpC;AACA,GA1ByE,CA4B1E;AACA;AACA;;;AACA,MAAMC,WAAW,GAAGT,SAAS,CAAEC,SAAS,GAAG,WAAH,GAAiB,YAA5B,CAA7B,CA/B0E,CAiC1E;AACA;;AACA,MAAK,CAAEQ,WAAP,EAAqB;AACpB;AACA;;AArCyE,MAuClEC,aAvCkE,GAuChDV,SAvCgD,CAuClEU,aAvCkE;AAAA,MAwClEC,WAxCkE,GAwClDD,aAxCkD,CAwClEC,WAxCkE;AAyC1E,MAAMC,SAAS,GAAGD,WAAW,CAACE,YAAZ,EAAlB;AACA,MAAMC,KAAK,GAAGJ,aAAa,CAACK,WAAd,EAAd;AAEAD,EAAAA,KAAK,CAACE,kBAAN,CAA0BP,WAA1B;AACAK,EAAAA,KAAK,CAACG,QAAN,CAAgB,CAAEhB,SAAlB;AAEAW,EAAAA,SAAS,CAACM,eAAV;AACAN,EAAAA,SAAS,CAACO,QAAV,CAAoBL,KAApB;AACA","sourcesContent":["/**\n * External dependencies\n */\nimport { includes } from 'lodash';\n\n/**\n * Places the caret at start or end of a given element.\n *\n * @param {Element} container Focusable element.\n * @param {boolean} isReverse True for end, false for start.\n */\nexport default function placeCaretAtHorizontalEdge( container, isReverse ) {\n\tif ( ! container ) {\n\t\treturn;\n\t}\n\n\tcontainer.focus();\n\n\tif ( includes( [ 'INPUT', 'TEXTAREA' ], container.tagName ) ) {\n\t\t// The element may not support selection setting.\n\t\tif ( typeof container.selectionStart !== 'number' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isReverse ) {\n\t\t\tcontainer.selectionStart = container.value.length;\n\t\t\tcontainer.selectionEnd = container.value.length;\n\t\t} else {\n\t\t\tcontainer.selectionStart = 0;\n\t\t\tcontainer.selectionEnd = 0;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tif ( ! container.isContentEditable ) {\n\t\treturn;\n\t}\n\n\t// Select on extent child of the container, not the container itself. This\n\t// avoids the selection always being `endOffset` of 1 when placed at end,\n\t// where `startContainer`, `endContainer` would always be container itself.\n\tconst rangeTarget = container[ isReverse ? 'lastChild' : 'firstChild' ];\n\n\t// If no range target, it implies that the container is empty. Focusing is\n\t// sufficient for caret to be placed correctly.\n\tif ( ! rangeTarget ) {\n\t\treturn;\n\t}\n\n\tconst { ownerDocument } = container;\n\tconst { defaultView } = ownerDocument;\n\tconst selection = defaultView.getSelection();\n\tconst range = ownerDocument.createRange();\n\n\trange.selectNodeContents( rangeTarget );\n\trange.collapse( ! isReverse );\n\n\tselection.removeAllRanges();\n\tselection.addRange( range );\n}\n"]}