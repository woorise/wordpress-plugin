"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useControlledValue = useControlledValue;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _lodash = require("lodash");

var _react = require("react");

/**
 * Simplified and improved implementation of useControlledState.
 *
 * @template T
 * @param {object} props
 * @param {T} [props.defaultValue]
 * @param {T} [props.value]
 * @param {(value: T) => void} [props.onChange]
 * @return {[T|undefined, (value: T) => void]}
 */
function useControlledValue(_ref) {
  var defaultValue = _ref.defaultValue,
      onChange = _ref.onChange,
      valueProp = _ref.value;
  var hasValue = !(0, _lodash.isNil)(valueProp);
  var initialValue = hasValue ? valueProp : defaultValue;

  var _useState = (0, _react.useState)(initialValue),
      _useState2 = (0, _slicedToArray2.default)(_useState, 2),
      state = _useState2[0],
      setState = _useState2[1];

  var value = hasValue ? valueProp : state;
  var setValue = hasValue && !(0, _lodash.isNil)(onChange) ? onChange : setState;
  return [value, setValue];
}