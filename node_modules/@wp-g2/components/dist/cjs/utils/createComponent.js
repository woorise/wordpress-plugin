"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createComponent = void 0;

var _context = require("@wp-g2/context");

var _lodash = require("lodash");

var _react = _interopRequireDefault(require("react"));

var _View = require("../View");

/**
 * @template {import('reakit-utils/types').As} T
 * @template {import('@wp-g2/create-styles').ViewOwnProps<{}, T>} P
 * @param {import('./types').Options<T, P>} options
 * @return {import('@wp-g2/create-styles').PolymorphicComponent<T, import('@wp-g2/create-styles').PropsFromViewOwnProps<P>>}
 */
var createComponent = function (_ref) {
  var as = _ref.as,
      _ref$name = _ref.name,
      name = _ref$name === void 0 ? 'Component' : _ref$name,
      _ref$useHook = _ref.useHook,
      useHook = _ref$useHook === void 0 ? _lodash.identity : _ref$useHook,
      _ref$memo = _ref.memo,
      memo = _ref$memo === void 0 ? true : _ref$memo;

  /**
   * @param {P} props
   * @param {import('react').Ref<T>} forwardedRef
   */
  function Component(props, forwardedRef) {
    var otherProps = useHook(props);
    return /*#__PURE__*/_react.default.createElement(_View.View, Object.assign({
      as: as || 'div'
    }, otherProps, {
      ref: forwardedRef
    }));
  }

  Component.displayName = name;
  return (0, _context.contextConnect)(Component, name, {
    memo: memo
  });
};

exports.createComponent = createComponent;